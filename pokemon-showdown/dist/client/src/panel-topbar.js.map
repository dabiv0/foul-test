{
  "version": 3,
  "sources": ["../../../client/src/panel-topbar.tsx"],
  "sourcesContent": ["/**\r\n * Topbar Panel\r\n *\r\n * Topbar view - handles the topbar and some generic popups.\r\n *\r\n * Also handles global drag-and-drop support.\r\n *\r\n * @author Guangcong Luo <guangcongluo@gmail.com>\r\n * @license AGPLv3\r\n */\r\n\r\nimport preact from \"../js/lib/preact\";\r\nimport { Config, PS, type PSRoom, type RoomID } from \"./client-main\";\r\nimport { NARROW_MODE_HEADER_WIDTH, PSView, VERTICAL_HEADER_WIDTH } from \"./panels\";\r\nimport type { Battle } from \"./battle\";\r\nimport { BattleLog } from \"./battle-log\"; // optional\r\n\r\nwindow.addEventListener('drop', e => {\r\n\tconsole.log('drop ' + e.dataTransfer!.dropEffect);\r\n\tconst target = e.target as HTMLElement;\r\n\tif ((target as HTMLInputElement).type?.startsWith(\"text\")) {\r\n\t\tPS.dragging = null;\r\n\t\treturn; // Ignore text fields\r\n\t}\r\n\r\n\t// The default team drop action for Firefox is to open the team as a\r\n\t// URL, which needs to be prevented.\r\n\t// The default file drop action for most browsers is to open the file\r\n\t// in the tab, which is generally undesirable anyway.\r\n\te.preventDefault();\r\n\tPS.dragging = null;\r\n\tPS.updateAutojoin();\r\n});\r\nwindow.addEventListener('dragover', e => {\r\n\t// this prevents the bounce-back animation\r\n\te.preventDefault();\r\n});\r\n\r\nexport class PSHeader extends preact.Component {\r\n\tstatic toggleMute = (e: Event) => {\r\n\t\tPS.prefs.set('mute', !PS.prefs.mute);\r\n\t\tPS.update();\r\n\t};\r\n\tstatic handleDragEnter = (e: DragEvent) => {\r\n\t\t// console.log('dragenter ' + e.dataTransfer!.dropEffect);\r\n\t\te.preventDefault();\r\n\t\tif (PS.dragging?.type !== 'room') return;\r\n\t\t/** the element being passed over */\r\n\t\tconst target = e.currentTarget as HTMLAnchorElement;\r\n\r\n\t\tconst draggingRoom = PS.dragging.roomid;\r\n\t\tif (draggingRoom === null) return;\r\n\r\n\t\tconst draggedOverRoom = PS.router.extractRoomID(target.href);\r\n\t\tif (draggedOverRoom === null) return; // should never happen\r\n\t\tif (draggingRoom === draggedOverRoom) return;\r\n\r\n\t\tconst leftIndex = PS.leftRoomList.indexOf(draggedOverRoom);\r\n\t\tif (leftIndex >= 0) {\r\n\t\t\tPS.dragOnto(PS.rooms[draggingRoom]!, 'left', leftIndex);\r\n\t\t} else {\r\n\t\t\tconst rightIndex = PS.rightRoomList.indexOf(draggedOverRoom);\r\n\t\t\tif (rightIndex >= 0) {\r\n\t\t\t\tPS.dragOnto(PS.rooms[draggingRoom]!, 'right', rightIndex);\r\n\t\t\t} else {\r\n\t\t\t\t// eslint-disable-next-line no-useless-return\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// dropEffect !== 'none' prevents bounce-back animation in\r\n\t\t// Chrome/Safari/Opera\r\n\t\t// if (e.dataTransfer) e.dataTransfer.dropEffect = 'move';\r\n\t};\r\n\tstatic handleDragStart = (e: DragEvent) => {\r\n\t\tconst roomid = PS.router.extractRoomID((e.currentTarget as HTMLAnchorElement).href);\r\n\t\tif (!roomid) return; // should never happen\r\n\r\n\t\tPS.dragging = { type: 'room', roomid };\r\n\t};\r\n\tstatic roomInfo(room: PSRoom) {\r\n\t\tconst RoomType = PS.roomTypes[room.type];\r\n\t\tlet icon = RoomType?.icon || <i class=\"fa fa-file-text-o\" aria-hidden></i>;\r\n\t\tlet title = room.title;\r\n\t\tswitch (room.type) {\r\n\t\tcase 'battle':\r\n\t\t\tlet idChunks = room.id.slice(7).split('-');\r\n\t\t\tlet formatName;\r\n\t\t\t// TODO: relocate to room implementation\r\n\t\t\tif (idChunks.length <= 1) {\r\n\t\t\t\tif (idChunks[0] === 'uploadedreplay') formatName = 'Uploaded Replay';\r\n\t\t\t} else {\r\n\t\t\t\tformatName = window.BattleLog ? BattleLog.formatName(idChunks[0]) : idChunks[0];\r\n\t\t\t}\r\n\t\t\tif (!title) {\r\n\t\t\t\tlet battle = (room as any).battle as Battle | undefined;\r\n\t\t\t\tlet p1 = battle?.p1?.name || '';\r\n\t\t\t\tlet p2 = battle?.p2?.name || '';\r\n\t\t\t\tif (p1 && p2) {\r\n\t\t\t\t\ttitle = `${p1} v. ${p2}`;\r\n\t\t\t\t} else if (p1 || p2) {\r\n\t\t\t\t\ttitle = `${p1}${p2}`;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttitle = `(empty room)`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ticon = <i class=\"text\">{formatName}</i>;\r\n\t\t\tbreak;\r\n\t\tcase 'html':\r\n\t\tdefault:\r\n\t\t\tif (title.startsWith('[')) {\r\n\t\t\t\tlet closeBracketIndex = title.indexOf(']');\r\n\t\t\t\tif (closeBracketIndex > 0) {\r\n\t\t\t\t\ticon = <i class=\"text\">{title.slice(1, closeBracketIndex)}</i>;\r\n\t\t\t\t\ttitle = title.slice(closeBracketIndex + 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\treturn { icon, title };\r\n\t}\r\n\tstatic renderRoomTab(id: RoomID, noAria?: boolean) {\r\n\t\tconst room = PS.rooms[id];\r\n\t\tif (!room) return null;\r\n\t\tconst closable = (id === '' || id === 'rooms' ? '' : ' closable');\r\n\t\tconst cur = PS.isVisible(room) ? ' cur' : '';\r\n\t\tlet notifying = room.isSubtleNotifying ? ' subtle-notifying' : '';\r\n\t\tlet hoverTitle = '';\r\n\t\tlet notifications = room.notifications;\r\n\t\tif (id === '') {\r\n\t\t\tfor (const roomid of PS.miniRoomList) {\r\n\t\t\t\tconst miniNotifications = PS.rooms[roomid]?.notifications;\r\n\t\t\t\tif (miniNotifications?.length) notifications = [...notifications, ...miniNotifications];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (notifications.length) {\r\n\t\t\tnotifying = ' notifying';\r\n\t\t\tfor (const notif of notifications) {\r\n\t\t\t\tif (!notif.body) continue;\r\n\t\t\t\thoverTitle += `${notif.title}\\n${notif.body}\\n`;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet className = `roomtab button${notifying}${closable}${cur}`;\r\n\r\n\t\tlet { icon, title: roomTitle } = PSHeader.roomInfo(room);\r\n\t\tif (room.type === 'rooms' && PS.leftPanelWidth !== null) roomTitle = '';\r\n\t\tif (room.type === 'battle') className += ' roomtab-battle';\r\n\r\n\t\tlet closeButton = null;\r\n\t\tif (closable) {\r\n\t\t\tcloseButton = <button class=\"closebutton\" name=\"closeRoom\" value={id} aria-label=\"Close\">\r\n\t\t\t\t<i class=\"fa fa-times-circle\" aria-hidden></i>\r\n\t\t\t</button>;\r\n\t\t}\r\n\t\tconst aria: Record<string, string> = noAria ? {} : {\r\n\t\t\t\"role\": \"tab\", \"id\": `roomtab-${id}`, \"aria-selected\": cur ? \"true\" : \"false\",\r\n\t\t};\r\n\t\tif (id === 'rooms') aria['aria-label'] = \"Join chat\";\r\n\t\treturn <li class={id === '' ? 'home-li' : ''} key={id}>\r\n\t\t\t<a\r\n\t\t\t\tclass={className} href={`/${id}`} draggable={true} title={hoverTitle || undefined}\r\n\t\t\t\tonDragEnter={this.handleDragEnter} onDragStart={this.handleDragStart}\r\n\t\t\t\t{...aria}\r\n\t\t\t>\r\n\t\t\t\t{icon} {roomTitle}\r\n\t\t\t</a>\r\n\t\t\t{closeButton}\r\n\t\t</li>;\r\n\t}\r\n\thandleResize = () => {\r\n\t\tif (!this.base) return;\r\n\r\n\t\tif (PS.leftPanelWidth === null) {\r\n\t\t\tconst width = document.documentElement.clientWidth;\r\n\t\t\tconst oldNarrowMode = PSView.narrowMode;\r\n\t\t\tPSView.narrowMode = width <= 700;\r\n\t\t\tPSView.verticalHeaderWidth = PSView.narrowMode ? NARROW_MODE_HEADER_WIDTH : VERTICAL_HEADER_WIDTH;\r\n\t\t\tdocument.documentElement.style.width = PSView.narrowMode ? `${width + NARROW_MODE_HEADER_WIDTH}px` : 'auto';\r\n\t\t\tif (oldNarrowMode !== PSView.narrowMode) {\r\n\t\t\t\tif (PSView.narrowMode) {\r\n\t\t\t\t\tif (!PSView.textboxFocused) {\r\n\t\t\t\t\t\tdocument.documentElement.classList?.add('scroll-snap-enabled');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdocument.documentElement.classList?.remove('scroll-snap-enabled');\r\n\t\t\t\t}\r\n\t\t\t\tPS.update();\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (PSView.narrowMode) {\r\n\t\t\tdocument.documentElement.classList?.remove('scroll-snap-enabled');\r\n\t\t\tPSView.narrowMode = false;\r\n\t\t}\r\n\r\n\t\tconst userbarLeft = this.base.querySelector('div.userbar')?.getBoundingClientRect()?.left;\r\n\t\tconst plusTabRight = this.base.querySelector('a.roomtab[aria-label=\"Join chat\"]')?.getBoundingClientRect()?.right;\r\n\t\tconst overflow = this.base.querySelector<HTMLElement>('.overflow');\r\n\r\n\t\tif (!overflow || !userbarLeft || !plusTabRight) return;\r\n\r\n\t\tif (plusTabRight > userbarLeft - 3) {\r\n\t\t\toverflow.style.display = 'block';\r\n\t\t} else {\r\n\t\t\toverflow.style.display = 'none';\r\n\t\t}\r\n\t};\r\n\toverride componentDidMount() {\r\n\t\tPS.user.subscribe(() => {\r\n\t\t\tthis.forceUpdate();\r\n\t\t});\r\n\t\twindow.addEventListener('resize', this.handleResize);\r\n\t\tthis.handleResize();\r\n\t}\r\n\toverride componentDidUpdate() {\r\n\t\tthis.handleResize();\r\n\t}\r\n\trenderUser() {\r\n\t\tif (!PS.connected) {\r\n\t\t\treturn <button class=\"button\" disabled><em>Offline</em></button>;\r\n\t\t}\r\n\t\tif (PS.user.initializing) {\r\n\t\t\treturn <button class=\"button\" disabled><em>Connecting...</em></button>;\r\n\t\t}\r\n\t\tif (!PS.user.named) {\r\n\t\t\treturn <a class=\"button\" href=\"login\">Choose name</a>;\r\n\t\t}\r\n\t\tconst userColor = window.BattleLog && `color:${BattleLog.usernameColor(PS.user.userid)}`;\r\n\t\treturn <span class=\"username\" style={userColor}>\r\n\t\t\t<span class=\"usernametext\">{PS.user.name}</span>\r\n\t\t</span>;\r\n\t}\r\n\trenderVertical() {\r\n\t\treturn <div\r\n\t\t\tid=\"header\" class=\"header-vertical\" role=\"navigation\"\r\n\t\t\tstyle={`width:${PSView.verticalHeaderWidth - 7}px`} onClick={PSView.scrollToHeader}\r\n\t\t>\r\n\t\t\t<div class=\"maintabbarbottom\"></div>\r\n\t\t\t<div class=\"scrollable-part\">\r\n\t\t\t\t<img\r\n\t\t\t\t\tclass=\"logo\"\r\n\t\t\t\t\tsrc={`https://${Config.routes.client}/favicon-256.png`}\r\n\t\t\t\t\talt=\"Pok\u00E9mon Showdown! (beta)\"\r\n\t\t\t\t\twidth=\"50\" height=\"50\"\r\n\t\t\t\t/>\r\n\t\t\t\t<div class=\"tablist\" role=\"tablist\">\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t{PSHeader.renderRoomTab(PS.leftRoomList[0])}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t{PS.leftRoomList.slice(1).map(roomid => PSHeader.renderRoomTab(roomid))}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<ul class=\"siderooms\">\r\n\t\t\t\t\t\t{PS.rightRoomList.map(roomid => PSHeader.renderRoomTab(roomid))}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{null /* overflow */}\r\n\t\t\t<div class=\"userbar\">\r\n\t\t\t\t{this.renderUser()} {}\r\n\t\t\t\t<div style=\"float:right\">\r\n\t\t\t\t\t<button class=\"icon button\" data-href=\"volume\" title=\"Sound\" aria-label=\"Sound\" onDblClick={PSHeader.toggleMute}>\r\n\t\t\t\t\t\t<i class={PS.prefs.mute ? 'fa fa-volume-off' : 'fa fa-volume-up'}></i>\r\n\t\t\t\t\t</button> {}\r\n\t\t\t\t\t<button class=\"icon button\" data-href=\"options\" title=\"Options\" aria-label=\"Options\">\r\n\t\t\t\t\t\t<i class=\"fa fa-cog\" aria-hidden></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>;\r\n\t}\r\n\toverride render() {\r\n\t\tif (PS.leftPanelWidth === null) {\r\n\t\t\treturn this.renderVertical();\r\n\t\t}\r\n\t\treturn <div id=\"header\" class=\"header\" role=\"navigation\">\r\n\t\t\t<div class=\"maintabbarbottom\"></div>\r\n\t\t\t<div class=\"tabbar maintabbar\"><div class=\"inner-1\" role={PS.leftPanelWidth ? 'none' : 'tablist'}><div class=\"inner-2\">\r\n\t\t\t\t<ul class=\"maintabbar-left\" style={{ width: `${PS.leftPanelWidth}px` }} role={PS.leftPanelWidth ? 'tablist' : 'none'}>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tclass=\"logo\"\r\n\t\t\t\t\t\t\tsrc={`https://${Config.routes.client}/favicon-256.png`}\r\n\t\t\t\t\t\t\talt=\"Pok\u00E9mon Showdown! (beta)\"\r\n\t\t\t\t\t\t\twidth=\"48\" height=\"48\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t{PSHeader.renderRoomTab(PS.leftRoomList[0])}\r\n\t\t\t\t\t{PS.leftRoomList.slice(1).map(roomid => PSHeader.renderRoomTab(roomid))}\r\n\t\t\t\t</ul>\r\n\t\t\t\t<ul class=\"maintabbar-right\" role={PS.leftPanelWidth ? 'tablist' : 'none'}>\r\n\t\t\t\t\t{PS.rightRoomList.map(roomid => PSHeader.renderRoomTab(roomid))}\r\n\t\t\t\t</ul>\r\n\t\t\t</div></div></div>\r\n\t\t\t<div class=\"overflow\">\r\n\t\t\t\t<button name=\"tablist\" class=\"button\" data-href=\"roomtablist\" aria-label=\"All tabs\" type=\"button\">\r\n\t\t\t\t\t<i class=\"fa fa-caret-down\" aria-hidden></i>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"userbar\">\r\n\t\t\t\t{this.renderUser()} {}\r\n\t\t\t\t<button class=\"icon button\" data-href=\"volume\" title=\"Sound\" aria-label=\"Sound\" onDblClick={PSHeader.toggleMute}>\r\n\t\t\t\t\t<i class={PS.prefs.mute ? 'fa fa-volume-off' : 'fa fa-volume-up'}></i>\r\n\t\t\t\t</button> {}\r\n\t\t\t\t<button class=\"icon button\" data-href=\"options\" title=\"Options\" aria-label=\"Options\">\r\n\t\t\t\t\t<i class=\"fa fa-cog\" aria-hidden></i>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>;\r\n\t}\r\n}\r\n\r\nexport class PSMiniHeader extends preact.Component {\r\n\toverride componentDidMount() {\r\n\t\twindow.addEventListener('scroll', this.handleScroll);\r\n\t}\r\n\toverride componentWillUnmount() {\r\n\t\twindow.removeEventListener('scroll', this.handleScroll);\r\n\t}\r\n\thandleScroll = () => {\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\toverride render() {\r\n\t\tif (PS.leftPanelWidth !== null) return null;\r\n\r\n\t\tlet notificationsCount = 0;\r\n\t\tfor (const roomid of PS.leftRoomList) {\r\n\t\t\tconst miniNotifications = PS.rooms[roomid]?.notifications;\r\n\t\t\tif (miniNotifications?.length) notificationsCount++;\r\n\t\t}\r\n\t\tconst { icon, title } = PSHeader.roomInfo(PS.panel);\r\n\t\tconst userColor = window.BattleLog && `color:${BattleLog.usernameColor(PS.user.userid)}`;\r\n\t\tconst showMenuButton = PSView.narrowMode;\r\n\t\tconst notifying = (\r\n\t\t\t!showMenuButton && !window.scrollX && Object.values(PS.rooms).some(room => room!.notifications.length)\r\n\t\t) ? ' notifying' : '';\r\n\t\tconst menuButton = !showMenuButton ? (\r\n\t\t\tnull\r\n\t\t) : window.scrollX ? (\r\n\t\t\t<button onClick={PSView.scrollToHeader} class={`mini-header-left ${notifying}`} aria-label=\"Menu\">\r\n\t\t\t\t{!!notificationsCount && <div class=\"notification-badge\">{notificationsCount}</div>}\r\n\t\t\t\t<i class=\"fa fa-bars\" aria-hidden></i>\r\n\t\t\t</button>\r\n\t\t) : (\r\n\t\t\t<button onClick={PSView.scrollToRoom} class=\"mini-header-left\" aria-label=\"Menu\">\r\n\t\t\t\t<i class=\"fa fa-arrow-right\" aria-hidden></i>\r\n\t\t\t</button>\r\n\t\t);\r\n\t\treturn <div class=\"mini-header\" style={`left:${PSView.verticalHeaderWidth + (PSView.narrowMode ? 0 : -1)}px;`}>\r\n\t\t\t{menuButton}\r\n\t\t\t{icon} {title}\r\n\t\t\t<button data-href=\"options\" class=\"mini-header-right\" aria-label=\"Options\">\r\n\t\t\t\t{PS.user.named ? <strong style={userColor}>{PS.user.name}</strong> : <i class=\"fa fa-cog\" aria-hidden></i>}\r\n\t\t\t</button>\r\n\t\t</div>;\r\n\t}\r\n}\r\n\r\npreact.render(<PSView />, document.body, document.getElementById('ps-frame')!);\r\n"],
  "mappings": "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",
  "names": ["preact"]
}
