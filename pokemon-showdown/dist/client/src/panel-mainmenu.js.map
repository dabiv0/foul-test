{
  "version": 3,
  "sources": ["../../../client/src/panel-mainmenu.tsx"],
  "sourcesContent": ["/**\r\n * Main menu panel\r\n *\r\n * @author Guangcong Luo <guangcongluo@gmail.com>\r\n * @license AGPLv3\r\n */\r\n\r\nimport preact from \"../js/lib/preact\";\r\nimport { PSLoginServer } from \"./client-connection\";\r\nimport { Config, PS, PSRoom, type RoomID, type RoomOptions, type Team } from \"./client-main\";\r\nimport { PSIcon, PSPanelWrapper, PSRoomPanel } from \"./panels\";\r\nimport type { BattlesRoom } from \"./panel-battle\";\r\nimport type { ChatRoom } from \"./panel-chat\";\r\nimport type { LadderFormatRoom } from \"./panel-ladder\";\r\nimport type { RoomsRoom } from \"./panel-rooms\";\r\nimport { TeamBox, type SelectType } from \"./panel-teamdropdown\";\r\nimport { Dex, toID, type ID } from \"./battle-dex\";\r\nimport type { Args } from \"./battle-text-parser\";\r\nimport { BattleLog } from \"./battle-log\"; // optional\r\n\r\nexport type RoomInfo = {\r\n\ttitle: string, desc?: string, userCount?: number, section?: string, privacy?: 'hidden',\r\n\tspotlight?: string, subRooms?: string[],\r\n};\r\n\r\nexport class MainMenuRoom extends PSRoom {\r\n\toverride readonly classType: string = 'mainmenu';\r\n\tuserdetailsCache: {\r\n\t\t[userid: string]: {\r\n\t\t\tuserid: ID,\r\n\t\t\tname: string,\r\n\t\t\tavatar?: string | number,\r\n\t\t\tstatus?: string,\r\n\t\t\tgroup?: string,\r\n\t\t\tcustomgroup?: string,\r\n\t\t\trooms?: { [roomid: string]: { isPrivate?: true, p1?: string, p2?: string } },\r\n\t\t},\r\n\t} = {};\r\n\troomsCache: {\r\n\t\tbattleCount?: number,\r\n\t\tuserCount?: number,\r\n\t\tchat?: RoomInfo[],\r\n\t\tsectionTitles?: string[],\r\n\t} = {};\r\n\tsearchCountdown: { format: string, packedTeam: string, countdown: number, timer: number } | null = null;\r\n\t/** used to track the moment between \"search sent\" and \"server acknowledged search sent\" */\r\n\tsearchSent = false;\r\n\tsearch: { searching: string[], games: Record<RoomID, string> | null } = { searching: [], games: null };\r\n\tdisallowSpectators: boolean | null = PS.prefs.disallowspectators;\r\n\tconstructor(options: RoomOptions) {\r\n\t\tsuper(options);\r\n\t\tif (this.backlog) {\r\n\t\t\t// these aren't set yet, but a lot of things could go wrong if we don't\r\n\t\t\tPS.rooms[''] = this;\r\n\t\t\tPS.mainmenu = this;\r\n\t\t\tfor (const args of this.backlog) {\r\n\t\t\t\tthis.receiveLine(args);\r\n\t\t\t}\r\n\t\t\tthis.backlog = null;\r\n\t\t}\r\n\t}\r\n\tadjustPrivacy() {\r\n\t\tPS.prefs.set('disallowspectators', this.disallowSpectators);\r\n\t\tif (this.disallowSpectators) return '/noreply /hidenext \\n';\r\n\t\treturn '';\r\n\t}\r\n\tstartSearch = (format: string, team?: Team) => {\r\n\t\tPS.requestNotifications();\r\n\t\tif (this.searchCountdown) {\r\n\t\t\tPS.alert(\"Wait for this countdown to finish first...\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.searchCountdown = {\r\n\t\t\tformat,\r\n\t\t\tpackedTeam: team?.packedTeam || '',\r\n\t\t\tcountdown: 3,\r\n\t\t\ttimer: setInterval(this.doSearchCountdown, 1000),\r\n\t\t};\r\n\t\tthis.update(null);\r\n\t};\r\n\tcancelSearch = () => {\r\n\t\tif (this.searchCountdown) {\r\n\t\t\tclearTimeout(this.searchCountdown.timer);\r\n\t\t\tthis.searchCountdown = null;\r\n\t\t\tthis.update(null);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (this.searchSent || this.search.searching?.length) {\r\n\t\t\tthis.searchSent = false;\r\n\t\t\tPS.send(`/cancelsearch`);\r\n\t\t\tthis.update(null);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\tdoSearchCountdown = () => {\r\n\t\tif (!this.searchCountdown) return; // ??? race???\r\n\r\n\t\tthis.searchCountdown.countdown--;\r\n\t\tif (this.searchCountdown.countdown <= 0) {\r\n\t\t\tthis.doSearch(this.searchCountdown);\r\n\t\t\tclearTimeout(this.searchCountdown.timer);\r\n\t\t\tthis.searchCountdown = null;\r\n\t\t}\r\n\t\tthis.update(null);\r\n\t};\r\n\tdoSearch = (search: NonNullable<typeof this.searchCountdown>) => {\r\n\t\tthis.searchSent = true;\r\n\t\tconst privacy = this.adjustPrivacy();\r\n\t\tPS.send(`/utm ${search.packedTeam}`);\r\n\t\tPS.send(`${privacy}/search ${search.format}`);\r\n\t};\r\n\toverride receiveLine(args: Args) {\r\n\t\tconst [cmd] = args;\r\n\t\tswitch (cmd) {\r\n\t\tcase 'challstr': {\r\n\t\t\tconst [, challstr] = args;\r\n\t\t\tPS.user.challstr = challstr;\r\n\t\t\tPSLoginServer.query(\r\n\t\t\t\t'upkeep', { challstr }\r\n\t\t\t).then(res => {\r\n\t\t\t\tif (!res?.username) {\r\n\t\t\t\t\tPS.user.initializing = false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// | , ; are not valid characters in names\r\n\t\t\t\tres.username = res.username.replace(/[|,;]+/g, '');\r\n\t\t\t\tif (res.loggedin) {\r\n\t\t\t\t\tPS.user.registered = { name: res.username, userid: toID(res.username) };\r\n\t\t\t\t}\r\n\t\t\t\tPS.user.handleAssertion(res.username, res.assertion);\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t} case 'updateuser': {\r\n\t\t\tconst [, fullName, namedCode, avatar] = args;\r\n\t\t\tconst named = namedCode === '1';\r\n\t\t\tif (named) PS.user.initializing = false;\r\n\t\t\tPS.user.setName(fullName, named, avatar);\r\n\t\t\tPS.teams.loadRemoteTeams();\r\n\t\t\treturn;\r\n\t\t} case 'updatechallenges': {\r\n\t\t\tconst [, challengesBuf] = args;\r\n\t\t\tthis.receiveChallenges(challengesBuf);\r\n\t\t\treturn;\r\n\t\t} case 'updatesearch': {\r\n\t\t\tconst [, searchBuf] = args;\r\n\t\t\tthis.receiveSearch(searchBuf);\r\n\t\t\treturn;\r\n\t\t} case 'queryresponse': {\r\n\t\t\tconst [, queryId, responseJSON] = args;\r\n\t\t\tthis.handleQueryResponse(queryId as ID, JSON.parse(responseJSON));\r\n\t\t\treturn;\r\n\t\t} case 'pm': {\r\n\t\t\tconst [, user1, user2, message] = args;\r\n\t\t\tthis.handlePM(user1, user2, message);\r\n\t\t\tlet sideRoom = PS.rightPanel as ChatRoom;\r\n\t\t\tif (sideRoom?.type === \"chat\" && PS.prefs.inchatpm) sideRoom?.log?.add(args);\r\n\t\t\treturn;\r\n\t\t} case 'formats': {\r\n\t\t\tthis.parseFormats(args);\r\n\t\t\treturn;\r\n\t\t} case 'popup': {\r\n\t\t\tconst [, message] = args;\r\n\t\t\tPS.alert(message.replace(/\\|\\|/g, '\\n'));\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t}\r\n\t\tconst lobby = PS.rooms['lobby'];\r\n\t\tif (lobby) lobby.receiveLine(args);\r\n\t}\r\n\treceiveChallenges(dataBuf: string) {\r\n\t\tlet json;\r\n\t\ttry {\r\n\t\t\tjson = JSON.parse(dataBuf);\r\n\t\t} catch {}\r\n\t\tfor (const userid in json.challengesFrom) {\r\n\t\t\tPS.getPMRoom(toID(userid));\r\n\t\t}\r\n\t\tif (json.challengeTo) {\r\n\t\t\tPS.getPMRoom(toID(json.challengeTo.to));\r\n\t\t}\r\n\t\tfor (const roomid in PS.rooms) {\r\n\t\t\tconst room = PS.rooms[roomid] as ChatRoom;\r\n\t\t\tif (!room.pmTarget) continue;\r\n\t\t\tconst targetUserid = toID(room.pmTarget);\r\n\t\t\tif (!room.challenged && !(targetUserid in json.challengesFrom) &&\r\n\t\t\t\t!room.challenging && json.challengeTo?.to !== targetUserid) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\troom.challenged = room.parseChallenge(json.challengesFrom[targetUserid]);\r\n\t\t\troom.challenging = json.challengeTo?.to === targetUserid ? room.parseChallenge(json.challengeTo.format) : null;\r\n\t\t\troom.update(null);\r\n\t\t}\r\n\t}\r\n\treceiveSearch(dataBuf: string) {\r\n\t\tlet json;\r\n\t\tthis.searchSent = false;\r\n\t\ttry {\r\n\t\t\tjson = JSON.parse(dataBuf);\r\n\t\t} catch {}\r\n\t\tthis.search = json;\r\n\t\tthis.update(null);\r\n\t}\r\n\tparseFormats(formatsList: string[]) {\r\n\t\tlet isSection = false;\r\n\t\tlet section = '';\r\n\r\n\t\tlet column = 0;\r\n\r\n\t\twindow.NonBattleGames = { rps: 'Rock Paper Scissors' };\r\n\t\tfor (let i = 3; i <= 9; i += 2) {\r\n\t\t\twindow.NonBattleGames[`bestof${i}`] = `Best-of-${i}`;\r\n\t\t}\r\n\t\twindow.BattleFormats = {};\r\n\t\tfor (let j = 1; j < formatsList.length; j++) {\r\n\t\t\tconst entry = formatsList[j];\r\n\t\t\tif (isSection) {\r\n\t\t\t\tsection = entry;\r\n\t\t\t\tisSection = false;\r\n\t\t\t} else if (entry === ',LL') {\r\n\t\t\t\tPS.teams.usesLocalLadder = true;\r\n\t\t\t} else if (entry === '' || (entry.startsWith(',') && !isNaN(Number(entry.slice(1))))) {\r\n\t\t\t\tisSection = true;\r\n\r\n\t\t\t\tif (entry) {\r\n\t\t\t\t\tcolumn = parseInt(entry.slice(1), 10) || 0;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tlet name = entry;\r\n\t\t\t\tlet searchShow = true;\r\n\t\t\t\tlet challengeShow = true;\r\n\t\t\t\tlet tournamentShow = true;\r\n\t\t\t\tlet team: 'preset' | null = null;\r\n\t\t\t\tlet teambuilderLevel: number | null = null;\r\n\t\t\t\tlet lastCommaIndex = name.lastIndexOf(',');\r\n\t\t\t\tlet code = lastCommaIndex >= 0 ? parseInt(name.substr(lastCommaIndex + 1), 16) : NaN;\r\n\t\t\t\tif (!isNaN(code)) {\r\n\t\t\t\t\tname = name.substr(0, lastCommaIndex);\r\n\t\t\t\t\tif (code & 1) team = 'preset';\r\n\t\t\t\t\tif (!(code & 2)) searchShow = false;\r\n\t\t\t\t\tif (!(code & 4)) challengeShow = false;\r\n\t\t\t\t\tif (!(code & 8)) tournamentShow = false;\r\n\t\t\t\t\tif (code & 16) teambuilderLevel = 50;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Backwards compatibility: late 0.9.0 -> 0.10.0\r\n\t\t\t\t\tif (name.substr(name.length - 2) === ',#') { // preset teams\r\n\t\t\t\t\t\tteam = 'preset';\r\n\t\t\t\t\t\tname = name.substr(0, name.length - 2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (name.substr(name.length - 2) === ',,') { // search-only\r\n\t\t\t\t\t\tchallengeShow = false;\r\n\t\t\t\t\t\tname = name.substr(0, name.length - 2);\r\n\t\t\t\t\t} else if (name.substr(name.length - 1) === ',') { // challenge-only\r\n\t\t\t\t\t\tsearchShow = false;\r\n\t\t\t\t\t\tname = name.substr(0, name.length - 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlet id = toID(name);\r\n\t\t\t\tlet isTeambuilderFormat = !team && !name.endsWith('Custom Game');\r\n\t\t\t\tlet teambuilderFormat = '' as ID;\r\n\t\t\t\tlet teambuilderFormatName = '';\r\n\t\t\t\tif (isTeambuilderFormat) {\r\n\t\t\t\t\tteambuilderFormatName = name;\r\n\t\t\t\t\tif (!id.startsWith('gen')) {\r\n\t\t\t\t\t\tteambuilderFormatName = '[Gen 6] ' + name;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet parenPos = teambuilderFormatName.indexOf('(');\r\n\t\t\t\t\tif (parenPos > 0 && name.endsWith(')')) {\r\n\t\t\t\t\t\t// variation of existing tier\r\n\t\t\t\t\t\tteambuilderFormatName = teambuilderFormatName.slice(0, parenPos).trim();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (teambuilderFormatName !== name) {\r\n\t\t\t\t\t\tteambuilderFormat = toID(teambuilderFormatName);\r\n\t\t\t\t\t\tif (BattleFormats[teambuilderFormat]) {\r\n\t\t\t\t\t\t\tBattleFormats[teambuilderFormat].isTeambuilderFormat = true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tBattleFormats[teambuilderFormat] = {\r\n\t\t\t\t\t\t\t\tid: teambuilderFormat,\r\n\t\t\t\t\t\t\t\tname: teambuilderFormatName,\r\n\t\t\t\t\t\t\t\tteam,\r\n\t\t\t\t\t\t\t\tsection,\r\n\t\t\t\t\t\t\t\tcolumn,\r\n\t\t\t\t\t\t\t\trated: false,\r\n\t\t\t\t\t\t\t\tisTeambuilderFormat: true,\r\n\t\t\t\t\t\t\t\teffectType: 'Format',\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tisTeambuilderFormat = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (BattleFormats[id]?.isTeambuilderFormat) {\r\n\t\t\t\t\tisTeambuilderFormat = true;\r\n\t\t\t\t}\r\n\t\t\t\t// make sure formats aren't out-of-order\r\n\t\t\t\tif (BattleFormats[id]) delete BattleFormats[id];\r\n\t\t\t\tBattleFormats[id] = {\r\n\t\t\t\t\tid,\r\n\t\t\t\t\tname,\r\n\t\t\t\t\tteam,\r\n\t\t\t\t\tsection,\r\n\t\t\t\t\tcolumn,\r\n\t\t\t\t\tsearchShow,\r\n\t\t\t\t\tchallengeShow,\r\n\t\t\t\t\ttournamentShow,\r\n\t\t\t\t\trated: searchShow && id.substr(4, 7) !== 'unrated',\r\n\t\t\t\t\tteambuilderLevel,\r\n\t\t\t\t\tteambuilderFormat,\r\n\t\t\t\t\tisTeambuilderFormat,\r\n\t\t\t\t\teffectType: 'Format',\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Match base formats to their variants, if they are unavailable in the server.\r\n\t\tlet multivariantFormats: { [id: string]: 1 } = {};\r\n\t\tfor (let id in BattleFormats) {\r\n\t\t\tlet teambuilderFormat = BattleFormats[BattleFormats[id].teambuilderFormat!];\r\n\t\t\tif (!teambuilderFormat || multivariantFormats[teambuilderFormat.id]) continue;\r\n\t\t\tif (!teambuilderFormat.searchShow && !teambuilderFormat.challengeShow && !teambuilderFormat.tournamentShow) {\r\n\t\t\t\t// The base format is not available.\r\n\t\t\t\tif (teambuilderFormat.battleFormat) {\r\n\t\t\t\t\tmultivariantFormats[teambuilderFormat.id] = 1;\r\n\t\t\t\t\tteambuilderFormat.battleFormat = '';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tteambuilderFormat.battleFormat = id;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tPS.teams.update('format');\r\n\t}\r\n\thandlePM(user1: string, user2: string, message?: string) {\r\n\t\tconst userid1 = toID(user1);\r\n\t\tconst userid2 = toID(user2);\r\n\t\tconst pmTarget = PS.user.userid === userid1 ? user2 : user1;\r\n\t\tconst pmTargetid = PS.user.userid === userid1 ? userid2 : userid1;\r\n\t\tlet roomid = `dm-${pmTargetid}` as RoomID;\r\n\t\tif (pmTargetid === PS.user.userid) roomid = 'dm-' as RoomID;\r\n\t\tlet room = PS.rooms[roomid] as ChatRoom | undefined;\r\n\t\tif (!room) {\r\n\t\t\tPS.addRoom({\r\n\t\t\t\tid: roomid,\r\n\t\t\t\targs: { pmTarget },\r\n\t\t\t}, true);\r\n\t\t\troom = PS.rooms[roomid] as ChatRoom;\r\n\t\t} else {\r\n\t\t\troom.updateTarget(pmTarget);\r\n\t\t}\r\n\t\tif (message) room.receiveLine([`c`, user1, message]);\r\n\t\tPS.update();\r\n\t}\r\n\thandleQueryResponse(id: ID, response: any) {\r\n\t\tswitch (id) {\r\n\t\tcase 'userdetails':\r\n\t\t\tlet userid = response.userid;\r\n\t\t\tlet userdetails = this.userdetailsCache[userid];\r\n\t\t\tif (!userdetails) {\r\n\t\t\t\tthis.userdetailsCache[userid] = response;\r\n\t\t\t} else {\r\n\t\t\t\tObject.assign(userdetails, response);\r\n\t\t\t}\r\n\t\t\tPS.rooms[`user-${userid}`]?.update(null);\r\n\t\t\tPS.rooms[`viewuser-${userid}`]?.update(null);\r\n\t\t\tPS.rooms[`users`]?.update(null);\r\n\t\t\tbreak;\r\n\t\tcase 'rooms':\r\n\t\t\tif (response.pspl) {\r\n\t\t\t\tfor (const roomInfo of response.pspl) roomInfo.spotlight = \"Spotlight\";\r\n\t\t\t\tresponse.chat = [...response.pspl, ...response.chat];\r\n\t\t\t\tresponse.pspl = null;\r\n\t\t\t}\r\n\t\t\tif (response.official) {\r\n\t\t\t\tfor (const roomInfo of response.official) roomInfo.section = \"Official\";\r\n\t\t\t\tresponse.chat = [...response.official, ...response.chat];\r\n\t\t\t\tresponse.official = null;\r\n\t\t\t}\r\n\t\t\tthis.roomsCache = response;\r\n\t\t\tconst roomsRoom = PS.rooms[`rooms`] as RoomsRoom;\r\n\t\t\tif (roomsRoom) roomsRoom.update(null);\r\n\t\t\tbreak;\r\n\t\tcase 'roomlist':\r\n\t\t\tconst battlesRoom = PS.rooms[`battles`] as BattlesRoom;\r\n\t\t\tif (battlesRoom) {\r\n\t\t\t\tconst battleTable = response.rooms;\r\n\t\t\t\tconst battles = [];\r\n\t\t\t\tfor (const battleid in battleTable) {\r\n\t\t\t\t\tbattleTable[battleid].id = battleid;\r\n\t\t\t\t\tbattles.push(battleTable[battleid]);\r\n\t\t\t\t}\r\n\t\t\t\tbattlesRoom.battles = battles;\r\n\t\t\t\tbattlesRoom.update(null);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase 'laddertop':\r\n\t\t\tfor (const [roomid, ladderRoom] of Object.entries(PS.rooms)) {\r\n\t\t\t\tif (roomid.startsWith('ladder-')) {\r\n\t\t\t\t\t(ladderRoom as LadderFormatRoom).update(response);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase 'teamupload':\r\n\t\t\tif (PS.teams.uploading) {\r\n\t\t\t\tconst team = PS.teams.uploading;\r\n\t\t\t\tteam.uploaded = {\r\n\t\t\t\t\tteamid: response.teamid,\r\n\t\t\t\t\tnotLoaded: false,\r\n\t\t\t\t\tprivate: response.private,\r\n\t\t\t\t};\r\n\t\t\t\tPS.rooms[`team-${team.key}`]?.update(null);\r\n\t\t\t\tPS.rooms.teambuilder?.update(null);\r\n\t\t\t\tPS.teams.uploading = null;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase 'teamupdate':\r\n\t\t\tfor (const team of PS.teams.list) {\r\n\t\t\t\tif (team.teamid === response.teamid) {\r\n\t\t\t\t\tteam.uploaded = {\r\n\t\t\t\t\t\tteamid: response.teamid,\r\n\t\t\t\t\t\tnotLoaded: false,\r\n\t\t\t\t\t\tprivate: response.private,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tPS.rooms[`team-${team.key}`]?.update(null);\r\n\t\t\t\t\tPS.rooms.teambuilder?.update(null);\r\n\t\t\t\t\tPS.teams.uploading = null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass NewsPanel extends PSRoomPanel {\r\n\tstatic readonly id = 'news';\r\n\tstatic readonly routes = ['news'];\r\n\tstatic readonly title = 'News';\r\n\tstatic readonly location = 'mini-window';\r\n\tchange = (ev: Event) => {\r\n\t\tconst target = ev.currentTarget as HTMLInputElement;\r\n\t\tif (target.value === '1') {\r\n\t\t\tdocument.cookie = \"preactalpha=1; expires=Thu, 1 Jun 2025 12:00:00 UTC; path=/\";\r\n\t\t} else {\r\n\t\t\tdocument.cookie = \"preactalpha=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\r\n\t\t}\r\n\t\tif (target.value === 'leave') {\r\n\t\t\tdocument.location.href = `/`;\r\n\t\t}\r\n\t};\r\n\toverride render() {\r\n\t\tconst cookieSet = document.cookie.includes('preactalpha=1');\r\n\t\treturn <PSPanelWrapper room={this.props.room} fullSize scrollable>\r\n\t\t\t<div class=\"construction\">\r\n\t\t\t\tThis is the client rewrite beta test.\r\n\t\t\t\t<form>\r\n\t\t\t\t\t<label class=\"checkbox\">\r\n\t\t\t\t\t\t<input type=\"radio\" name=\"preactalpha\" value=\"1\" onChange={this.change} checked={cookieSet} /> {}\r\n\t\t\t\t\t\tUse Rewrite always\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label class=\"checkbox\">\r\n\t\t\t\t\t\t<input type=\"radio\" name=\"preactalpha\" value=\"0\" onChange={this.change} checked={!cookieSet} /> {}\r\n\t\t\t\t\t\tUse Rewrite with URL\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label class=\"checkbox\">\r\n\t\t\t\t\t\t<input type=\"radio\" name=\"preactalpha\" value=\"leave\" onChange={this.change} /> {}\r\n\t\t\t\t\t\tBack to the old client\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</form>\r\n\t\t\t\tProvide feedback in <a href=\"development\" style=\"color:black\">the Dev chatroom</a>.\r\n\t\t\t</div>\r\n\t\t\t<div class=\"readable-bg\" dangerouslySetInnerHTML={{ __html: PS.newsHTML }}></div>\r\n\t\t</PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nclass MainMenuPanel extends PSRoomPanel<MainMenuRoom> {\r\n\tstatic readonly id = 'mainmenu';\r\n\tstatic readonly routes = [''];\r\n\tstatic readonly Model = MainMenuRoom;\r\n\tstatic readonly icon = <i class=\"fa fa-home\" aria-hidden></i>;\r\n\toverride focus() {\r\n\t\tthis.base?.querySelector<HTMLButtonElement>('.formatselect')?.focus();\r\n\t}\r\n\tsubmitSearch = (ev: Event, format: string, team?: Team) => {\r\n\t\tif (!PS.user.named) {\r\n\t\t\tPS.join('login' as RoomID, {\r\n\t\t\t\tparentElem: this.base!.querySelector<HTMLElement>('.big.button'),\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tPS.mainmenu.startSearch(format, team);\r\n\t};\r\n\thandleDragStart = (e: DragEvent) => {\r\n\t\tconst room = PS.getRoom(e.currentTarget);\r\n\t\tif (!room) return;\r\n\t\tconst foreground = (PS.leftPanel.id === room.id || PS.rightPanel?.id === room.id);\r\n\t\tPS.dragging = { type: 'room', roomid: room.id, foreground };\r\n\t};\r\n\thandleDragEnter = (e: DragEvent) => {\r\n\t\t// console.log('dragenter ' + e.dataTransfer!.dropEffect);\r\n\t\te.preventDefault();\r\n\t\tif (PS.dragging?.type !== 'room') return;\r\n\t\tconst draggingRoom = PS.dragging.roomid;\r\n\t\tif (draggingRoom === null) return;\r\n\r\n\t\tconst draggedOverRoom = PS.getRoom(e.target as HTMLElement);\r\n\t\tif (draggingRoom === draggedOverRoom?.id) return;\r\n\r\n\t\tconst index = PS.miniRoomList.indexOf(draggedOverRoom?.id as any);\r\n\t\tif (index >= 0) {\r\n\t\t\tPS.dragOnto(PS.rooms[draggingRoom]!, 'mini-window', index);\r\n\t\t} else if (PS.rooms[draggingRoom]?.location !== 'mini-window') {\r\n\t\t\tPS.dragOnto(PS.rooms[draggingRoom]!, 'mini-window', 0);\r\n\t\t}\r\n\r\n\t\t// dropEffect !== 'none' prevents bounce-back animation in\r\n\t\t// Chrome/Safari/Opera\r\n\t\t// if (e.dataTransfer) e.dataTransfer.dropEffect = 'move';\r\n\t};\r\n\trenderMiniRoom(room: PSRoom) {\r\n\t\tconst RoomType = PS.roomTypes[room.type];\r\n\t\tconst Panel = RoomType || PSRoomPanel;\r\n\t\treturn <Panel key={room.id} room={room} />;\r\n\t}\r\n\thandleClickMinimize = (e: MouseEvent) => {\r\n\t\tif ((e.target as Element)?.getAttribute('data-cmd')) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (((e.target as Element)?.parentNode as Element)?.getAttribute('data-cmd')) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst room = PS.getRoom(e.currentTarget);\r\n\t\tif (room) {\r\n\t\t\troom.minimized = !room.minimized;\r\n\t\t\tthis.forceUpdate();\r\n\t\t}\r\n\t};\r\n\trenderMiniRooms() {\r\n\t\treturn PS.miniRoomList.map(roomid => {\r\n\t\t\tconst room = PS.rooms[roomid]!;\r\n\t\t\tconst notifying = room.notifications.length ? ' notifying' : room.isSubtleNotifying ? ' subtle-notifying' : '';\r\n\t\t\treturn <div\r\n\t\t\t\tclass={`mini-window${room.minimized ? ' collapsed' : ''}${room === PS.room ? ' focused' : ''}`}\r\n\t\t\t\tkey={roomid} data-roomid={roomid}\r\n\t\t\t>\r\n\t\t\t\t<h3\r\n\t\t\t\t\tclass={`mini-window-header${notifying}`} draggable onDragStart={this.handleDragStart} onClick={this.handleClickMinimize}\r\n\t\t\t\t>\r\n\t\t\t\t\t<button class=\"closebutton\" data-cmd=\"/close\" aria-label=\"Close\" tabIndex={-1}>\r\n\t\t\t\t\t\t<i class=\"fa fa-times-circle\" aria-hidden></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button class=\"maximizebutton\" data-cmd=\"/maximize\" tabIndex={-1} aria-label=\"Maximize\">\r\n\t\t\t\t\t\t<i class=\"fa fa-stop-circle\" aria-hidden></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button class=\"minimizebutton\" tabIndex={-1} aria-label=\"Expand/Collapse\">\r\n\t\t\t\t\t\t<i class=\"fa fa-minus-circle\" aria-hidden></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t{room.title}\r\n\t\t\t\t</h3>\r\n\t\t\t\t{this.renderMiniRoom(room)}\r\n\t\t\t</div>;\r\n\t\t});\r\n\t}\r\n\trenderGames() {\r\n\t\tif (!PS.mainmenu.search.games) return null;\r\n\r\n\t\t// This does not use the word \"game\" because it includes things like help tickets\r\n\t\treturn <div class=\"menugroup\">\r\n\t\t\t<p class=\"label\">You are in:</p>\r\n\t\t\t{Object.entries(PS.mainmenu.search.games).map(([roomid, gameName]) => <div>\r\n\t\t\t\t<a class=\"blocklink\" href={`${roomid}`}>{gameName}</a>\r\n\t\t\t</div>)}\r\n\t\t</div>;\r\n\t}\r\n\trenderSearchButton() {\r\n\t\tif (PS.down) {\r\n\t\t\treturn <div class=\"menugroup\" style=\"background: rgba(10,10,10,.6)\">\r\n\t\t\t\t{PS.down === 'ddos' ? (\r\n\t\t\t\t\t<p class=\"error\"><strong>Pok&eacute;mon Showdown is offline due to a DDoS attack!</strong></p>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<p class=\"error\"><strong>Pok&eacute;mon Showdown is offline due to technical difficulties!</strong></p>\r\n\t\t\t\t)}\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<div style={{ textAlign: 'center' }}>\r\n\t\t\t\t\t\t<img width=\"96\" height=\"96\" src={`//${Config.routes.client}/sprites/gen5/teddiursa.png`} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\tBear with us as we freak out.\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>(We'll be back up in a few hours.)</p>\r\n\t\t\t</div>;\r\n\t\t}\r\n\r\n\t\tif (!PS.user.userid || PS.isOffline) {\r\n\t\t\treturn <TeamForm class=\"menugroup\" onSubmit={this.submitSearch} selectType=\"search\">\r\n\t\t\t\t<button class=\"mainmenu1 mainmenu big button disabled\" disabled name=\"search\">\r\n\t\t\t\t\t<em>{PS.isOffline ? [<span class=\"fa-stack fa-lg\">\r\n\t\t\t\t\t\t<i class=\"fa fa-plug fa-flip-horizontal fa-stack-1x\" aria-hidden></i>\r\n\t\t\t\t\t\t<i class=\"fa fa-ban fa-stack-2x text-danger\" aria-hidden></i>\r\n\t\t\t\t\t</span>, \" Disconnected\"] : \"Connecting...\"}</em>\r\n\t\t\t\t</button>\r\n\t\t\t\t{PS.isOffline && <p class=\"buttonbar\">\r\n\t\t\t\t\t<button class=\"button\" data-cmd=\"/reconnect\">\r\n\t\t\t\t\t\t<i class=\"fa fa-plug\" aria-hidden></i> <strong>Reconnect</strong>\r\n\t\t\t\t\t</button> {}\r\n\t\t\t\t\t{PS.connection?.reconnectTimer && <small>(Autoreconnect in {Math.round(PS.connection.reconnectDelay / 1000)}s)</small>}\r\n\t\t\t\t</p>}\r\n\t\t\t</TeamForm>;\r\n\t\t}\r\n\r\n\t\treturn <TeamForm\r\n\t\t\tclass=\"menugroup\" format={PS.mainmenu.searchCountdown?.format} selectType=\"search\" onSubmit={this.submitSearch}\r\n\t\t>\r\n\t\t\t<p>\r\n\t\t\t\t<button class=\"button small\" data-href=\"battleoptions\" title=\"Options\" aria-label=\"Options\">\r\n\t\t\t\t\tBattle options <i class=\"fa fa-caret-down\"></i>\r\n\t\t\t\t</button></p>\r\n\t\t\t{PS.mainmenu.searchCountdown ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<button class=\"mainmenu1 mainmenu big button disabled\" type=\"submit\"><strong>\r\n\t\t\t\t\t\t<i class=\"fa fa-refresh fa-spin\" aria-hidden></i> Searching in {PS.mainmenu.searchCountdown.countdown}...\r\n\t\t\t\t\t</strong></button>\r\n\t\t\t\t\t<p class=\"buttonbar\"><button class=\"button\" data-cmd=\"/cancelsearch\">Cancel</button></p>\r\n\t\t\t\t</>\r\n\t\t\t) : (PS.mainmenu.searchSent || PS.mainmenu.search.searching.length) ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<button class=\"mainmenu1 mainmenu big button disabled\" type=\"submit\">\r\n\t\t\t\t\t\t<strong><i class=\"fa fa-refresh fa-spin\" aria-hidden></i> Searching...</strong>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<p class=\"buttonbar\"><button class=\"button\" data-cmd=\"/cancelsearch\">Cancel</button></p>\r\n\t\t\t\t</>\r\n\t\t\t) : (\r\n\t\t\t\t<button class=\"mainmenu1 mainmenu big button\" type=\"submit\">\r\n\t\t\t\t\t<strong>Battle!</strong><br />\r\n\t\t\t\t\t<small>Find a random opponent</small>\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\t\t</TeamForm>;\r\n\t}\r\n\toverride render() {\r\n\t\tconst onlineButton = ' button' + (PS.isOffline ? ' disabled' : '');\r\n\t\tconst tinyLayout = this.props.room.width < 620 ? ' tiny-layout' : '';\r\n\t\treturn <PSPanelWrapper room={this.props.room} scrollable onDragEnter={this.handleDragEnter}>\r\n\t\t\t<div class={`mainmenu-mini-windows${tinyLayout}`}>\r\n\t\t\t\t{this.renderMiniRooms()}\r\n\t\t\t</div>\r\n\t\t\t<div class={`mainmenu${tinyLayout}`}>\r\n\t\t\t\t<div class=\"mainmenu-left\">\r\n\t\t\t\t\t{this.renderGames()}\r\n\r\n\t\t\t\t\t{this.renderSearchButton()}\r\n\r\n\t\t\t\t\t<div class=\"menugroup\">\r\n\t\t\t\t\t\t<p><a class=\"mainmenu2 mainmenu button\" href=\"teambuilder\">Teambuilder</a></p>\r\n\t\t\t\t\t\t<p><a class={\"mainmenu3 mainmenu\" + onlineButton} href=\"ladder\">Ladder</a></p>\r\n\t\t\t\t\t\t<p><a class={\"mainmenu4 mainmenu\" + onlineButton} href=\"view-tournaments-all\">Tournaments</a></p>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"menugroup\">\r\n\t\t\t\t\t\t<p><a class={\"mainmenu4 mainmenu\" + onlineButton} href=\"battles\">Watch a battle</a></p>\r\n\t\t\t\t\t\t<p><a class={\"mainmenu5 mainmenu\" + onlineButton} href=\"users\">Find a user</a></p>\r\n\t\t\t\t\t\t<p><a class={\"mainmenu6 mainmenu\" + onlineButton} href=\"view-friends-all\">Friends</a></p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"mainmenu-right\" style={{ display: PS.leftPanelWidth ? 'none' : 'block' }}>\r\n\t\t\t\t\t<div class=\"menugroup\">\r\n\t\t\t\t\t\t<p><a class={\"mainmenu1 mainmenu\" + onlineButton} href=\"rooms\">Chat rooms</a></p>\r\n\t\t\t\t\t\t{PS.server.id !== 'showdown' && (\r\n\t\t\t\t\t\t\t<p><a class={\"mainmenu2 mainmenu\" + onlineButton} href=\"lobby\">Lobby chat</a></p>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"mainmenu-footer\">\r\n\t\t\t\t\t<div class=\"bgcredit\"></div>\r\n\t\t\t\t\t<small>\r\n\t\t\t\t\t\t<a href={`//${Config.routes.dex}/`} target=\"_blank\">Pok&eacute;dex</a> | {}\r\n\t\t\t\t\t\t<a href={`//${Config.routes.replays}/`} target=\"_blank\">Replays</a> | {}\r\n\t\t\t\t\t\t<a href={`//${Config.routes.root}/rules`} target=\"_blank\">Rules</a> | {}\r\n\t\t\t\t\t\t<a href={`//${Config.routes.root}/credits`} target=\"_blank\">Credits</a> | {}\r\n\t\t\t\t\t\t<a href=\"//smogon.com/forums/\" target=\"_blank\">Forum</a>\r\n\t\t\t\t\t</small>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nexport class FormatDropdown extends preact.Component<{\r\n\tselectType?: SelectType, format?: string, defaultFormat?: string, placeholder?: string,\r\n\tonChange?: JSX.EventHandler<Event>,\r\n}> {\r\n\tdeclare base?: HTMLButtonElement;\r\n\tformat = '';\r\n\tchange = (e: Event) => {\r\n\t\tif (!this.base) return;\r\n\t\tthis.format = this.base.value;\r\n\t\tthis.forceUpdate();\r\n\t\tif (this.props.onChange) this.props.onChange(e);\r\n\t};\r\n\toverride componentWillMount() {\r\n\t\tif (this.props.format !== undefined) {\r\n\t\t\tthis.format = this.props.format;\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tthis.format ||= this.props.format || this.props.defaultFormat || '';\r\n\t\tlet [formatName, customRules] = this.format.split('@@@');\r\n\t\tif (window.BattleLog) formatName = BattleLog.formatName(formatName);\r\n\t\tif (this.props.format || PS.mainmenu.searchSent) {\r\n\t\t\treturn <button\r\n\t\t\t\tname=\"format\" value={this.format} class=\"select formatselect preselected\" disabled\r\n\t\t\t>\r\n\t\t\t\t{formatName}\r\n\t\t\t\t{!!customRules && [<br />, <small>Custom rules: {customRules}</small>]}\r\n\t\t\t</button>;\r\n\t\t}\r\n\t\treturn <button\r\n\t\t\tname=\"format\" value={this.format} data-selecttype={this.props.selectType}\r\n\t\t\tclass=\"select formatselect\" data-href=\"/formatdropdown\" onChange={this.change}\r\n\t\t>\r\n\t\t\t{formatName || (!!this.props.placeholder && <em>{this.props.placeholder}</em>) || null}\r\n\t\t\t{!!customRules && [<br />, <small>Custom rules: {customRules}</small>]}\r\n\t\t</button>;\r\n\t}\r\n}\r\n\r\nclass TeamDropdown extends preact.Component<{ format: string }> {\r\n\tteamFormat = '';\r\n\tteamKey = '';\r\n\tchange = () => {\r\n\t\tif (!this.base) return;\r\n\t\tthis.teamKey = (this.base as HTMLButtonElement).value;\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\tgetDefaultTeam(teambuilderFormat: string) {\r\n\t\tfor (const team of PS.teams.list) {\r\n\t\t\tif (team.format === teambuilderFormat) return team.key;\r\n\t\t}\r\n\t\treturn '';\r\n\t}\r\n\trender() {\r\n\t\tconst teamFormat = PS.teams.teambuilderFormat(this.props.format);\r\n\t\tconst formatData = window.BattleFormats?.[teamFormat];\r\n\t\tif (formatData?.team) {\r\n\t\t\treturn <button class=\"select teamselect preselected\" name=\"team\" value=\"random\" disabled>\r\n\t\t\t\t<div class=\"team\">\r\n\t\t\t\t\t<strong>Random team</strong>\r\n\t\t\t\t\t<small>\r\n\t\t\t\t\t\t<PSIcon pokemon={null} />\r\n\t\t\t\t\t\t<PSIcon pokemon={null} />\r\n\t\t\t\t\t\t<PSIcon pokemon={null} />\r\n\t\t\t\t\t\t<PSIcon pokemon={null} />\r\n\t\t\t\t\t\t<PSIcon pokemon={null} />\r\n\t\t\t\t\t\t<PSIcon pokemon={null} />\r\n\t\t\t\t\t</small>\r\n\t\t\t\t</div>\r\n\t\t\t</button>;\r\n\t\t}\r\n\t\tif (teamFormat !== this.teamFormat) {\r\n\t\t\tthis.teamFormat = teamFormat;\r\n\t\t\tthis.teamKey = this.getDefaultTeam(teamFormat);\r\n\t\t}\r\n\t\tconst team = PS.teams.byKey[this.teamKey] || null;\r\n\t\treturn <button\r\n\t\t\tname=\"team\" value={this.teamKey}\r\n\t\t\tclass=\"select teamselect\" data-href=\"/teamdropdown\" data-format={teamFormat} onChange={this.change}\r\n\t\t>\r\n\t\t\t{PS.roomTypes['teamdropdown'] && <TeamBox team={team} noLink />}\r\n\t\t</button>;\r\n\t}\r\n}\r\n\r\nexport class TeamForm extends preact.Component<{\r\n\tchildren: preact.ComponentChildren,\r\n\tclass?: string, format?: string, teamFormat?: string, hideFormat?: boolean, selectType?: SelectType,\r\n\tonSubmit: ((e: Event, format: string, team?: Team) => void) | null,\r\n\tonValidate?: ((e: Event, format: string, team?: Team) => void) | null,\r\n}> {\r\n\tformat = '';\r\n\tchangeFormat = (ev: Event) => {\r\n\t\tthis.format = (ev.target as HTMLButtonElement).value;\r\n\t};\r\n\tsubmit = (ev: Event, validate?: 'validate') => {\r\n\t\tev.preventDefault();\r\n\t\tconst format = this.format;\r\n\t\tconst teamKey = this.base!.querySelector<HTMLButtonElement>('button[name=team]')!.value;\r\n\t\tconst team = teamKey ? PS.teams.byKey[teamKey] : undefined;\r\n\t\tPS.teams.loadTeam(team).then(() => {\r\n\t\t\t(validate === 'validate' ? this.props.onValidate : this.props.onSubmit)?.(ev, format, team);\r\n\t\t});\r\n\t};\r\n\thandleClick = (ev: Event) => {\r\n\t\tlet target = ev.target as HTMLButtonElement | null;\r\n\t\twhile (target && target !== this.base) {\r\n\t\t\tif (target.tagName === 'BUTTON' && target.name === 'validate') {\r\n\t\t\t\tthis.submit(ev, 'validate');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttarget = target.parentNode as HTMLButtonElement | null;\r\n\t\t}\r\n\t};\r\n\trender() {\r\n\t\tif (window.BattleFormats) {\r\n\t\t\tconst starredPrefs = PS.prefs.starredformats || {};\r\n\t\t\t// .reverse() because the newest starred format should be the default one\r\n\t\t\tconst starred = Object.keys(starredPrefs).filter(id => starredPrefs[id] === true).reverse();\r\n\t\t\tif (!this.format) {\r\n\t\t\t\tthis.format = `gen${Dex.gen}randombattle`;\r\n\t\t\t\tfor (let id of starred) {\r\n\t\t\t\t\tlet format = window.BattleFormats[id];\r\n\t\t\t\t\tif (!format) continue;\r\n\t\t\t\t\tif (this.props.selectType === 'challenge' && format?.challengeShow === false) continue;\r\n\t\t\t\t\tif (this.props.selectType === 'search' && format?.searchShow === false) continue;\r\n\t\t\t\t\tif (this.props.selectType === 'teambuilder' && format?.team) continue;\r\n\t\t\t\t\tthis.format = id;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn <form class={this.props.class} onSubmit={this.submit} onClick={this.handleClick}>\r\n\t\t\t{!this.props.hideFormat && <p>\r\n\t\t\t\t<label class=\"label\">\r\n\t\t\t\t\tFormat:<br />\r\n\t\t\t\t\t<FormatDropdown\r\n\t\t\t\t\t\tselectType={this.props.selectType} format={this.props.format} defaultFormat={this.format}\r\n\t\t\t\t\t\tonChange={this.changeFormat}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</label>\r\n\t\t\t</p>}\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"label\">\r\n\t\t\t\t\tTeam:<br />\r\n\t\t\t\t\t<TeamDropdown format={this.props.teamFormat || this.format} />\r\n\t\t\t\t</label>\r\n\t\t\t</p>\r\n\t\t\t<p>{this.props.children}</p>\r\n\t\t</form>;\r\n\t}\r\n}\r\n\r\nPS.addRoomType(NewsPanel, MainMenuPanel);\r\n"],
  "mappings": "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",
  "names": ["preact"]
}
