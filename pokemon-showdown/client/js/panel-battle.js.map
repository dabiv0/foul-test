{"version":3,"file":"panel-battle.js","names":["BattlesRoom","_PSRoom","options","_this","call","classType","format","battles","refresh","PS","prefs","bwgfx","Dex","loadSpriteData","_inheritsLoose","_proto","prototype","setFormat","update","send","toID","PSRoom","BattlesPanel","_PSRoomPanel","_this2","_len","arguments","length","args","Array","_key","apply","concat","props","room","changeFormat","e","value","target","_proto2","renderBattleLink","battle","id","split","minEloMessage","minElo","preact","h","key","href","style","p1","p2","render","_this3","PSPanelWrapper","scrollable","name","onClick","getPokemonIcon","title","FormatDropdown","onChange","placeholder","map","PSRoomPanel","routes","Model","location","icon","BattleRoom","_ChatRoom","_this4","_len2","_key2","side","request","choices","autoTimerActivated","_proto3","loadReplay","_this5","replayid","slice","Net","get","then","data","replay","JSON","parse","players","join","stepQueue","log","atQueueEnd","pause","seekTurn","connected","_unused","receiveLine","ChatRoom","BattleDiv","_preact$Component","_proto4","shouldComponentUpdate","componentDidMount","base","replaceChild","scene","$frame","firstChild","Component","TimerButton","_preact$Component2","_this6","_len3","_key3","timerInterval","_proto5","componentWillUnmount","clearInterval","secondsToTime","seconds","minutes","Math","floor","_this7","time","kickingInactive","setInterval","graceTimeLeft","totalTimeLeft","forceUpdate","timerTicking","requestType","isDone","secondsLeft","totalTime","position","right","role","BattlePanel","_PSRoomPanel2","_this8","_len4","_key4","team","text","elem","focusIfNoSelection","_window$getSelection","window","getSelection","type","focus","onKey","keyCode","chatLog","getElementsByClassName","scrollTop","offsetHeight","toggleBoostedMove","checkbox","currentTarget","current","mega","checked","megax","megay","ultra","z","max","tera","battleHeight","handleDownloadReplay","filename","tier","replace","date","Date","getFullYear","getMonth","getDate","BattleLog","createReplayFileHref","download","stopPropagation","_proto6","_room$backlog","_this9","$elem","$","Battle","find","$logFrame","backlog","getHighlight","handleHighlight","tooltips","listen","Infinity","subscribe","updateLayout","width","offsetWidth","_room$battle","scale","css","round","_room$battle2","receiveRequest","instantAdd","startsWith","BattleChoiceBuilder","add","noanim","autotimer","fixRequest","myPokemon","pokemon","setViewpoint","notifyRequest","_room$request","oName","farSide","notify","body","renderControls","ended","renderAfterBattleControls","renderPlayerControls","atStart","started","atEnd","paused","renderMoveButton","disabled","pp","moveData","maxpp","cmd","tooltip","renderPokemonButton","hpColorClass","BattleScene","getHPColor","PSIcon","noHPBar","fainted","hp","maxhp","status","renderMoveMenu","moveRequest","currentMoveRequest","canDynamax","alreadyMax","canMegaEvo","alreadyMega","canMegaEvoX","canMegaEvoY","canZMove","zMoves","alreadyZ","canUltraBurst","canTerastallize","maybeDisabled","maybeLocked","renderMoveControls","gigantamax","dangerouslySetInnerHTML","__html","getTypeIcon","active","_this10","dex","pokemonIndex","index","activeIndex","mySide","n","pokemonControlled","serverPokemon","valueTracker","ModifiableValue","nearSide","maxMoves","gmax","moves","i","move","moveType","getMoveType","maxMoveData","getMaxMoveFromType","gmaxTooltip","zMoveData","specialMove","exists","special","moveSpecial","renderMoveTargetControls","_choices$currentMove","_this11","moveTarget","currentMove","gameType","moveChoice","stringChoice","userSlot","userSlotCross","_pokemon","abs","reverse","_pokemon2","renderSwitchMenu","ignoreTrapping","_choices$currentMoveR","_choices$currentMoveR2","_this12","numActive","requestLength","maybeTrapped","trapped","cantSwitch","alreadySwitchingIn","includes","renderTeamPreviewChooser","_this13","renderTeamList","_this14","renderChosenTeam","_this15","slot","renderOldChoices","isEmpty","buf","noCancel","choiceString","push","choice","parseChoice","err","message","choiceType","_choices$currentMove2","targetLoc","targetPokemon","renderPlayerWaitingControls","_choices$currentMove3","moveName","canShift","isNotTiny","Config","replays","_room$battle3","hardcoreStyle","hardcoreMode","focusClick","ChatLog","top","noSubscription","ChatTextEntry","onMessage","left","ChatUserList","minimized","user","userid","addRoomType"],"sources":["../src/panel-battle.tsx"],"sourcesContent":["/**\r\n * Battle panel\r\n *\r\n * @author Guangcong Luo <guangcongluo@gmail.com>\r\n * @license AGPLv3\r\n */\r\n\r\nimport preact from \"../js/lib/preact\";\r\nimport { PS, PSRoom, type RoomOptions, type RoomID, Config } from \"./client-main\";\r\nimport { PSIcon, PSPanelWrapper, PSRoomPanel } from \"./panels\";\r\nimport { ChatLog, ChatRoom, ChatTextEntry, ChatUserList } from \"./panel-chat\";\r\nimport { FormatDropdown } from \"./panel-mainmenu\";\r\nimport { Battle, type Pokemon, type ServerPokemon } from \"./battle\";\r\nimport { BattleScene } from \"./battle-animations\";\r\nimport { Dex, toID, type ID } from \"./battle-dex\";\r\nimport {\r\n\tBattleChoiceBuilder, type BattleRequestActivePokemon, type BattleRequestSideInfo,\r\n\ttype BattleRequest, type BattleMoveRequest, type BattleSwitchRequest, type BattleTeamRequest,\r\n} from \"./battle-choices\";\r\nimport type { Args } from \"./battle-text-parser\";\r\nimport { ModifiableValue } from \"./battle-tooltips\";\r\nimport { Net } from \"./client-connection\";\r\n\r\ntype BattleDesc = {\r\n\tid: RoomID,\r\n\tminElo?: number | string,\r\n\tp1?: string,\r\n\tp2?: string,\r\n\tp3?: string,\r\n\tp4?: string,\r\n};\r\n\r\nexport class BattlesRoom extends PSRoom {\r\n\toverride readonly classType = 'battles';\r\n\t/** null means still loading */\r\n\tformat = '';\r\n\tbattles: BattleDesc[] | null = null;\r\n\tconstructor(options: RoomOptions) {\r\n\t\tsuper(options);\r\n\t\tthis.refresh();\r\n\t\t// If graphics preference is set to use BW sprites\r\n\t\tif (PS.prefs.bwgfx) {\r\n\t\t\tDex.loadSpriteData('bw');\r\n\t\t}\r\n\t}\r\n\tsetFormat(format: string) {\r\n\t\tif (format === this.format) return this.refresh();\r\n\t\tthis.battles = null;\r\n\t\tthis.format = format;\r\n\t\tthis.update(null);\r\n\t\tthis.refresh();\r\n\t}\r\n\trefresh() {\r\n\t\tPS.send(`/cmd roomlist ${toID(this.format)}`);\r\n\t}\r\n}\r\n\r\nclass BattlesPanel extends PSRoomPanel<BattlesRoom> {\r\n\tstatic readonly id = 'battles';\r\n\tstatic readonly routes = ['battles'];\r\n\tstatic readonly Model = BattlesRoom;\r\n\tstatic readonly location = 'right';\r\n\tstatic readonly icon = <i class=\"fa fa-caret-square-o-right\" aria-hidden></i>;\r\n\tstatic readonly title = 'Battles';\r\n\trefresh = () => {\r\n\t\tthis.props.room.refresh();\r\n\t};\r\n\tchangeFormat = (e: Event) => {\r\n\t\tconst value = (e.target as HTMLButtonElement).value;\r\n\t\tthis.props.room.setFormat(value);\r\n\t};\r\n\trenderBattleLink(battle: BattleDesc) {\r\n\t\tconst format = battle.id.split('-')[1];\r\n\t\tconst minEloMessage = typeof battle.minElo === 'number' ? `rated ${battle.minElo}` : battle.minElo;\r\n\t\treturn <div key={battle.id}><a href={`/${battle.id}`} class=\"blocklink\">\r\n\t\t\t{minEloMessage && <small style=\"float:right\">({minEloMessage})</small>}\r\n\t\t\t<small>[{format}]</small><br />\r\n\t\t\t<em class=\"p1\">{battle.p1}</em> <small class=\"vs\">vs.</small> <em class=\"p2\">{battle.p2}</em>\r\n\t\t</a></div>;\r\n\t}\r\n\toverride render() {\r\n\t\tconst room = this.props.room;\r\n\t\treturn <PSPanelWrapper room={room} scrollable><div class=\"pad\">\r\n\t\t\t<button class=\"button\" style=\"float:right;font-size:10pt;margin-top:3px\" name=\"closeRoom\">\r\n\t\t\t\t<i class=\"fa fa-times\" aria-hidden></i> Close\r\n\t\t\t</button>\r\n\t\t\t<div class=\"roomlist\">\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<button class=\"button\" name=\"refresh\" onClick={this.refresh}>\r\n\t\t\t\t\t\t<i class=\"fa fa-refresh\" aria-hidden></i> Refresh\r\n\t\t\t\t\t</button> {}\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle={Dex.getPokemonIcon('meloetta-pirouette') + ';display:inline-block;vertical-align:middle'} class=\"picon\"\r\n\t\t\t\t\t\ttitle=\"Meloetta is PS's mascot! The Pirouette forme is Fighting-type, and represents our battles.\"\r\n\t\t\t\t\t></span>\r\n\t\t\t\t</p>\r\n\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<label class=\"label\">Format:</label><FormatDropdown onChange={this.changeFormat} placeholder=\"(All formats)\" />\r\n\t\t\t\t</p>\r\n\t\t\t\t{/* <label>\r\n\t\t\t\t\tMinimum Elo: <select name=\"elofilter\">\r\n\t\t\t\t\t\t<option value=\"none\">None</option><option value=\"1100\">1100</option><option value=\"1300\">1300</option>\r\n\t\t\t\t\t\t<option value=\"1500\">1500</option><option value=\"1700\">1700</option><option value=\"1900\">1900</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<form class=\"search\">\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<input type=\"text\" name=\"prefixsearch\" class=\"textbox\" placeholder=\"Username prefix\"/>\r\n\t\t\t\t\t\t<button type=\"submit\" class=\"button\">Search</button>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</form> */}\r\n\t\t\t\t<div class=\"list\">{!room.battles ? (\r\n\t\t\t\t\t<p>Loading...</p>\r\n\t\t\t\t) : !room.battles.length ? (\r\n\t\t\t\t\t<p>No battles are going on</p>\r\n\t\t\t\t) : (\r\n\t\t\t\t\troom.battles.map(battle => this.renderBattleLink(battle))\r\n\t\t\t\t)}</div>\r\n\t\t\t</div>\r\n\t\t</div></PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nexport class BattleRoom extends ChatRoom {\r\n\toverride readonly classType = 'battle';\r\n\tdeclare pmTarget: null;\r\n\tdeclare challengeMenuOpen: false;\r\n\tdeclare challengingFormat: null;\r\n\tdeclare challengedFormat: null;\r\n\r\n\toverride battle: Battle = null!;\r\n\t/** null if spectator, otherwise current player's info */\r\n\tside: BattleRequestSideInfo | null = null;\r\n\trequest: BattleRequest | null = null;\r\n\tchoices: BattleChoiceBuilder | null = null;\r\n\tautoTimerActivated: boolean | null = null;\r\n\r\n\tloadReplay() {\r\n\t\tconst replayid = this.id.slice(7);\r\n\t\tNet(`https://replay.pokemonshowdown.com/${replayid}.json`).get().catch().then(data => {\r\n\t\t\ttry {\r\n\t\t\t\tconst replay = JSON.parse(data);\r\n\t\t\t\tthis.title = `[${replay.format}] ${replay.players.join(' vs. ')}`;\r\n\t\t\t\tthis.battle.stepQueue = replay.log.split('\\n');\r\n\t\t\t\tthis.battle.atQueueEnd = false;\r\n\t\t\t\tthis.battle.pause();\r\n\t\t\t\tthis.battle.seekTurn(0);\r\n\t\t\t\tthis.connected = 'client-only';\r\n\t\t\t\tthis.update(null);\r\n\t\t\t} catch {\r\n\t\t\t\tthis.receiveLine(['error', 'Battle not found']);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nclass BattleDiv extends preact.Component<{ room: BattleRoom }> {\r\n\toverride shouldComponentUpdate() {\r\n\t\treturn false;\r\n\t}\r\n\toverride componentDidMount() {\r\n\t\tconst room = this.props.room;\r\n\t\tif (room.battle) {\r\n\t\t\tthis.base!.replaceChild(room.battle.scene.$frame![0], this.base!.firstChild!);\r\n\t\t}\r\n\t}\r\n\toverride render() {\r\n\t\treturn <div><div class=\"battle\"></div></div>;\r\n\t}\r\n}\r\n\r\nclass TimerButton extends preact.Component<{ room: BattleRoom }> {\r\n\ttimerInterval: number | null = null;\r\n\toverride componentWillUnmount() {\r\n\t\tif (this.timerInterval) {\r\n\t\t\tclearInterval(this.timerInterval);\r\n\t\t\tthis.timerInterval = null;\r\n\t\t}\r\n\t}\r\n\tsecondsToTime(seconds: number | true) {\r\n\t\tif (seconds === true) return '-:--';\r\n\t\tconst minutes = Math.floor(seconds / 60);\r\n\t\tseconds -= minutes * 60;\r\n\t\treturn `${minutes}:${(seconds < 10 ? '0' : '')}${seconds}`;\r\n\t}\r\n\trender() {\r\n\t\tlet time = 'Timer';\r\n\t\tconst room = this.props.room;\r\n\t\tif (!this.timerInterval && room.battle.kickingInactive) {\r\n\t\t\tthis.timerInterval = setInterval(() => {\r\n\t\t\t\tif (typeof room.battle.kickingInactive === 'number' && room.battle.kickingInactive > 1) {\r\n\t\t\t\t\troom.battle.kickingInactive--;\r\n\t\t\t\t\tif (room.battle.graceTimeLeft) room.battle.graceTimeLeft--;\r\n\t\t\t\t\telse if (room.battle.totalTimeLeft) room.battle.totalTimeLeft--;\r\n\t\t\t\t}\r\n\t\t\t\tthis.forceUpdate();\r\n\t\t\t}, 1000);\r\n\t\t} else if (this.timerInterval && !room.battle.kickingInactive) {\r\n\t\t\tclearInterval(this.timerInterval);\r\n\t\t\tthis.timerInterval = null;\r\n\t\t}\r\n\r\n\t\tlet timerTicking = (room.battle.kickingInactive &&\r\n\t\t\troom.request && room.request.requestType !== \"wait\" && (room.choices && !room.choices.isDone())) ?\r\n\t\t\t' timerbutton-on' : '';\r\n\r\n\t\tif (room.battle.kickingInactive) {\r\n\t\t\tconst secondsLeft = room.battle.kickingInactive;\r\n\t\t\ttime = this.secondsToTime(secondsLeft);\r\n\t\t\tif (secondsLeft !== true) {\r\n\t\t\t\tif (secondsLeft <= 10 && timerTicking) {\r\n\t\t\t\t\ttimerTicking = ' timerbutton-critical';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (room.battle.totalTimeLeft) {\r\n\t\t\t\t\tconst totalTime = this.secondsToTime(room.battle.totalTimeLeft);\r\n\t\t\t\t\ttime += ` |  ${totalTime} total`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn <button\r\n\t\t\tstyle={{ position: \"absolute\", right: '10px' }} data-href=\"battletimer\" class={`button${timerTicking}`} role=\"timer\"\r\n\t\t>\r\n\t\t\t<i class=\"fa fa-hourglass-start\" aria-hidden></i> {time}\r\n\t\t</button>;\r\n\t}\r\n};\r\n\r\nclass BattlePanel extends PSRoomPanel<BattleRoom> {\r\n\tstatic readonly id = 'battle';\r\n\tstatic readonly routes = ['battle-*'];\r\n\tstatic readonly Model = BattleRoom;\r\n\t/** last displayed team. will not show the most recent request until the last one is gone. */\r\n\tteam: ServerPokemon[] | null = null;\r\n\tsend = (text: string, elem?: HTMLElement) => {\r\n\t\tthis.props.room.send(text, elem);\r\n\t};\r\n\tfocusIfNoSelection = () => {\r\n\t\tif (window.getSelection?.()?.type === 'Range') return;\r\n\t\tthis.focus();\r\n\t};\r\n\tonKey = (e: KeyboardEvent) => {\r\n\t\tif (e.keyCode === 33) { // Pg Up key\r\n\t\t\tconst chatLog = this.base!.getElementsByClassName('chat-log')[0] as HTMLDivElement;\r\n\t\t\tchatLog.scrollTop = chatLog.scrollTop - chatLog.offsetHeight + 60;\r\n\t\t\treturn true;\r\n\t\t} else if (e.keyCode === 34) { // Pg Dn key\r\n\t\t\tconst chatLog = this.base!.getElementsByClassName('chat-log')[0] as HTMLDivElement;\r\n\t\t\tchatLog.scrollTop = chatLog.scrollTop + chatLog.offsetHeight - 60;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\ttoggleBoostedMove = (e: Event) => {\r\n\t\tconst checkbox = e.currentTarget as HTMLInputElement;\r\n\t\tconst choices = this.props.room.choices;\r\n\t\tif (!choices) return; // shouldn't happen\r\n\t\tswitch (checkbox.name) {\r\n\t\tcase 'mega':\r\n\t\t\tchoices.current.mega = checkbox.checked;\r\n\t\t\tbreak;\r\n\t\tcase 'megax':\r\n\t\t\tchoices.current.megax = checkbox.checked;\r\n\t\t\tchoices.current.megay = false;\r\n\t\t\tbreak;\r\n\t\tcase 'megay':\r\n\t\t\tchoices.current.megay = checkbox.checked;\r\n\t\t\tchoices.current.megax = false;\r\n\t\t\tbreak;\r\n\t\tcase 'ultra':\r\n\t\t\tchoices.current.ultra = checkbox.checked;\r\n\t\t\tbreak;\r\n\t\tcase 'z':\r\n\t\t\tchoices.current.z = checkbox.checked;\r\n\t\t\tbreak;\r\n\t\tcase 'max':\r\n\t\t\tchoices.current.max = checkbox.checked;\r\n\t\t\tbreak;\r\n\t\tcase 'tera':\r\n\t\t\tchoices.current.tera = checkbox.checked;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.props.room.update(null);\r\n\t};\r\n\toverride componentDidMount() {\r\n\t\tconst room = this.props.room;\r\n\t\tconst $elem = $(this.base!);\r\n\t\tconst battle = (room.battle ||= new Battle({\r\n\t\t\tid: room.id as any,\r\n\t\t\t$frame: $elem.find('.battle'),\r\n\t\t\t$logFrame: $elem.find('.battle-log'),\r\n\t\t\tlog: room.backlog?.map(args => '|' + args.join('|')),\r\n\t\t}));\r\n\t\tconst scene = battle.scene as BattleScene;\r\n\t\troom.backlog = null;\r\n\t\troom.log ||= scene.log;\r\n\t\troom.log.getHighlight = room.handleHighlight;\r\n\t\tscene.tooltips.listen($elem.find('.battle-controls-container'));\r\n\t\tscene.tooltips.listen(scene.log.elem);\r\n\t\tsuper.componentDidMount();\r\n\t\tbattle.seekTurn(Infinity);\r\n\t\tbattle.subscribe(() => this.forceUpdate());\r\n\t}\r\n\tbattleHeight = 360;\r\n\tupdateLayout() {\r\n\t\tif (!this.base) return;\r\n\t\tconst room = this.props.room;\r\n\t\tconst width = this.base.offsetWidth;\r\n\t\tif (width && width < 640) {\r\n\t\t\tconst scale = (width / 640);\r\n\t\t\troom.battle?.scene.$frame!.css('transform', `scale(${scale})`);\r\n\t\t\tthis.battleHeight = Math.round(360 * scale);\r\n\t\t} else {\r\n\t\t\troom.battle?.scene.$frame!.css('transform', 'none');\r\n\t\t\tthis.battleHeight = 360;\r\n\t\t}\r\n\t}\r\n\toverride receiveLine(args: Args) {\r\n\t\tconst room = this.props.room;\r\n\t\tswitch (args[0]) {\r\n\t\tcase 'initdone':\r\n\t\t\troom.battle.seekTurn(Infinity);\r\n\t\t\treturn;\r\n\t\tcase 'request':\r\n\t\t\tthis.receiveRequest(args[1] ? JSON.parse(args[1]) : null);\r\n\t\t\treturn;\r\n\t\tcase 'win': case 'tie':\r\n\t\t\tthis.receiveRequest(null);\r\n\t\t\tbreak;\r\n\t\tcase 'c': case 'c:': case 'chat': case 'chatmsg': case 'inactive':\r\n\t\t\troom.battle.instantAdd('|' + args.join('|'));\r\n\t\t\treturn;\r\n\t\tcase 'error':\r\n\t\t\tif (args[1].startsWith('[Invalid choice]') && room.request) {\r\n\t\t\t\troom.choices = new BattleChoiceBuilder(room.request);\r\n\t\t\t\troom.update(null);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\troom.battle.add('|' + args.join('|'));\r\n\t\tif (PS.prefs.noanim) this.props.room.battle.seekTurn(Infinity);\r\n\t}\r\n\treceiveRequest(request: BattleRequest | null) {\r\n\t\tconst room = this.props.room;\r\n\t\tif (!request) {\r\n\t\t\troom.request = null;\r\n\t\t\troom.choices = null;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (PS.prefs.autotimer && !room.battle.kickingInactive && !room.autoTimerActivated) {\r\n\t\t\tthis.send('/timer on');\r\n\t\t\troom.autoTimerActivated = true;\r\n\t\t}\r\n\r\n\t\tBattleChoiceBuilder.fixRequest(request, room.battle);\r\n\r\n\t\tif (request.side) {\r\n\t\t\troom.battle.myPokemon = request.side.pokemon;\r\n\t\t\troom.battle.setViewpoint(request.side.id);\r\n\t\t\troom.side = request.side;\r\n\t\t}\r\n\r\n\t\troom.request = request;\r\n\t\troom.choices = new BattleChoiceBuilder(request);\r\n\t\tthis.notifyRequest();\r\n\t\troom.update(null);\r\n\t}\r\n\tnotifyRequest() {\r\n\t\tconst room = this.props.room;\r\n\t\tlet oName = room.battle.farSide.name;\r\n\t\tif (oName) oName = \" against \" + oName;\r\n\t\tswitch (room.request?.requestType) {\r\n\t\tcase 'move':\r\n\t\t\troom.notify({ title: \"Your move!\", body: \"Move in your battle\" + oName });\r\n\t\t\tbreak;\r\n\t\tcase 'switch':\r\n\t\t\troom.notify({ title: \"Your switch!\", body: \"Switch in your battle\" + oName });\r\n\t\t\tbreak;\r\n\t\tcase 'team':\r\n\t\t\troom.notify({ title: \"Team preview!\", body: \"Choose your team order in your battle\" + oName });\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\trenderControls() {\r\n\t\tconst room = this.props.room;\r\n\t\tif (!room.battle) return null;\r\n\t\tif (room.battle.ended) return this.renderAfterBattleControls();\r\n\t\tif (room.side && room.request) {\r\n\t\t\treturn this.renderPlayerControls(room.request);\r\n\t\t}\r\n\t\tconst atStart = !room.battle.started;\r\n\t\tconst atEnd = room.battle.atQueueEnd;\r\n\t\treturn <div class=\"controls\">\r\n\t\t\t<p>\r\n\t\t\t\t{atEnd ? (\r\n\t\t\t\t\t<button class=\"button disabled\" aria-disabled data-cmd=\"/play\" style=\"min-width:4.5em\">\r\n\t\t\t\t\t\t<i class=\"fa fa-play\" aria-hidden></i><br />Play\r\n\t\t\t\t\t</button>\r\n\t\t\t\t) : room.battle.paused ? (\r\n\t\t\t\t\t<button class=\"button\" data-cmd=\"/play\" style=\"min-width:4.5em\">\r\n\t\t\t\t\t\t<i class=\"fa fa-play\" aria-hidden></i><br />Play\r\n\t\t\t\t\t</button>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<button class=\"button\" data-cmd=\"/pause\" style=\"min-width:4.5em\">\r\n\t\t\t\t\t\t<i class=\"fa fa-pause\" aria-hidden></i><br />Pause\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)} {}\r\n\t\t\t\t<button class={\"button button-first\" + (atStart ? \" disabled\" : \"\")} data-cmd=\"/ffto 0\" style=\"margin-right:2px\">\r\n\t\t\t\t\t<i class=\"fa fa-undo\" aria-hidden></i><br />First turn\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class={\"button button-first\" + (atStart ? \" disabled\" : \"\")} data-cmd=\"/ffto -1\">\r\n\t\t\t\t\t<i class=\"fa fa-step-backward\" aria-hidden></i><br />Prev turn\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class={\"button button-last\" + (atEnd ? \" disabled\" : \"\")} data-cmd=\"/ffto +1\" style=\"margin-right:2px\">\r\n\t\t\t\t\t<i class=\"fa fa-step-forward\" aria-hidden></i><br />Skip turn\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class={\"button button-last\" + (atEnd ? \" disabled\" : \"\")} data-cmd=\"/ffto end\">\r\n\t\t\t\t\t<i class=\"fa fa-fast-forward\" aria-hidden></i><br />Skip to end\r\n\t\t\t\t</button>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<button class=\"button\" data-cmd=\"/switchsides\">\r\n\t\t\t\t\t<i class=\"fa fa-random\" aria-hidden></i> Switch viewpoint\r\n\t\t\t\t</button>\r\n\t\t\t</p>\r\n\t\t</div>;\r\n\t}\r\n\trenderMoveButton(props: {\r\n\t\tname: string,\r\n\t\tcmd: string, type: Dex.TypeName, tooltip: string, moveData: { pp?: number, maxpp?: number, disabled?: boolean },\r\n\t} | null) {\r\n\t\tif (!props) {\r\n\t\t\treturn <button class=\"movebutton\" disabled>&nbsp;</button>;\r\n\t\t}\r\n\t\tconst pp = props.moveData.maxpp ? `${props.moveData.pp!}/${props.moveData.maxpp}` : '\\u2014';\r\n\t\treturn <button\r\n\t\t\tdata-cmd={props.cmd} data-tooltip={props.tooltip}\r\n\t\t\tclass={`movebutton has-tooltip ${props.moveData.disabled ? 'disabled' : `type-${props.type}`}`}\r\n\t\t\taria-disabled={props.moveData.disabled}\r\n\t\t>\r\n\t\t\t{props.name}<br />\r\n\t\t\t<small class=\"type\">{props.type}</small> <small class=\"pp\">{pp}</small>&nbsp;\r\n\t\t</button>;\r\n\t}\r\n\trenderPokemonButton(props: {\r\n\t\tpokemon: Pokemon | ServerPokemon | null, cmd: string, noHPBar?: boolean, disabled?: boolean | 'fade', tooltip: string,\r\n\t}) {\r\n\t\tconst pokemon = props.pokemon;\r\n\t\tif (!pokemon) {\r\n\t\t\treturn <button\r\n\t\t\t\tdata-cmd={props.cmd} class={`${props.disabled ? 'disabled ' : ''}has-tooltip`}\r\n\t\t\t\taria-disabled={props.disabled}\r\n\t\t\t\tstyle={props.disabled === 'fade' ? 'opacity: 0.5' : ''} data-tooltip={props.tooltip}\r\n\t\t\t>\r\n\t\t\t\t(empty slot)\r\n\t\t\t</button>;\r\n\t\t}\r\n\r\n\t\tlet hpColorClass;\r\n\t\tswitch (BattleScene.getHPColor(pokemon)) {\r\n\t\tcase 'y': hpColorClass = 'hpbar hpbar-yellow'; break;\r\n\t\tcase 'r': hpColorClass = 'hpbar hpbar-red'; break;\r\n\t\tdefault: hpColorClass = 'hpbar'; break;\r\n\t\t}\r\n\r\n\t\treturn <button\r\n\t\t\tdata-cmd={props.cmd} class={`${props.disabled ? 'disabled ' : ''}has-tooltip`}\r\n\t\t\taria-disabled={props.disabled}\r\n\t\t\tstyle={props.disabled === 'fade' ? 'opacity: 0.5' : ''} data-tooltip={props.tooltip}\r\n\t\t>\r\n\t\t\t{PSIcon({ pokemon })}\r\n\t\t\t{pokemon.name}\r\n\t\t\t{\r\n\t\t\t\t!props.noHPBar && !pokemon.fainted &&\r\n\t\t\t\t<span class={hpColorClass}>\r\n\t\t\t\t\t<span style={{ width: Math.round(pokemon.hp * 92 / pokemon.maxhp) || 1 }}></span>\r\n\t\t\t\t</span>\r\n\t\t\t}\r\n\t\t\t{!props.noHPBar && pokemon.status && <span class={`status ${pokemon.status}`}></span>}\r\n\t\t</button>;\r\n\t}\r\n\trenderMoveMenu(choices: BattleChoiceBuilder) {\r\n\t\tconst moveRequest = choices.currentMoveRequest()!;\r\n\r\n\t\tconst canDynamax = moveRequest.canDynamax && !choices.alreadyMax;\r\n\t\tconst canMegaEvo = moveRequest.canMegaEvo && !choices.alreadyMega;\r\n\t\tconst canMegaEvoX = moveRequest.canMegaEvoX && !choices.alreadyMega;\r\n\t\tconst canMegaEvoY = moveRequest.canMegaEvoY && !choices.alreadyMega;\r\n\t\tconst canZMove = moveRequest.zMoves && !choices.alreadyZ;\r\n\t\tconst canUltraBurst = moveRequest.canUltraBurst;\r\n\t\tconst canTerastallize = moveRequest.canTerastallize;\r\n\r\n\t\tconst maybeDisabled = moveRequest.maybeDisabled;\r\n\t\tconst maybeLocked = moveRequest.maybeLocked;\r\n\r\n\t\treturn <div class=\"movemenu\">\r\n\t\t\t{maybeDisabled && <p><em class=\"movewarning\">\r\n\t\t\t\tYou <strong>might</strong> have some moves disabled, so you won't be able to cancel an attack!\r\n\t\t\t</em></p>}\r\n\t\t\t{maybeLocked && <p><em class=\"movewarning\">\r\n\t\t\t\tYou <strong>might</strong> be locked into a move. {}\r\n\t\t\t\t<button class=\"button\" data-cmd=\"/choose testfight\">Try Fight button</button> {}\r\n\t\t\t\t(prevents switching if you're locked)\r\n\t\t\t</em></p>}\r\n\t\t\t{this.renderMoveControls(moveRequest, choices)}\r\n\t\t\t<div class=\"megaevo-box\">\r\n\t\t\t\t{canDynamax && <label class={`megaevo${choices.current.max ? ' cur' : ''}`}>\r\n\t\t\t\t\t<input type=\"checkbox\" name=\"max\" checked={choices.current.max} onChange={this.toggleBoostedMove} /> {}\r\n\t\t\t\t\t{moveRequest.gigantamax ? 'Gigantamax' : 'Dynamax'}\r\n\t\t\t\t</label>}\r\n\t\t\t\t{canMegaEvo && <label class={`megaevo${choices.current.mega ? ' cur' : ''}`}>\r\n\t\t\t\t\t<input type=\"checkbox\" name=\"mega\" checked={choices.current.mega} onChange={this.toggleBoostedMove} /> {}\r\n\t\t\t\t\tMega Evolution\r\n\t\t\t\t</label>}\r\n\t\t\t\t{canMegaEvoX && <label class={`megaevo${choices.current.mega ? ' cur' : ''}`}>\r\n\t\t\t\t\t<input type=\"checkbox\" name=\"megax\" checked={choices.current.megax} onChange={this.toggleBoostedMove} /> {}\r\n\t\t\t\t\tMega Evolution X\r\n\t\t\t\t</label>}\r\n\t\t\t\t{canMegaEvoY && <label class={`megaevo${choices.current.mega ? ' cur' : ''}`}>\r\n\t\t\t\t\t<input type=\"checkbox\" name=\"megay\" checked={choices.current.megay} onChange={this.toggleBoostedMove} /> {}\r\n\t\t\t\t\tMega Evolution Y\r\n\t\t\t\t</label>}\r\n\t\t\t\t{canUltraBurst && <label class={`megaevo${choices.current.ultra ? ' cur' : ''}`}>\r\n\t\t\t\t\t<input type=\"checkbox\" name=\"ultra\" checked={choices.current.ultra} onChange={this.toggleBoostedMove} /> {}\r\n\t\t\t\t\tUltra Burst\r\n\t\t\t\t</label>}\r\n\t\t\t\t{canZMove && <label class={`megaevo${choices.current.z ? ' cur' : ''}`}>\r\n\t\t\t\t\t<input type=\"checkbox\" name=\"z\" checked={choices.current.z} onChange={this.toggleBoostedMove} /> {}\r\n\t\t\t\t\tZ-Power\r\n\t\t\t\t</label>}\r\n\t\t\t\t{canTerastallize && <label class={`megaevo${choices.current.tera ? ' cur' : ''}`}>\r\n\t\t\t\t\t<input type=\"checkbox\" name=\"tera\" checked={choices.current.tera} onChange={this.toggleBoostedMove} /> {}\r\n\t\t\t\t\tTerastallize<br /><span dangerouslySetInnerHTML={{ __html: Dex.getTypeIcon(canTerastallize) }} />\r\n\t\t\t\t</label>}\r\n\t\t\t</div>\r\n\t\t</div>;\r\n\t}\r\n\trenderMoveControls(active: BattleRequestActivePokemon, choices: BattleChoiceBuilder) {\r\n\t\tconst battle = this.props.room.battle;\r\n\t\tconst dex = battle.dex;\r\n\t\tconst pokemonIndex = choices.index();\r\n\t\tconst activeIndex = battle.mySide.n > 1 ? pokemonIndex + battle.pokemonControlled : pokemonIndex;\r\n\t\tconst serverPokemon = choices.request.side!.pokemon[pokemonIndex];\r\n\t\tconst valueTracker = new ModifiableValue(battle, battle.nearSide.active[activeIndex]!, serverPokemon);\r\n\t\tconst tooltips = (battle.scene as BattleScene).tooltips;\r\n\r\n\t\tif (choices.current.max || (active.maxMoves && !active.canDynamax)) {\r\n\t\t\tif (!active.maxMoves) {\r\n\t\t\t\treturn <div class=\"message-error\">Maxed with no max moves</div>;\r\n\t\t\t}\r\n\t\t\tconst gmax = active.gigantamax && dex.moves.get(active.gigantamax);\r\n\t\t\treturn active.moves.map((moveData, i) => {\r\n\t\t\t\tconst move = dex.moves.get(moveData.name);\r\n\t\t\t\tconst moveType = tooltips.getMoveType(move, valueTracker, gmax || true)[0];\r\n\t\t\t\tlet maxMoveData: { name: string, id: ID } = active.maxMoves![i];\r\n\t\t\t\tif (maxMoveData.name !== 'Max Guard') {\r\n\t\t\t\t\tmaxMoveData = tooltips.getMaxMoveFromType(moveType, gmax);\r\n\t\t\t\t}\r\n\t\t\t\tconst gmaxTooltip = maxMoveData.id.startsWith('gmax') ? `|${maxMoveData.id}` : ``;\r\n\t\t\t\tconst tooltip = `maxmove|${moveData.name}|${pokemonIndex}${gmaxTooltip}`;\r\n\t\t\t\treturn this.renderMoveButton({\r\n\t\t\t\t\tname: maxMoveData.name,\r\n\t\t\t\t\tcmd: `/move ${i + 1} max`,\r\n\t\t\t\t\ttype: moveType,\r\n\t\t\t\t\ttooltip,\r\n\t\t\t\t\tmoveData,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (choices.current.z) {\r\n\t\t\tif (!active.zMoves) {\r\n\t\t\t\treturn <div class=\"message-error\">No Z moves</div>;\r\n\t\t\t}\r\n\t\t\treturn active.moves.map((moveData, i) => {\r\n\t\t\t\tconst zMoveData = active.zMoves![i];\r\n\t\t\t\tif (!zMoveData) {\r\n\t\t\t\t\treturn this.renderMoveButton(null);\r\n\t\t\t\t}\r\n\t\t\t\tconst specialMove = dex.moves.get(zMoveData.name);\r\n\t\t\t\tconst move = specialMove.exists ? specialMove : dex.moves.get(moveData.name);\r\n\t\t\t\tconst moveType = tooltips.getMoveType(move, valueTracker)[0];\r\n\t\t\t\tconst tooltip = `zmove|${moveData.name}|${pokemonIndex}`;\r\n\t\t\t\treturn this.renderMoveButton({\r\n\t\t\t\t\tname: zMoveData.name,\r\n\t\t\t\t\tcmd: `/move ${i + 1} zmove`,\r\n\t\t\t\t\ttype: moveType,\r\n\t\t\t\t\ttooltip,\r\n\t\t\t\t\tmoveData: { pp: 1, maxpp: 1 },\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconst special = choices.moveSpecial(choices.current);\r\n\t\treturn active.moves.map((moveData, i) => {\r\n\t\t\tconst move = dex.moves.get(moveData.name);\r\n\t\t\tconst moveType = tooltips.getMoveType(move, valueTracker)[0];\r\n\t\t\tconst tooltip = `move|${moveData.name}|${pokemonIndex}`;\r\n\t\t\treturn this.renderMoveButton({\r\n\t\t\t\tname: move.name,\r\n\t\t\t\tcmd: `/move ${i + 1}${special}`,\r\n\t\t\t\ttype: moveType,\r\n\t\t\t\ttooltip,\r\n\t\t\t\tmoveData,\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\trenderMoveTargetControls(request: BattleMoveRequest, choices: BattleChoiceBuilder) {\r\n\t\tconst battle = this.props.room.battle;\r\n\t\tlet moveTarget = choices.currentMove()?.target;\r\n\t\tif ((moveTarget === 'adjacentAlly' || moveTarget === 'adjacentFoe') && battle.gameType === 'freeforall') {\r\n\t\t\tmoveTarget = 'normal';\r\n\t\t}\r\n\t\tconst moveChoice = choices.stringChoice(choices.current);\r\n\r\n\t\tconst userSlot = choices.index() + Math.floor(battle.mySide.n / 2) * battle.pokemonControlled;\r\n\t\tconst userSlotCross = battle.farSide.active.length - 1 - userSlot;\r\n\r\n\t\treturn [\r\n\t\t\tbattle.farSide.active.map((pokemon, i) => {\r\n\t\t\t\tlet disabled = false;\r\n\t\t\t\tif (moveTarget === 'adjacentAlly' || moveTarget === 'adjacentAllyOrSelf') {\r\n\t\t\t\t\tdisabled = true;\r\n\t\t\t\t} else if (moveTarget === 'normal' || moveTarget === 'adjacentFoe') {\r\n\t\t\t\t\tif (Math.abs(userSlotCross - i) > 1) disabled = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (pokemon?.fainted) pokemon = null;\r\n\t\t\t\treturn this.renderPokemonButton({\r\n\t\t\t\t\tpokemon,\r\n\t\t\t\t\tcmd: disabled ? `` : `/${moveChoice} +${i + 1}`,\r\n\t\t\t\t\tdisabled: disabled && 'fade',\r\n\t\t\t\t\ttooltip: `activepokemon|1|${i}`,\r\n\t\t\t\t});\r\n\t\t\t}).reverse(),\r\n\t\t\t<div style=\"clear: left\"></div>,\r\n\t\t\tbattle.nearSide.active.map((pokemon, i) => {\r\n\t\t\t\tlet disabled = false;\r\n\t\t\t\tif (moveTarget === 'adjacentFoe') {\r\n\t\t\t\t\tdisabled = true;\r\n\t\t\t\t} else if (moveTarget === 'normal' || moveTarget === 'adjacentAlly' || moveTarget === 'adjacentAllyOrSelf') {\r\n\t\t\t\t\tif (Math.abs(userSlot - i) > 1) disabled = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (moveTarget !== 'adjacentAllyOrSelf' && userSlot === i) disabled = true;\r\n\r\n\t\t\t\tif (pokemon?.fainted) pokemon = null;\r\n\t\t\t\treturn this.renderPokemonButton({\r\n\t\t\t\t\tpokemon,\r\n\t\t\t\t\tcmd: disabled ? `` : `/${moveChoice} -${i + 1}`,\r\n\t\t\t\t\tdisabled: disabled && 'fade',\r\n\t\t\t\t\ttooltip: `activepokemon|0|${i}`,\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t];\r\n\t}\r\n\trenderSwitchMenu(\r\n\t\trequest: BattleMoveRequest | BattleSwitchRequest, choices: BattleChoiceBuilder, ignoreTrapping?: boolean\r\n\t) {\r\n\t\tconst numActive = choices.requestLength();\r\n\t\tconst maybeTrapped = !ignoreTrapping && choices.currentMoveRequest()?.maybeTrapped;\r\n\t\tconst trapped = !ignoreTrapping && !maybeTrapped && choices.currentMoveRequest()?.trapped;\r\n\r\n\t\treturn <div class=\"switchmenu\">\r\n\t\t\t{maybeTrapped && <em class=\"movewarning\">\r\n\t\t\t\tYou <strong>might</strong> be trapped, so you won't be able to cancel a switch!<br />\r\n\t\t\t</em>}\r\n\t\t\t{trapped && <em class=\"movewarning\">\r\n\t\t\t\tYou're <strong>trapped</strong> and cannot switch!<br />\r\n\t\t\t</em>}\r\n\t\t\t{request.side.pokemon.map((serverPokemon, i) => {\r\n\t\t\t\tconst cantSwitch = trapped || i < numActive || choices.alreadySwitchingIn.includes(i + 1) || serverPokemon.fainted;\r\n\t\t\t\treturn this.renderPokemonButton({\r\n\t\t\t\t\tpokemon: serverPokemon,\r\n\t\t\t\t\tcmd: `/switch ${i + 1}`,\r\n\t\t\t\t\tdisabled: cantSwitch,\r\n\t\t\t\t\ttooltip: `switchpokemon|${i}`,\r\n\t\t\t\t});\r\n\t\t\t})}\r\n\t\t</div>;\r\n\t}\r\n\trenderTeamPreviewChooser(request: | BattleTeamRequest, choices: BattleChoiceBuilder) {\r\n\t\treturn request.side.pokemon.map((serverPokemon, i) => {\r\n\t\t\tconst cantSwitch = choices.alreadySwitchingIn.includes(i + 1);\r\n\t\t\treturn this.renderPokemonButton({\r\n\t\t\t\tpokemon: serverPokemon,\r\n\t\t\t\tcmd: `/switch ${i + 1}`,\r\n\t\t\t\tdisabled: cantSwitch && 'fade',\r\n\t\t\t\ttooltip: `switchpokemon|${i}`,\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\trenderTeamList() {\r\n\t\tconst team = this.team;\r\n\t\tif (!team) return;\r\n\t\treturn <div class=\"switchcontrols\">\r\n\t\t\t<h3 class=\"switchselect\">Team</h3>\r\n\t\t\t<div class=\"switchmenu\">\r\n\t\t\t\t{team.map((serverPokemon, i) => {\r\n\t\t\t\t\treturn this.renderPokemonButton({\r\n\t\t\t\t\t\tpokemon: serverPokemon,\r\n\t\t\t\t\t\tcmd: \"\",\r\n\t\t\t\t\t\tdisabled: true,\r\n\t\t\t\t\t\ttooltip: `switchpokemon|${i}`,\r\n\t\t\t\t\t});\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>;\r\n\t}\r\n\trenderChosenTeam(request: BattleTeamRequest, choices: BattleChoiceBuilder) {\r\n\t\treturn choices.alreadySwitchingIn.map(slot => {\r\n\t\t\tconst serverPokemon = request.side.pokemon[slot - 1];\r\n\t\t\treturn this.renderPokemonButton({\r\n\t\t\t\tpokemon: serverPokemon,\r\n\t\t\t\tcmd: `/switch ${slot}`,\r\n\t\t\t\tdisabled: true,\r\n\t\t\t\ttooltip: `switchpokemon|${slot - 1}`,\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\trenderOldChoices(request: BattleRequest, choices: BattleChoiceBuilder) {\r\n\t\tif (!choices) return null; // should not happen\r\n\t\tif (request.requestType !== 'move' && request.requestType !== 'switch' && request.requestType !== 'team') return;\r\n\t\tif (choices.isEmpty()) return null;\r\n\r\n\t\tlet buf: preact.ComponentChild[] = [\r\n\t\t\t<button data-cmd=\"/cancel\" class=\"button\"><i class=\"fa fa-chevron-left\" aria-hidden></i> Back</button>, ' ',\r\n\t\t];\r\n\t\tif (choices.isDone() && choices.noCancel) {\r\n\t\t\tbuf = ['Waiting for opponent...', <br />];\r\n\t\t} else if (choices.isDone() && choices.choices.length <= 1) {\r\n\t\t\tbuf = [];\r\n\t\t}\r\n\r\n\t\tconst battle = this.props.room.battle;\r\n\t\tfor (let i = 0; i < choices.choices.length; i++) {\r\n\t\t\tconst choiceString = choices.choices[i];\r\n\t\t\tif (choiceString === \"testfight\") {\r\n\t\t\t\tbuf.push(`${request.side.pokemon[i].name} is locked into a move.`);\r\n\t\t\t\treturn buf;\r\n\t\t\t}\r\n\t\t\tlet choice;\r\n\t\t\ttry {\r\n\t\t\t\tchoice = choices.parseChoice(choiceString, i);\r\n\t\t\t} catch (err: any) {\r\n\t\t\t\tbuf.push(<span class=\"message-error\">{err.message}</span>);\r\n\t\t\t}\r\n\t\t\tif (!choice) continue;\r\n\t\t\tconst pokemon = request.side.pokemon[i];\r\n\t\t\tconst active = request.requestType === 'move' ? request.active[i] : null;\r\n\t\t\tif (choice.choiceType === 'move') {\r\n\t\t\t\tbuf.push(`${pokemon.name} will `);\r\n\t\t\t\tif (choice.mega) buf.push(<strong>Mega</strong>, ` Evolve and `);\r\n\t\t\t\tif (choice.megax) buf.push(<strong>Mega</strong>, ` Evolve (X) and `);\r\n\t\t\t\tif (choice.megay) buf.push(<strong>Mega</strong>, ` Evolve (Y) and `);\r\n\t\t\t\tif (choice.ultra) buf.push(<strong>Ultra</strong>, ` Burst and `);\r\n\t\t\t\tif (choice.tera) buf.push(`Terastallize (`, <strong>{active?.canTerastallize || '???'}</strong>, `) and `);\r\n\t\t\t\tif (choice.max && active?.canDynamax) buf.push(active?.gigantamax ? `Gigantamax and ` : `Dynamax and `);\r\n\t\t\t\tbuf.push(`use `, <strong>{choices.currentMove(choice, i)?.name}</strong>);\r\n\t\t\t\tif (choice.targetLoc > 0) {\r\n\t\t\t\t\tconst target = battle.farSide.active[choice.targetLoc - 1];\r\n\t\t\t\t\tif (!target) {\r\n\t\t\t\t\t\tbuf.push(` at slot ${choice.targetLoc}`);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbuf.push(` at ${target.name}`);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (choice.targetLoc < 0) {\r\n\t\t\t\t\tconst target = battle.nearSide.active[-choice.targetLoc - 1];\r\n\t\t\t\t\tif (!target) {\r\n\t\t\t\t\t\tbuf.push(` at ally slot ${choice.targetLoc}`);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbuf.push(` at ally ${target.name}`);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (choice.choiceType === 'switch') {\r\n\t\t\t\tconst target = request.side.pokemon[choice.targetPokemon - 1];\r\n\t\t\t\tbuf.push(`${pokemon.name} will switch to `, <strong>{target.name}</strong>);\r\n\t\t\t} else if (choice.choiceType === 'shift') {\r\n\t\t\t\tbuf.push(`${pokemon.name} will `, <strong>shift</strong>, ` to the center`);\r\n\t\t\t} else if (choice.choiceType === 'team') {\r\n\t\t\t\tconst target = request.side.pokemon[choice.targetPokemon - 1];\r\n\t\t\t\tbuf.push(`You picked `, <strong>{target.name}</strong>);\r\n\t\t\t}\r\n\t\t\tbuf.push(<br />);\r\n\t\t}\r\n\t\treturn buf;\r\n\t}\r\n\trenderPlayerWaitingControls() {\r\n\t\treturn <div class=\"controls\">\r\n\t\t\t<div class=\"whatdo\">\r\n\t\t\t\t<button class=\"button\" data-cmd=\"/ffto end\">Skip animation <i class=\"fa fa-fast-forward\" aria-hidden></i></button>\r\n\t\t\t</div>\r\n\t\t\t{this.renderTeamList()}\r\n\t\t</div>;\r\n\t}\r\n\trenderPlayerControls(request: BattleRequest) {\r\n\t\tconst room = this.props.room;\r\n\t\tconst atEnd = room.battle.atQueueEnd;\r\n\t\tif (!atEnd) return this.renderPlayerWaitingControls();\r\n\r\n\t\tlet choices = room.choices;\r\n\t\tif (!choices) return 'Error: Missing BattleChoiceBuilder';\r\n\t\tif (choices.request !== request) {\r\n\t\t\tchoices = new BattleChoiceBuilder(request);\r\n\t\t\troom.choices = choices;\r\n\t\t}\r\n\r\n\t\tif (choices.isDone()) {\r\n\t\t\treturn <div class=\"controls\">\r\n\t\t\t\t<div class=\"whatdo\">\r\n\t\t\t\t\t{this.renderOldChoices(request, choices)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"pad\">\r\n\t\t\t\t\t{choices.noCancel ? null : <button data-cmd=\"/cancel\" class=\"button\">Cancel</button>}\r\n\t\t\t\t</div>\r\n\t\t\t\t{this.renderTeamList()}\r\n\t\t\t</div>;\r\n\t\t}\r\n\t\tif (request.side) {\r\n\t\t\troom.battle.myPokemon = request.side.pokemon;\r\n\t\t\tthis.team = request.side.pokemon;\r\n\t\t}\r\n\t\tswitch (request.requestType) {\r\n\t\tcase 'move': {\r\n\t\t\tconst index = choices.index();\r\n\t\t\tconst pokemon = request.side.pokemon[index];\r\n\r\n\t\t\tif (choices.current.move) {\r\n\t\t\t\tconst moveName = choices.currentMove()?.name;\r\n\t\t\t\treturn <div class=\"controls\">\r\n\t\t\t\t\t<div class=\"whatdo\">\r\n\t\t\t\t\t\t{this.renderOldChoices(request, choices)}\r\n\t\t\t\t\t\t{pokemon.name} should use <strong>{moveName}</strong> at where? {}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"switchcontrols\">\r\n\t\t\t\t\t\t<div class=\"switchmenu\">\r\n\t\t\t\t\t\t\t{this.renderMoveTargetControls(request, choices)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>;\r\n\t\t\t}\r\n\r\n\t\t\tconst canShift = room.battle.gameType === 'triples' && index !== 1;\r\n\r\n\t\t\treturn <div class=\"controls\">\r\n\t\t\t\t<div class=\"whatdo\">\r\n\t\t\t\t\t{this.renderOldChoices(request, choices)}\r\n\t\t\t\t\tWhat will <strong>{pokemon.name}</strong> do?\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"movecontrols\">\r\n\t\t\t\t\t<h3 class=\"moveselect\">Attack</h3>\r\n\t\t\t\t\t{this.renderMoveMenu(choices)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"switchcontrols\">\r\n\t\t\t\t\t{canShift && [\r\n\t\t\t\t\t\t<h3 class=\"shiftselect\">Shift</h3>,\r\n\t\t\t\t\t\t<button data-cmd=\"/shift\">Move to center</button>,\r\n\t\t\t\t\t]}\r\n\t\t\t\t\t<h3 class=\"switchselect\">Switch</h3>\r\n\t\t\t\t\t{this.renderSwitchMenu(request, choices)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>;\r\n\t\t} case 'switch': {\r\n\t\t\tconst pokemon = request.side.pokemon[choices.index()];\r\n\t\t\treturn <div class=\"controls\">\r\n\t\t\t\t<div class=\"whatdo\">\r\n\t\t\t\t\t{this.renderOldChoices(request, choices)}\r\n\t\t\t\t\tWhat will <strong>{pokemon.name}</strong> do?\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"switchcontrols\">\r\n\t\t\t\t\t<h3 class=\"switchselect\">Switch</h3>\r\n\t\t\t\t\t{this.renderSwitchMenu(request, choices, true)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>;\r\n\t\t} case 'team': {\r\n\t\t\treturn <div class=\"controls\">\r\n\t\t\t\t<div class=\"whatdo\">\r\n\t\t\t\t\t{choices.alreadySwitchingIn.length > 0 ? (\r\n\t\t\t\t\t\t[<button data-cmd=\"/cancel\" class=\"button\"><i class=\"fa fa-chevron-left\" aria-hidden></i> Back</button>,\r\n\t\t\t\t\t\t\t\" What about the rest of your team? \"]\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\"How will you start the battle? \"\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"switchcontrols\">\r\n\t\t\t\t\t<h3 class=\"switchselect\">\r\n\t\t\t\t\t\tChoose {choices.alreadySwitchingIn.length <= 0 ? `lead` : `slot ${choices.alreadySwitchingIn.length + 1}`}\r\n\t\t\t\t\t</h3>\r\n\t\t\t\t\t<div class=\"switchmenu\">\r\n\t\t\t\t\t\t{this.renderTeamPreviewChooser(request, choices)}\r\n\t\t\t\t\t\t<div style=\"clear:left\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"switchcontrols\">\r\n\t\t\t\t\t{choices.alreadySwitchingIn.length > 0 && <h3 class=\"switchselect\">Team so far</h3>}\r\n\t\t\t\t\t<div class=\"switchmenu\">\r\n\t\t\t\t\t\t{this.renderChosenTeam(request, choices)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>;\r\n\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\trenderAfterBattleControls() {\r\n\t\tconst room = this.props.room;\r\n\t\tconst isNotTiny = room.width > 700;\r\n\t\treturn <div class=\"controls\">\r\n\t\t\t<p>\r\n\t\t\t\t<span style=\"float: right\">\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\tonClick={this.handleDownloadReplay}\r\n\t\t\t\t\t\thref={`//${Config.routes.replays}/download`}\r\n\t\t\t\t\t\tclass=\"button replayDownloadButton\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<i class=\"fa fa-download\" aria-hidden></i> Download replay</a>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<button class=\"button\" data-cmd=\"/savereplay\">\r\n\t\t\t\t\t\t<i class=\"fa fa-upload\" aria-hidden></i> Upload and share replay\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</span>\r\n\r\n\t\t\t\t<button class=\"button\" data-cmd=\"/play\" style=\"min-width:4.5em\">\r\n\t\t\t\t\t<i class=\"fa fa-undo\" aria-hidden></i><br />Replay\r\n\t\t\t\t</button> {}\r\n\t\t\t\t{isNotTiny && <button class=\"button button-first\" data-cmd=\"/ffto 0\" style=\"margin-right:2px\">\r\n\t\t\t\t\t<i class=\"fa fa-undo\" aria-hidden></i><br />First turn\r\n\t\t\t\t</button>}\r\n\t\t\t\t{isNotTiny && <button class=\"button button-first\" data-cmd=\"/ffto -1\">\r\n\t\t\t\t\t<i class=\"fa fa-step-backward\" aria-hidden></i><br />Prev turn\r\n\t\t\t\t</button>}\r\n\t\t\t</p>\r\n\t\t\t{room.side ? (\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<button class=\"button\" data-cmd=\"/close\">\r\n\t\t\t\t\t\t<strong>Main menu</strong><br /><small>(closes this battle)</small>\r\n\t\t\t\t\t</button> {}\r\n\t\t\t\t\t<button class=\"button\" data-cmd={`/closeand /challenge ${room.battle.farSide.id},${room.battle.tier}`}>\r\n\t\t\t\t\t\t<strong>Rematch</strong><br /><small>(closes this battle)</small>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</p>\r\n\t\t\t) : (\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<button class=\"button\" data-cmd=\"/switchsides\"><i class=\"fa fa-random\" aria-hidden></i> Switch viewpoint</button>\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\t\t</div>;\r\n\t}\r\n\r\n\thandleDownloadReplay = (e: MouseEvent) => {\r\n\t\tlet room = this.props.room;\r\n\t\tconst target = e.currentTarget as HTMLAnchorElement;\r\n\t\t// download replay\r\n\t\tlet filename = (room.battle.tier || 'Battle').replace(/[^A-Za-z0-9]/g, '');\r\n\t\tlet date = new Date();\r\n\t\tfilename += `-${date.getFullYear()}`;\r\n\t\tfilename += `-${date.getMonth() >= 9 ? '' : '0'}${date.getMonth() + 1}`;\r\n\t\tfilename += `-${date.getDate() >= 10 ? '' : '0'}${date.getDate()}`;\r\n\t\tfilename += '-' + toID(room.battle.p1.name);\r\n\t\tfilename += '-' + toID(room.battle.p2.name);\r\n\t\ttarget.href = window.BattleLog.createReplayFileHref(room);\r\n\t\ttarget.download = filename + '.html';\r\n\t\te.stopPropagation();\r\n\t};\r\n\r\n\toverride render() {\r\n\t\tconst room = this.props.room;\r\n\t\tthis.updateLayout();\r\n\t\tconst id = `room-${room.id}`;\r\n\t\tconst hardcoreStyle = room.battle?.hardcoreMode ? <style\r\n\t\t\tdangerouslySetInnerHTML={{ __html: `#${id} .battle .turn, #${id} .battle-history { display: none !important; }` }}\r\n\t\t></style> : null;\r\n\r\n\t\tif (room.width < 700) {\r\n\t\t\treturn <PSPanelWrapper room={room} focusClick scrollable=\"hidden\">\r\n\t\t\t\t{hardcoreStyle}\r\n\t\t\t\t<BattleDiv room={room} />\r\n\t\t\t\t<ChatLog\r\n\t\t\t\t\tclass=\"battle-log hasuserlist\" room={room} top={this.battleHeight} noSubscription\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\"battle-controls\" role=\"complementary\" aria-label=\"Battle Controls\">\r\n\t\t\t\t\t\t{this.renderControls()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</ChatLog>\r\n\t\t\t\t<ChatTextEntry room={room} onMessage={this.send} onKey={this.onKey} left={0} />\r\n\t\t\t\t<ChatUserList room={room} top={this.battleHeight} minimized />\r\n\t\t\t\t<button\r\n\t\t\t\t\tdata-href=\"battleoptions\" class=\"button\"\r\n\t\t\t\t\tstyle={{ position: 'absolute', right: '75px', top: this.battleHeight }}\r\n\t\t\t\t>\r\n\t\t\t\t\tBattle options\r\n\t\t\t\t</button>\r\n\t\t\t\t{(room.battle && !room.battle.ended && room.request && room.battle.mySide.id === PS.user.userid) &&\r\n\t\t\t\t\t<TimerButton room={room} />}\r\n\t\t\t\t<div class=\"battle-controls-container\"></div>\r\n\t\t\t</PSPanelWrapper>;\r\n\t\t}\r\n\r\n\t\treturn <PSPanelWrapper room={room} focusClick scrollable=\"hidden\">\r\n\t\t\t{hardcoreStyle}\r\n\t\t\t<BattleDiv room={room} />\r\n\t\t\t<ChatLog\r\n\t\t\t\tclass=\"battle-log hasuserlist\" room={room} left={640} noSubscription\r\n\t\t\t>\r\n\t\t\t\t{}\r\n\t\t\t</ChatLog>\r\n\t\t\t<ChatTextEntry room={room} onMessage={this.send} onKey={this.onKey} left={640} />\r\n\t\t\t<ChatUserList room={room} left={640} minimized />\r\n\t\t\t<button\r\n\t\t\t\tdata-href=\"battleoptions\" class=\"button\"\r\n\t\t\t\tstyle={{ position: 'absolute', right: '15px' }}\r\n\t\t\t>\r\n\t\t\t\tBattle options\r\n\t\t\t</button>\r\n\t\t\t<div class=\"battle-controls-container\">\r\n\t\t\t\t<div class=\"battle-controls\" role=\"complementary\" aria-label=\"Battle Controls\" style=\"top: 370px;\">\r\n\t\t\t\t\t{(room.battle && !room.battle.ended && room.request && room.battle.mySide.id === PS.user.userid) &&\r\n\t\t\t\t\t\t<TimerButton room={room} />}\r\n\t\t\t\t\t{this.renderControls()}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nPS.addRoomType(BattlePanel, BattlesPanel);\r\n"],"mappings":"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","ignoreList":[]}