{"version":3,"file":"panel-topbar.js","names":["window","addEventListener","e","_type","console","log","dataTransfer","dropEffect","target","type","startsWith","PS","dragging","preventDefault","updateAutojoin","PSHeader","_preact$Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","handleResize","_this$base$querySelec","_this$base$querySelec2","base","leftPanelWidth","width","document","documentElement","clientWidth","oldNarrowMode","PSView","narrowMode","verticalHeaderWidth","NARROW_MODE_HEADER_WIDTH","VERTICAL_HEADER_WIDTH","style","textboxFocused","_document$documentEle","classList","add","_document$documentEle2","remove","update","_document$documentEle3","userbarLeft","querySelector","getBoundingClientRect","left","plusTabRight","right","overflow","display","_inheritsLoose","roomInfo","room","RoomType","roomTypes","icon","preact","h","title","idChunks","id","slice","split","formatName","BattleLog","_battle$p","_battle$p2","battle","p1","name","p2","closeBracketIndex","indexOf","renderRoomTab","noAria","rooms","closable","cur","isVisible","notifying","isSubtleNotifying","hoverTitle","notifications","_i2","_PS$miniRoomList2","miniRoomList","_PS$rooms$roomid","roomid","miniNotifications","_i4","_notifications2","notif","body","className","_PSHeader$roomInfo","roomTitle","closeButton","value","aria","key","Object","assign","href","draggable","undefined","onDragEnter","handleDragEnter","onDragStart","handleDragStart","_proto","prototype","componentDidMount","_this2","user","subscribe","forceUpdate","componentDidUpdate","renderUser","connected","disabled","initializing","named","userColor","usernameColor","userid","renderVertical","role","onClick","scrollToHeader","src","Config","routes","client","alt","height","leftRoomList","map","rightRoomList","onDblClick","toggleMute","prefs","mute","render","Component","set","_PS$dragging","currentTarget","draggingRoom","draggedOverRoom","router","extractRoomID","leftIndex","dragOnto","rightIndex","PSMiniHeader","_preact$Component2","_this3","_len2","_key2","handleScroll","_proto2","componentWillUnmount","removeEventListener","notificationsCount","_i6","_PS$leftRoomList2","_PS$rooms$roomid2","_PSHeader$roomInfo2","panel","showMenuButton","scrollX","values","some","menuButton","scrollToRoom","getElementById"],"sources":["../src/panel-topbar.tsx"],"sourcesContent":["/**\r\n * Topbar Panel\r\n *\r\n * Topbar view - handles the topbar and some generic popups.\r\n *\r\n * Also handles global drag-and-drop support.\r\n *\r\n * @author Guangcong Luo <guangcongluo@gmail.com>\r\n * @license AGPLv3\r\n */\r\n\r\nimport preact from \"../js/lib/preact\";\r\nimport { Config, PS, type PSRoom, type RoomID } from \"./client-main\";\r\nimport { NARROW_MODE_HEADER_WIDTH, PSView, VERTICAL_HEADER_WIDTH } from \"./panels\";\r\nimport type { Battle } from \"./battle\";\r\nimport { BattleLog } from \"./battle-log\"; // optional\r\n\r\nwindow.addEventListener('drop', e => {\r\n\tconsole.log('drop ' + e.dataTransfer!.dropEffect);\r\n\tconst target = e.target as HTMLElement;\r\n\tif ((target as HTMLInputElement).type?.startsWith(\"text\")) {\r\n\t\tPS.dragging = null;\r\n\t\treturn; // Ignore text fields\r\n\t}\r\n\r\n\t// The default team drop action for Firefox is to open the team as a\r\n\t// URL, which needs to be prevented.\r\n\t// The default file drop action for most browsers is to open the file\r\n\t// in the tab, which is generally undesirable anyway.\r\n\te.preventDefault();\r\n\tPS.dragging = null;\r\n\tPS.updateAutojoin();\r\n});\r\nwindow.addEventListener('dragover', e => {\r\n\t// this prevents the bounce-back animation\r\n\te.preventDefault();\r\n});\r\n\r\nexport class PSHeader extends preact.Component {\r\n\tstatic toggleMute = (e: Event) => {\r\n\t\tPS.prefs.set('mute', !PS.prefs.mute);\r\n\t\tPS.update();\r\n\t};\r\n\tstatic handleDragEnter = (e: DragEvent) => {\r\n\t\t// console.log('dragenter ' + e.dataTransfer!.dropEffect);\r\n\t\te.preventDefault();\r\n\t\tif (PS.dragging?.type !== 'room') return;\r\n\t\t/** the element being passed over */\r\n\t\tconst target = e.currentTarget as HTMLAnchorElement;\r\n\r\n\t\tconst draggingRoom = PS.dragging.roomid;\r\n\t\tif (draggingRoom === null) return;\r\n\r\n\t\tconst draggedOverRoom = PS.router.extractRoomID(target.href);\r\n\t\tif (draggedOverRoom === null) return; // should never happen\r\n\t\tif (draggingRoom === draggedOverRoom) return;\r\n\r\n\t\tconst leftIndex = PS.leftRoomList.indexOf(draggedOverRoom);\r\n\t\tif (leftIndex >= 0) {\r\n\t\t\tPS.dragOnto(PS.rooms[draggingRoom]!, 'left', leftIndex);\r\n\t\t} else {\r\n\t\t\tconst rightIndex = PS.rightRoomList.indexOf(draggedOverRoom);\r\n\t\t\tif (rightIndex >= 0) {\r\n\t\t\t\tPS.dragOnto(PS.rooms[draggingRoom]!, 'right', rightIndex);\r\n\t\t\t} else {\r\n\t\t\t\t// eslint-disable-next-line no-useless-return\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// dropEffect !== 'none' prevents bounce-back animation in\r\n\t\t// Chrome/Safari/Opera\r\n\t\t// if (e.dataTransfer) e.dataTransfer.dropEffect = 'move';\r\n\t};\r\n\tstatic handleDragStart = (e: DragEvent) => {\r\n\t\tconst roomid = PS.router.extractRoomID((e.currentTarget as HTMLAnchorElement).href);\r\n\t\tif (!roomid) return; // should never happen\r\n\r\n\t\tPS.dragging = { type: 'room', roomid };\r\n\t};\r\n\tstatic roomInfo(room: PSRoom) {\r\n\t\tconst RoomType = PS.roomTypes[room.type];\r\n\t\tlet icon = RoomType?.icon || <i class=\"fa fa-file-text-o\" aria-hidden></i>;\r\n\t\tlet title = room.title;\r\n\t\tswitch (room.type) {\r\n\t\tcase 'battle':\r\n\t\t\tlet idChunks = room.id.slice(7).split('-');\r\n\t\t\tlet formatName;\r\n\t\t\t// TODO: relocate to room implementation\r\n\t\t\tif (idChunks.length <= 1) {\r\n\t\t\t\tif (idChunks[0] === 'uploadedreplay') formatName = 'Uploaded Replay';\r\n\t\t\t} else {\r\n\t\t\t\tformatName = window.BattleLog ? BattleLog.formatName(idChunks[0]) : idChunks[0];\r\n\t\t\t}\r\n\t\t\tif (!title) {\r\n\t\t\t\tlet battle = (room as any).battle as Battle | undefined;\r\n\t\t\t\tlet p1 = battle?.p1?.name || '';\r\n\t\t\t\tlet p2 = battle?.p2?.name || '';\r\n\t\t\t\tif (p1 && p2) {\r\n\t\t\t\t\ttitle = `${p1} v. ${p2}`;\r\n\t\t\t\t} else if (p1 || p2) {\r\n\t\t\t\t\ttitle = `${p1}${p2}`;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttitle = `(empty room)`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ticon = <i class=\"text\">{formatName}</i>;\r\n\t\t\tbreak;\r\n\t\tcase 'html':\r\n\t\tdefault:\r\n\t\t\tif (title.startsWith('[')) {\r\n\t\t\t\tlet closeBracketIndex = title.indexOf(']');\r\n\t\t\t\tif (closeBracketIndex > 0) {\r\n\t\t\t\t\ticon = <i class=\"text\">{title.slice(1, closeBracketIndex)}</i>;\r\n\t\t\t\t\ttitle = title.slice(closeBracketIndex + 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\treturn { icon, title };\r\n\t}\r\n\tstatic renderRoomTab(id: RoomID, noAria?: boolean) {\r\n\t\tconst room = PS.rooms[id];\r\n\t\tif (!room) return null;\r\n\t\tconst closable = (id === '' || id === 'rooms' ? '' : ' closable');\r\n\t\tconst cur = PS.isVisible(room) ? ' cur' : '';\r\n\t\tlet notifying = room.isSubtleNotifying ? ' subtle-notifying' : '';\r\n\t\tlet hoverTitle = '';\r\n\t\tlet notifications = room.notifications;\r\n\t\tif (id === '') {\r\n\t\t\tfor (const roomid of PS.miniRoomList) {\r\n\t\t\t\tconst miniNotifications = PS.rooms[roomid]?.notifications;\r\n\t\t\t\tif (miniNotifications?.length) notifications = [...notifications, ...miniNotifications];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (notifications.length) {\r\n\t\t\tnotifying = ' notifying';\r\n\t\t\tfor (const notif of notifications) {\r\n\t\t\t\tif (!notif.body) continue;\r\n\t\t\t\thoverTitle += `${notif.title}\\n${notif.body}\\n`;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet className = `roomtab button${notifying}${closable}${cur}`;\r\n\r\n\t\tlet { icon, title: roomTitle } = PSHeader.roomInfo(room);\r\n\t\tif (room.type === 'rooms' && PS.leftPanelWidth !== null) roomTitle = '';\r\n\t\tif (room.type === 'battle') className += ' roomtab-battle';\r\n\r\n\t\tlet closeButton = null;\r\n\t\tif (closable) {\r\n\t\t\tcloseButton = <button class=\"closebutton\" name=\"closeRoom\" value={id} aria-label=\"Close\">\r\n\t\t\t\t<i class=\"fa fa-times-circle\" aria-hidden></i>\r\n\t\t\t</button>;\r\n\t\t}\r\n\t\tconst aria: Record<string, string> = noAria ? {} : {\r\n\t\t\t\"role\": \"tab\", \"id\": `roomtab-${id}`, \"aria-selected\": cur ? \"true\" : \"false\",\r\n\t\t};\r\n\t\tif (id === 'rooms') aria['aria-label'] = \"Join chat\";\r\n\t\treturn <li class={id === '' ? 'home-li' : ''} key={id}>\r\n\t\t\t<a\r\n\t\t\t\tclass={className} href={`/${id}`} draggable={true} title={hoverTitle || undefined}\r\n\t\t\t\tonDragEnter={this.handleDragEnter} onDragStart={this.handleDragStart}\r\n\t\t\t\t{...aria}\r\n\t\t\t>\r\n\t\t\t\t{icon} {roomTitle}\r\n\t\t\t</a>\r\n\t\t\t{closeButton}\r\n\t\t</li>;\r\n\t}\r\n\thandleResize = () => {\r\n\t\tif (!this.base) return;\r\n\r\n\t\tif (PS.leftPanelWidth === null) {\r\n\t\t\tconst width = document.documentElement.clientWidth;\r\n\t\t\tconst oldNarrowMode = PSView.narrowMode;\r\n\t\t\tPSView.narrowMode = width <= 700;\r\n\t\t\tPSView.verticalHeaderWidth = PSView.narrowMode ? NARROW_MODE_HEADER_WIDTH : VERTICAL_HEADER_WIDTH;\r\n\t\t\tdocument.documentElement.style.width = PSView.narrowMode ? `${width + NARROW_MODE_HEADER_WIDTH}px` : 'auto';\r\n\t\t\tif (oldNarrowMode !== PSView.narrowMode) {\r\n\t\t\t\tif (PSView.narrowMode) {\r\n\t\t\t\t\tif (!PSView.textboxFocused) {\r\n\t\t\t\t\t\tdocument.documentElement.classList?.add('scroll-snap-enabled');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdocument.documentElement.classList?.remove('scroll-snap-enabled');\r\n\t\t\t\t}\r\n\t\t\t\tPS.update();\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (PSView.narrowMode) {\r\n\t\t\tdocument.documentElement.classList?.remove('scroll-snap-enabled');\r\n\t\t\tPSView.narrowMode = false;\r\n\t\t}\r\n\r\n\t\tconst userbarLeft = this.base.querySelector('div.userbar')?.getBoundingClientRect()?.left;\r\n\t\tconst plusTabRight = this.base.querySelector('a.roomtab[aria-label=\"Join chat\"]')?.getBoundingClientRect()?.right;\r\n\t\tconst overflow = this.base.querySelector<HTMLElement>('.overflow');\r\n\r\n\t\tif (!overflow || !userbarLeft || !plusTabRight) return;\r\n\r\n\t\tif (plusTabRight > userbarLeft - 3) {\r\n\t\t\toverflow.style.display = 'block';\r\n\t\t} else {\r\n\t\t\toverflow.style.display = 'none';\r\n\t\t}\r\n\t};\r\n\toverride componentDidMount() {\r\n\t\tPS.user.subscribe(() => {\r\n\t\t\tthis.forceUpdate();\r\n\t\t});\r\n\t\twindow.addEventListener('resize', this.handleResize);\r\n\t\tthis.handleResize();\r\n\t}\r\n\toverride componentDidUpdate() {\r\n\t\tthis.handleResize();\r\n\t}\r\n\trenderUser() {\r\n\t\tif (!PS.connected) {\r\n\t\t\treturn <button class=\"button\" disabled><em>Offline</em></button>;\r\n\t\t}\r\n\t\tif (PS.user.initializing) {\r\n\t\t\treturn <button class=\"button\" disabled><em>Connecting...</em></button>;\r\n\t\t}\r\n\t\tif (!PS.user.named) {\r\n\t\t\treturn <a class=\"button\" href=\"login\">Choose name</a>;\r\n\t\t}\r\n\t\tconst userColor = window.BattleLog && `color:${BattleLog.usernameColor(PS.user.userid)}`;\r\n\t\treturn <span class=\"username\" style={userColor}>\r\n\t\t\t<span class=\"usernametext\">{PS.user.name}</span>\r\n\t\t</span>;\r\n\t}\r\n\trenderVertical() {\r\n\t\treturn <div\r\n\t\t\tid=\"header\" class=\"header-vertical\" role=\"navigation\"\r\n\t\t\tstyle={`width:${PSView.verticalHeaderWidth - 7}px`} onClick={PSView.scrollToHeader}\r\n\t\t>\r\n\t\t\t<div class=\"maintabbarbottom\"></div>\r\n\t\t\t<div class=\"scrollable-part\">\r\n\t\t\t\t<img\r\n\t\t\t\t\tclass=\"logo\"\r\n\t\t\t\t\tsrc={`https://${Config.routes.client}/favicon-256.png`}\r\n\t\t\t\t\talt=\"Pokémon Showdown! (beta)\"\r\n\t\t\t\t\twidth=\"50\" height=\"50\"\r\n\t\t\t\t/>\r\n\t\t\t\t<div class=\"tablist\" role=\"tablist\">\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t{PSHeader.renderRoomTab(PS.leftRoomList[0])}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t{PS.leftRoomList.slice(1).map(roomid => PSHeader.renderRoomTab(roomid))}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<ul class=\"siderooms\">\r\n\t\t\t\t\t\t{PS.rightRoomList.map(roomid => PSHeader.renderRoomTab(roomid))}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{null /* overflow */}\r\n\t\t\t<div class=\"userbar\">\r\n\t\t\t\t{this.renderUser()} {}\r\n\t\t\t\t<div style=\"float:right\">\r\n\t\t\t\t\t<button class=\"icon button\" data-href=\"volume\" title=\"Sound\" aria-label=\"Sound\" onDblClick={PSHeader.toggleMute}>\r\n\t\t\t\t\t\t<i class={PS.prefs.mute ? 'fa fa-volume-off' : 'fa fa-volume-up'}></i>\r\n\t\t\t\t\t</button> {}\r\n\t\t\t\t\t<button class=\"icon button\" data-href=\"options\" title=\"Options\" aria-label=\"Options\">\r\n\t\t\t\t\t\t<i class=\"fa fa-cog\" aria-hidden></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>;\r\n\t}\r\n\toverride render() {\r\n\t\tif (PS.leftPanelWidth === null) {\r\n\t\t\treturn this.renderVertical();\r\n\t\t}\r\n\t\treturn <div id=\"header\" class=\"header\" role=\"navigation\">\r\n\t\t\t<div class=\"maintabbarbottom\"></div>\r\n\t\t\t<div class=\"tabbar maintabbar\"><div class=\"inner-1\" role={PS.leftPanelWidth ? 'none' : 'tablist'}><div class=\"inner-2\">\r\n\t\t\t\t<ul class=\"maintabbar-left\" style={{ width: `${PS.leftPanelWidth}px` }} role={PS.leftPanelWidth ? 'tablist' : 'none'}>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tclass=\"logo\"\r\n\t\t\t\t\t\t\tsrc={`https://${Config.routes.client}/favicon-256.png`}\r\n\t\t\t\t\t\t\talt=\"Pokémon Showdown! (beta)\"\r\n\t\t\t\t\t\t\twidth=\"48\" height=\"48\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t{PSHeader.renderRoomTab(PS.leftRoomList[0])}\r\n\t\t\t\t\t{PS.leftRoomList.slice(1).map(roomid => PSHeader.renderRoomTab(roomid))}\r\n\t\t\t\t</ul>\r\n\t\t\t\t<ul class=\"maintabbar-right\" role={PS.leftPanelWidth ? 'tablist' : 'none'}>\r\n\t\t\t\t\t{PS.rightRoomList.map(roomid => PSHeader.renderRoomTab(roomid))}\r\n\t\t\t\t</ul>\r\n\t\t\t</div></div></div>\r\n\t\t\t<div class=\"overflow\">\r\n\t\t\t\t<button name=\"tablist\" class=\"button\" data-href=\"roomtablist\" aria-label=\"All tabs\" type=\"button\">\r\n\t\t\t\t\t<i class=\"fa fa-caret-down\" aria-hidden></i>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"userbar\">\r\n\t\t\t\t{this.renderUser()} {}\r\n\t\t\t\t<button class=\"icon button\" data-href=\"volume\" title=\"Sound\" aria-label=\"Sound\" onDblClick={PSHeader.toggleMute}>\r\n\t\t\t\t\t<i class={PS.prefs.mute ? 'fa fa-volume-off' : 'fa fa-volume-up'}></i>\r\n\t\t\t\t</button> {}\r\n\t\t\t\t<button class=\"icon button\" data-href=\"options\" title=\"Options\" aria-label=\"Options\">\r\n\t\t\t\t\t<i class=\"fa fa-cog\" aria-hidden></i>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>;\r\n\t}\r\n}\r\n\r\nexport class PSMiniHeader extends preact.Component {\r\n\toverride componentDidMount() {\r\n\t\twindow.addEventListener('scroll', this.handleScroll);\r\n\t}\r\n\toverride componentWillUnmount() {\r\n\t\twindow.removeEventListener('scroll', this.handleScroll);\r\n\t}\r\n\thandleScroll = () => {\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\toverride render() {\r\n\t\tif (PS.leftPanelWidth !== null) return null;\r\n\r\n\t\tlet notificationsCount = 0;\r\n\t\tfor (const roomid of PS.leftRoomList) {\r\n\t\t\tconst miniNotifications = PS.rooms[roomid]?.notifications;\r\n\t\t\tif (miniNotifications?.length) notificationsCount++;\r\n\t\t}\r\n\t\tconst { icon, title } = PSHeader.roomInfo(PS.panel);\r\n\t\tconst userColor = window.BattleLog && `color:${BattleLog.usernameColor(PS.user.userid)}`;\r\n\t\tconst showMenuButton = PSView.narrowMode;\r\n\t\tconst notifying = (\r\n\t\t\t!showMenuButton && !window.scrollX && Object.values(PS.rooms).some(room => room!.notifications.length)\r\n\t\t) ? ' notifying' : '';\r\n\t\tconst menuButton = !showMenuButton ? (\r\n\t\t\tnull\r\n\t\t) : window.scrollX ? (\r\n\t\t\t<button onClick={PSView.scrollToHeader} class={`mini-header-left ${notifying}`} aria-label=\"Menu\">\r\n\t\t\t\t{!!notificationsCount && <div class=\"notification-badge\">{notificationsCount}</div>}\r\n\t\t\t\t<i class=\"fa fa-bars\" aria-hidden></i>\r\n\t\t\t</button>\r\n\t\t) : (\r\n\t\t\t<button onClick={PSView.scrollToRoom} class=\"mini-header-left\" aria-label=\"Menu\">\r\n\t\t\t\t<i class=\"fa fa-arrow-right\" aria-hidden></i>\r\n\t\t\t</button>\r\n\t\t);\r\n\t\treturn <div class=\"mini-header\" style={`left:${PSView.verticalHeaderWidth + (PSView.narrowMode ? 0 : -1)}px;`}>\r\n\t\t\t{menuButton}\r\n\t\t\t{icon} {title}\r\n\t\t\t<button data-href=\"options\" class=\"mini-header-right\" aria-label=\"Options\">\r\n\t\t\t\t{PS.user.named ? <strong style={userColor}>{PS.user.name}</strong> : <i class=\"fa fa-cog\" aria-hidden></i>}\r\n\t\t\t</button>\r\n\t\t</div>;\r\n\t}\r\n}\r\n\r\npreact.render(<PSView />, document.body, document.getElementById('ps-frame')!);\r\n"],"mappings":"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","ignoreList":[]}