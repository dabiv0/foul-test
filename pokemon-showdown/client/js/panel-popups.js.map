{"version":3,"file":"panel-popups.js","names":["UserRoom","_PSRoom","options","_options$args","_this","call","classType","userid","name","isSelf","id","split","setName","args","username","_inheritsLoose","_proto","prototype","toID","PS","user","test","charAt","update","send","PSRoom","UserPanel","_PSRoomPanel","_this2","_len","arguments","length","Array","_key","apply","concat","lookup","ev","_querySelector","preventDefault","stopImmediatePropagation","room","props","base","querySelector","value","maybeReset","_querySelector2","_proto2","renderUser","mainmenu","userdetailsCache","slice","avatar","hideInteraction","startsWith","group","server","getGroup","groupName","type","preact","h","style","globalGroup","globalGroupName","roomsList","rooms","battlebuf","chatbuf","privatebuf","roomid","curRoom","roomrank","toRoomid","substr","p1","p2","ownBattle","toUserid","roomLink","href","title","isPrivate","push","unshift","away","status","buttonbar","disabled","named","parentRoomid","Dex","resolveAvatar","src","Config","routes","users","target","BattleLog","usernameColor","customgroup","render","showLookup","PSPanelWrapper","onSubmit","minWidth","onInput","onChange","PSRoomPanel","Model","location","UserOptionsPanel","_PSRoomPanel2","_this3","_len2","_key2","handleMute","setState","showMuteInput","showBanInput","showLockInput","handleBan","handleLock","handleCancel","showConfirm","handleConfirm","data","state","_this3$getTargets","getTargets","targetUser","targetRoom","cmd","action","duration","reason","close","handleAddFriend","_this3$getTargets2","requestSent","handleIgnore","_this3$getTargets3","handleUnignore","_this3$getTargets4","muteUser","_this3$base","hrMute","currentTarget","banUser","_this3$base2","weekBan","lockUser","_this3$base3","weekLock","isNamelock","isIgnoringUser","ignoring","prefs","ignore","_proto3","_targetRoom","_targetRoom2","_targetRoom3","_targetRoom4","_targetRoom5","_this$props$room$id$s","targetRoomid","getParent","_this4","_this$state$data","_this$state$data2","_this$state$data3","banPerms","mutePerms","_this$getTargets","userRoomGroup","canMute","includes","canBan","canLock","isVisible","actionName","width","onClick","endsWith","Fragment","placeholder","noURL","UserListPanel","_PSRoomPanel3","_proto4","parentRoom","Error","ChatUserList","VolumePanel","_PSRoomPanel4","_this5","_len3","_key3","setVolume","e","slider","set","Number","forceUpdate","setMute","checkbox","checked","_proto5","componentDidMount","_this6","subscriptions","subscribe","mute","effectvolume","min","max","step","onKeyUp","musicvolume","notifvolume","OptionsPanel","_PSRoomPanel5","_this7","_len4","_key4","setTheme","theme","setLayout","_PS","layout","rightPanel","setChatroomTimestamp","timestamp","Object","assign","timestamps","chatrooms","undefined","setPMsTimestamp","pms","handleShowStatusInput","showStatusInput","handleOnChange","elem","setting","loadSpriteData","noanim","editStatus","_statusInput$value","statusInput","showStatusUpdated","_proto6","subscribeTo","_PS$user$registered","height","verticalAlign","registered","className","selected","onepanel","bwgfx","nopastgens","blockPMs","blockChallenges","inchatpm","noselfhighlight","leavePopupRoom","refreshprompt","language","tournaments","GooglePasswordBox","_preact$Component","_proto7","_this8","window","gapiCallback","response","changeNameWithPassword","credential","needsGoogle","gapiLoaded","script","document","createElement","async","getElementsByTagName","appendChild","Component","LoginPanel","_PSRoomPanel6","_this9","_len5","_key5","handleSubmit","passwordBox","getUsername","changeName","reset","handleShowPassword","passwordShown","_proto8","_this10","success","setTimeout","focus","_this$props$room$args","_this$base","loginName","loggingIn","input","_ref","usernameBox","select","loginState","error","autocomplete","needsPassword","maxWidth","margin","AvatarsPanel","_PSRoomPanel7","_proto9","avatars","i","_window$BattleAvatarN","BattleAvatarNumbers","map","_ref2","Math","floor","BattleForfeitPanel","_PSRoomPanel8","_proto10","battleRoom","battle","rated","ReplacePlayerPanel","_PSRoomPanel9","_this11","_len6","_key6","handleReplacePlayer","_room$getParent","_this11$base","newPlayer","add","ended","playerSlot","_proto11","ChangePasswordPanel","_PSRoomPanel10","_this12","_len7","_key7","handleChangePassword","_this12$base","_this12$base2","_this12$base3","oldpassword","password","cpassword","errorMsg","PSLoginServer","query","then","actionerror","alert","err","console","message","_proto12","_this$state$errorMsg","readOnly","RegisterPanel","_PSRoomPanel11","_this13","_len8","_key8","handleRegisterUser","_this13$base","_this13$base2","_this13$base3","captcha","challstr","_data$curuser","curuser","loggedin","assertion","handleAssertion","_proto13","_this$state$errorMsg2","alt","rightPopup","BackgroundListPanel","_PSRoomPanel12","_this14","_len9","_key9","setBg","curtarget","bg","PSBackground","uploadBg","_this14$base","_input$files","files","file","reader","FileReader","onload","base64Image","result","onerror","readAsDataURL","_proto14","option","val","accept","ChatFormattingPanel","_PSRoomPanel13","_this15","_len10","_key10","curPref","chatformatting","_proto15","ctrl","PSView","isMac","hidegreentext","hideme","hidespoiler","hidelinks","hideinterstice","LeaveRoomPanel","_PSRoomPanel14","_proto16","BattleOptionsPanel","_PSRoomPanel15","_this16","_len11","_key11","handleHardcoreMode","mode","getBattleRoom","setHardcoreMode","handleIgnoreSpectators","ignoreSpects","chats","querySelectorAll","displaySetting","_i2","chat","small","text","innerText","isPlayerChat","display","scene","log","updateScroll","handleIgnoreOpponent","ignoreOpponent","resetToCurrentTurn","handleIgnoreNicks","ignoreNicks","handleAllSettings","disallowSpectators","_proto17","_battleRoom$battle","isPlayer","myPokemon","canOfferTie","turn","hardcoreMode","disallowspectators","ignorenicks","ignorespects","ignoreopp","autotimer","body","offsetWidth","rightpanelbattles","PopupRoom","_PSRoom2","_this17$args","_this17","_len12","_key12","returnValue","cancelValue","_proto18","destroy","_this$args","callback","PopupPanel","_PSRoomPanel16","_this18","_len13","_key13","_room$args","okValue","textbox","_proto19","_this$props$room$args2","parseMessage","sanitizeHTML","_room$args2","_room$args3","_room$args4","_room$args5","_room$args6","_room$args7","_room$args8","okButton","cancelButton","otherButtons","dangerouslySetInnerHTML","__html","RoomTabListPanel","_PSRoomPanel17","_this19","_len14","_key14","startingLayout","handleLayoutChange","_proto20","verticalTabs","leftRoomList","PSHeader","renderRoomTab","rightRoomList","BattleTimerPanel","_PSRoomPanel18","_proto21","kickingInactive","addRoomType"],"sources":["../src/panel-popups.tsx"],"sourcesContent":["import preact from \"../js/lib/preact\";\r\nimport { toID, toRoomid, toUserid, Dex } from \"./battle-dex\";\r\nimport type { ID } from \"./battle-dex-data\";\r\nimport { BattleLog } from \"./battle-log\";\r\nimport { PSLoginServer } from \"./client-connection\";\r\nimport { PSBackground } from \"./client-core\";\r\nimport {\r\n\tPS, PSRoom, Config, type RoomOptions, type PSLoginState, type RoomID, type TimestampOptions,\r\n} from \"./client-main\";\r\nimport { type BattleRoom } from \"./panel-battle\";\r\nimport { ChatUserList, type ChatRoom } from \"./panel-chat\";\r\nimport { PSRoomPanel, PSPanelWrapper, PSView } from \"./panels\";\r\nimport { PSHeader } from \"./panel-topbar\";\r\n\r\n/**\r\n * User popup\r\n */\r\n\r\nexport class UserRoom extends PSRoom {\r\n\toverride readonly classType = 'user';\r\n\tuserid!: ID;\r\n\tname!: string;\r\n\tisSelf!: boolean;\r\n\tconstructor(options: RoomOptions) {\r\n\t\tsuper(options);\r\n\t\tconst userid = (this.id.split('-')[1] || '') as ID;\r\n\t\tthis.setName(options.args?.username as string || userid);\r\n\t}\r\n\tsetName(name: string) {\r\n\t\tthis.name = name;\r\n\t\tthis.userid = toID(name);\r\n\t\tthis.isSelf = (this.userid === PS.user.userid);\r\n\t\tif (/[a-zA-Z0-9]/.test(this.name.charAt(0))) this.name = ' ' + this.name;\r\n\t\tthis.update(null);\r\n\t\tif (this.userid) PS.send(`/cmd userdetails ${this.userid}`);\r\n\t}\r\n}\r\n\r\nclass UserPanel extends PSRoomPanel<UserRoom> {\r\n\tstatic readonly id = 'user';\r\n\tstatic readonly routes = ['user-*', 'viewuser-*', 'users'];\r\n\tstatic readonly Model = UserRoom;\r\n\tstatic readonly location = 'popup';\r\n\r\n\trenderUser() {\r\n\t\tconst room = this.props.room;\r\n\t\tif (!room.userid) return null;\r\n\t\tconst user = PS.mainmenu.userdetailsCache[room.userid] || {\r\n\t\t\tuserid: room.userid, name: room.name.slice(1), avatar: '[loading]',\r\n\t\t};\r\n\t\tif (!user.avatar) {\r\n\t\t\t// offline; server doesn't know the actual username\r\n\t\t\tuser.name = room.name;\r\n\t\t}\r\n\t\tconst hideInteraction = room.id.startsWith('viewuser-');\r\n\r\n\t\tconst group = PS.server.getGroup(room.name);\r\n\t\tlet groupName: preact.ComponentChild = group.name || null;\r\n\t\tif (group.type === 'punishment') {\r\n\t\t\tgroupName = <span style=\"color:#777777\">{groupName}</span>;\r\n\t\t}\r\n\r\n\t\tconst globalGroup = PS.server.getGroup(user.group);\r\n\t\tlet globalGroupName: preact.ComponentChild = globalGroup.name && `Global ${globalGroup.name}` || null;\r\n\t\tif (globalGroup.type === 'punishment') {\r\n\t\t\tglobalGroupName = <span style=\"color:#777777\">{globalGroupName}</span>;\r\n\t\t}\r\n\t\tif (globalGroup.name === group.name) groupName = null;\r\n\r\n\t\tlet roomsList: preact.ComponentChild = null;\r\n\t\tif (user.rooms) {\r\n\t\t\tlet battlebuf = [];\r\n\t\t\tlet chatbuf = [];\r\n\t\t\tlet privatebuf = [];\r\n\t\t\tfor (let roomid in user.rooms) {\r\n\t\t\t\tif (roomid === 'global') continue;\r\n\t\t\t\tconst curRoom = user.rooms[roomid];\r\n\t\t\t\tlet roomrank: preact.ComponentChild = null;\r\n\t\t\t\tif (!/[A-Za-z0-9]/.test(roomid.charAt(0))) {\r\n\t\t\t\t\troomrank = <small style=\"color: #888; font-size: 100%\">{roomid.charAt(0)}</small>;\r\n\t\t\t\t}\r\n\t\t\t\troomid = toRoomid(roomid);\r\n\r\n\t\t\t\tif (roomid.substr(0, 7) === 'battle-') {\r\n\t\t\t\t\tconst p1 = curRoom.p1!.substr(1);\r\n\t\t\t\t\tconst p2 = curRoom.p2!.substr(1);\r\n\t\t\t\t\tconst ownBattle = (PS.user.userid === toUserid(p1) || PS.user.userid === toUserid(p2));\r\n\t\t\t\t\tconst roomLink = <a\r\n\t\t\t\t\t\thref={`/${roomid}`} class={'ilink' + (ownBattle || roomid in PS.rooms ? ' yours' : '')}\r\n\t\t\t\t\t\ttitle={`${p1 || '?'} v. ${p2 || '?'}`}\r\n\t\t\t\t\t>{roomrank}{roomid.substr(7)}</a>;\r\n\t\t\t\t\tif (curRoom.isPrivate) {\r\n\t\t\t\t\t\tif (privatebuf.length) privatebuf.push(', ');\r\n\t\t\t\t\t\tprivatebuf.push(roomLink);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (battlebuf.length) battlebuf.push(', ');\r\n\t\t\t\t\t\tbattlebuf.push(roomLink);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst roomLink = <a href={`/${roomid}`} class={'ilink' + (roomid in PS.rooms ? ' yours' : '')}>\r\n\t\t\t\t\t\t{roomrank}{roomid}\r\n\t\t\t\t\t</a>;\r\n\t\t\t\t\tif (curRoom.isPrivate) {\r\n\t\t\t\t\t\tif (privatebuf.length) privatebuf.push(\", \");\r\n\t\t\t\t\t\tprivatebuf.push(roomLink);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (chatbuf.length) chatbuf.push(', ');\r\n\t\t\t\t\t\tchatbuf.push(roomLink);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (battlebuf.length) battlebuf.unshift(<br />, <em>Battles:</em>, \" \");\r\n\t\t\tif (chatbuf.length) chatbuf.unshift(<br />, <em>Chatrooms:</em>, \" \");\r\n\t\t\tif (privatebuf.length) privatebuf.unshift(<br />, <em>Private rooms:</em>, \" \");\r\n\t\t\tif (battlebuf.length || chatbuf.length || privatebuf.length) {\r\n\t\t\t\troomsList = <small class=\"rooms\">{battlebuf}{chatbuf}{privatebuf}</small>;\r\n\t\t\t}\r\n\t\t} else if (user.rooms === false) {\r\n\t\t\troomsList = <strong class=\"offline\">OFFLINE</strong>;\r\n\t\t}\r\n\r\n\t\tconst isSelf = user.userid === PS.user.userid;\r\n\t\tlet away = false;\r\n\t\tlet status = null;\r\n\t\tif (user.status) {\r\n\t\t\taway = user.status.startsWith('!');\r\n\t\t\tstatus = away ? user.status.slice(1) : user.status;\r\n\t\t}\r\n\r\n\t\tconst buttonbar = [];\r\n\t\tif (!hideInteraction) {\r\n\t\t\tbuttonbar.push(isSelf ? (\r\n\t\t\t\t<p class=\"buttonbar\">\r\n\t\t\t\t\t<button class=\"button\" disabled>Challenge</button> {}\r\n\t\t\t\t\t<button class=\"button\" data-href=\"dm-\">Chat Self</button>\r\n\t\t\t\t</p>\r\n\t\t\t) : !PS.user.named ? (\r\n\t\t\t\t<p class=\"buttonbar\">\r\n\t\t\t\t\t<button class=\"button\" disabled>Challenge</button> {}\r\n\t\t\t\t\t<button class=\"button\" disabled>Chat</button> {}\r\n\t\t\t\t\t<button class=\"button\" disabled>{'\\u2026'}</button>\r\n\t\t\t\t</p>\r\n\t\t\t) : (\r\n\t\t\t\t<p class=\"buttonbar\">\r\n\t\t\t\t\t<button class=\"button\" data-href={`challenge-${user.userid}`}>Challenge</button> {}\r\n\t\t\t\t\t<button class=\"button\" data-href={`dm-${user.userid}`}>Chat</button> {}\r\n\t\t\t\t\t<button class=\"button\" data-href={`useroptions-${user.userid}-${room.parentRoomid || ''}`}>{'\\u2026'}</button>\r\n\t\t\t\t</p>\r\n\t\t\t));\r\n\t\t\tif (isSelf) {\r\n\t\t\t\tbuttonbar.push(\r\n\t\t\t\t\t<hr />,\r\n\t\t\t\t\t<p class=\"buttonbar\" style=\"text-align: right\">\r\n\t\t\t\t\t\t<button class=\"button\" data-href=\"login\"><i class=\"fa fa-pencil\" aria-hidden></i> Change name</button> {}\r\n\t\t\t\t\t\t<button class=\"button\" data-cmd=\"/logout\"><i class=\"fa fa-power-off\" aria-hidden></i> Log out</button>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst avatar = user.avatar !== '[loading]' ? Dex.resolveAvatar(`${user.avatar || 'unknown'}`) : null;\r\n\t\treturn [<div class=\"userdetails\">\r\n\t\t\t{avatar && (room.isSelf ? (\r\n\t\t\t\t<img src={avatar} class=\"trainersprite yours\" data-href=\"avatars\" />\r\n\t\t\t) : (\r\n\t\t\t\t<img src={avatar} class=\"trainersprite\" />\r\n\t\t\t))}\r\n\t\t\t<strong><a\r\n\t\t\t\thref={`//${Config.routes.users}/${user.userid}`} target=\"_blank\"\r\n\t\t\t\tstyle={`color: ${away ? '#888888' : BattleLog.usernameColor(user.userid)}`}\r\n\t\t\t>\r\n\t\t\t\t{user.name}\r\n\t\t\t</a></strong><br />\r\n\t\t\t{status && <div class=\"userstatus\">{status}</div>}\r\n\t\t\t{groupName && <div class=\"usergroup roomgroup\">{groupName}</div>}\r\n\t\t\t{globalGroupName && <div class=\"usergroup globalgroup\">{globalGroupName}</div>}\r\n\t\t\t{user.customgroup && <div class=\"usergroup globalgroup\">{user.customgroup}</div>}\r\n\t\t\t{!hideInteraction && roomsList}\r\n\t\t</div>, buttonbar];\r\n\t}\r\n\r\n\tlookup = (ev: Event) => {\r\n\t\tev.preventDefault();\r\n\t\tev.stopImmediatePropagation();\r\n\t\tconst room = this.props.room;\r\n\t\tconst username = this.base!.querySelector<HTMLInputElement>('input[name=username]')?.value;\r\n\t\troom.setName(username || '');\r\n\t};\r\n\tmaybeReset = (ev: Event) => {\r\n\t\tconst room = this.props.room;\r\n\t\tconst username = this.base!.querySelector<HTMLInputElement>('input[name=username]')?.value;\r\n\t\tif (toID(username) !== room.userid) {\r\n\t\t\troom.setName('');\r\n\t\t}\r\n\t};\r\n\r\n\toverride render() {\r\n\t\tconst room = this.props.room;\r\n\t\tconst showLookup = room.id === 'users';\r\n\r\n\t\treturn <PSPanelWrapper room={room}><div class=\"pad\">\r\n\t\t\t{showLookup && <form onSubmit={this.lookup} style={{ minWidth: '278px' }}>\r\n\t\t\t\t<label class=\"label\">\r\n\t\t\t\t\tUsername: {}\r\n\t\t\t\t\t<input type=\"search\" name=\"username\" class=\"textbox autofocus\" onInput={this.maybeReset} onChange={this.maybeReset} />\r\n\t\t\t\t</label>\r\n\t\t\t\t{!room.userid && <p class=\"buttonbar\">\r\n\t\t\t\t\t<button type=\"submit\" class=\"button\"><strong>Look up</strong></button> {}\r\n\t\t\t\t\t<button name=\"closeRoom\" class=\"button\">Close</button>\r\n\t\t\t\t</p>}\r\n\t\t\t\t{!!room.userid && <hr />}\r\n\t\t\t</form>}\r\n\r\n\t\t\t{this.renderUser()}\r\n\t\t</div></PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nclass UserOptionsPanel extends PSRoomPanel {\r\n\tstatic readonly id = 'useroptions';\r\n\tstatic readonly routes = ['useroptions-*'];\r\n\tstatic readonly location = 'popup';\r\n\tstatic readonly noURL = true;\r\n\tdeclare state: {\r\n\t\tshowMuteInput?: boolean,\r\n\t\tshowBanInput?: boolean,\r\n\t\tshowLockInput?: boolean,\r\n\t\tshowConfirm?: boolean,\r\n\t\trequestSent?: boolean,\r\n\t\tdata?: Record<string, string>,\r\n\t};\r\n\tgetTargets() {\r\n\t\tconst [, targetUser, targetRoomid] = this.props.room.id.split('-');\r\n\t\tlet targetRoom = (PS.rooms[targetRoomid] || null) as ChatRoom | null;\r\n\t\tif (targetRoom?.type !== 'chat') targetRoom = targetRoom?.getParent() as ChatRoom;\r\n\t\tif (targetRoom?.type !== 'chat') targetRoom = targetRoom?.getParent() as ChatRoom;\r\n\t\tif (targetRoom?.type !== 'chat') targetRoom = null;\r\n\t\treturn { targetUser: targetUser as ID, targetRoomid: targetRoomid as RoomID, targetRoom };\r\n\t}\r\n\r\n\thandleMute = (ev: Event) => {\r\n\t\tthis.setState({ showMuteInput: true, showBanInput: false, showLockInput: false });\r\n\t\tev.preventDefault();\r\n\t\tev.stopImmediatePropagation();\r\n\t};\r\n\thandleBan = (ev: Event) => {\r\n\t\tthis.setState({ showBanInput: true, showMuteInput: false, showLockInput: false });\r\n\t\tev.preventDefault();\r\n\t\tev.stopImmediatePropagation();\r\n\t};\r\n\thandleLock = (ev: Event) => {\r\n\t\tthis.setState({ showLockInput: true, showMuteInput: false, showBanInput: false });\r\n\t\tev.preventDefault();\r\n\t\tev.stopImmediatePropagation();\r\n\t};\r\n\r\n\thandleCancel = (ev: Event) => {\r\n\t\tthis.setState({ showBanInput: false, showMuteInput: false, showLockInput: false, showConfirm: false });\r\n\t\tev.preventDefault();\r\n\t\tev.stopImmediatePropagation();\r\n\t};\r\n\r\n\thandleConfirm = (ev: Event) => {\r\n\t\tconst data = this.state.data;\r\n\t\tif (!data) return;\r\n\t\tconst { targetUser, targetRoom } = this.getTargets();\r\n\r\n\t\tlet cmd = '';\r\n\t\tif (data.action === \"Mute\") {\r\n\t\t\tcmd += data.duration === \"1 hour\" ? \"/hourmute \" : \"/mute \";\r\n\t\t} else if (data.action === \"Ban\") {\r\n\t\t\tcmd += data.duration === \"1 week\" ? \"/weekban \" : \"/ban \";\r\n\t\t} else if (data.action === \"Lock\") {\r\n\t\t\tcmd += data.duration === \"1 week\" ? \"/weeklock \" : \"/lock \";\r\n\t\t} else if (data.action === \"Namelock\") {\r\n\t\t\tcmd += \"/namelock \";\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tcmd += `${targetUser} ${data.reason ? ',' + data.reason : ''}`;\r\n\t\ttargetRoom?.send(cmd);\r\n\t\tthis.close();\r\n\t};\r\n\r\n\thandleAddFriend = (ev: Event) => {\r\n\t\tconst { targetUser, targetRoom } = this.getTargets();\r\n\t\ttargetRoom?.send(`/friend add ${targetUser}`);\r\n\t\tthis.setState({ requestSent: true });\r\n\t\tev.preventDefault();\r\n\t\tev.stopImmediatePropagation();\r\n\t};\r\n\r\n\thandleIgnore = () => {\r\n\t\tconst { targetUser, targetRoom } = this.getTargets();\r\n\t\ttargetRoom?.send(`/ignore ${targetUser}`);\r\n\t\tthis.close();\r\n\t};\r\n\r\n\thandleUnignore = () => {\r\n\t\tconst { targetUser, targetRoom } = this.getTargets();\r\n\t\ttargetRoom?.send(`/unignore ${targetUser}`);\r\n\t\tthis.close();\r\n\t};\r\n\r\n\tmuteUser = (ev: Event) => {\r\n\t\tthis.setState({ showMuteInput: false });\r\n\t\tconst hrMute = (ev.currentTarget as HTMLButtonElement).value === \"1hr\";\r\n\t\tconst reason = this.base?.querySelector<HTMLInputElement>(\"input[name=mutereason]\")?.value;\r\n\t\tconst data = {\r\n\t\t\taction: 'Mute',\r\n\t\t\treason,\r\n\t\t\tduration: hrMute ? \"1 hour\" : \"7 minutes\",\r\n\t\t};\r\n\t\tthis.setState({ data, showConfirm: true });\r\n\t\tev.preventDefault();\r\n\t\tev.stopImmediatePropagation();\r\n\t};\r\n\r\n\tbanUser = (ev: Event) => {\r\n\t\tthis.setState({ showBanInput: false });\r\n\t\tconst weekBan = (ev.currentTarget as HTMLButtonElement).value === \"1wk\";\r\n\t\tconst reason = this.base?.querySelector<HTMLInputElement>(\"input[name=banreason]\")?.value;\r\n\t\tconst data = {\r\n\t\t\taction: 'Ban',\r\n\t\t\treason,\r\n\t\t\tduration: weekBan ? \"1 week\" : \"2 days\",\r\n\t\t};\r\n\t\tthis.setState({ data, showConfirm: true });\r\n\t\tev.preventDefault();\r\n\t\tev.stopImmediatePropagation();\r\n\t};\r\n\r\n\tlockUser = (ev: Event) => {\r\n\t\tthis.setState({ showLockInput: false });\r\n\t\tconst weekLock = (ev.currentTarget as HTMLButtonElement).value === \"1wk\";\r\n\t\tconst isNamelock = (ev.currentTarget as HTMLButtonElement).value === \"nmlk\";\r\n\t\tconst reason = this.base?.querySelector<HTMLInputElement>(\"input[name=lockreason]\")?.value;\r\n\t\tconst data = {\r\n\t\t\taction: isNamelock ? 'Namelock' : 'Lock',\r\n\t\t\treason,\r\n\t\t\tduration: weekLock ? \"1 week\" : \"2 days\",\r\n\t\t};\r\n\t\tthis.setState({ data, showConfirm: true });\r\n\t\tev.preventDefault();\r\n\t\tev.stopImmediatePropagation();\r\n\t};\r\n\r\n\tisIgnoringUser = (userid: string) => {\r\n\t\tconst ignoring = PS.prefs.ignore || {};\r\n\t\tif (ignoring[userid] === 1) return true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\toverride render() {\r\n\t\tconst room = this.props.room;\r\n\t\tconst banPerms = [\"@\", \"#\", \"~\"];\r\n\t\tconst mutePerms = [\"%\", ...banPerms];\r\n\t\tconst { targetUser, targetRoom } = this.getTargets();\r\n\t\tconst userRoomGroup = targetRoom?.users[PS.user.userid].charAt(0) || '';\r\n\t\tconst canMute = mutePerms.includes(userRoomGroup);\r\n\t\tconst canBan = banPerms.includes(userRoomGroup);\r\n\t\tconst canLock = mutePerms.includes(PS.user.group);\r\n\t\tconst isVisible = (actionName: string) => {\r\n\t\t\tif (actionName === 'mute') {\r\n\t\t\t\treturn canMute && !this.state.showLockInput && !this.state.showBanInput && !this.state.showConfirm;\r\n\t\t\t}\r\n\t\t\tif (actionName === 'ban') {\r\n\t\t\t\treturn canBan && !this.state.showLockInput && !this.state.showMuteInput && !this.state.showConfirm;\r\n\t\t\t}\r\n\t\t\tif (actionName === 'lock') {\r\n\t\t\t\treturn canLock && !this.state.showBanInput && !this.state.showMuteInput && !this.state.showConfirm;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn <PSPanelWrapper room={room} width={280}><div class=\"pad\">\r\n\t\t\t<p>\r\n\t\t\t\t{this.isIgnoringUser(targetUser) ? (\r\n\t\t\t\t\t<button onClick={this.handleUnignore} class=\"button\">\r\n\t\t\t\t\t\tUnignore\r\n\t\t\t\t\t</button>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<button onClick={this.handleIgnore} class=\"button\">\r\n\t\t\t\t\t\tIgnore\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<button data-href={`view-help-request-report-user-${targetUser}`} class=\"button\">\r\n\t\t\t\t\tReport\r\n\t\t\t\t</button>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t{this.state.requestSent ? (\r\n\t\t\t\t\t<button class=\"button disabled\">\r\n\t\t\t\t\t\tSent request\r\n\t\t\t\t\t</button>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<button onClick={this.handleAddFriend} class=\"button\">\r\n\t\t\t\t\t\tAdd friend\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\t\t\t</p>\r\n\t\t\t{(canMute || canBan || canLock) && <hr />}\r\n\t\t\t{this.state.showConfirm && <p>\r\n\t\t\t\t<small>\r\n\t\t\t\t\t{this.state.data?.action} <b>{targetUser}</b> {}\r\n\t\t\t\t\t{!this.state.data?.action.endsWith('ock') ? <>from <b>{targetRoom?.title}</b></> : ''} for {this.state.data?.duration}?\r\n\t\t\t\t</small>\r\n\t\t\t\t<p class=\"buttonbar\">\r\n\t\t\t\t\t<button class=\"button\" onClick={this.handleConfirm}>\r\n\t\t\t\t\t\t<i class=\"fa fa-confirm\" aria-hidden></i> Confirm\r\n\t\t\t\t\t</button> {}\r\n\t\t\t\t\t<button class=\"button\" onClick={this.handleCancel}>\r\n\t\t\t\t\t\tCancel\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</p>\r\n\t\t\t</p>}\r\n\t\t\t<p class=\"buttonbar\">\r\n\t\t\t\t{isVisible('mute') && (this.state.showMuteInput ? (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label class=\"label\">\r\n\t\t\t\t\t\t\tReason: {}\r\n\t\t\t\t\t\t\t<input name=\"mutereason\" class=\"textbox autofocus\" placeholder=\"Mute reason (optional)\" />\r\n\t\t\t\t\t\t</label> {} <br />\r\n\t\t\t\t\t\t<button class=\"button\" onClick={this.muteUser} value=\"7min\">For 7 Mins</button> {}\r\n\t\t\t\t\t\t<button class=\"button\" onClick={this.muteUser} value=\"1hr\">For 1 Hour</button> {}\r\n\t\t\t\t\t\t<button class=\"button\" onClick={this.handleCancel}> Cancel</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<button class=\"button\" onClick={this.handleMute}>\r\n\t\t\t\t\t\t<i class=\"fa fa-hourglass-half\" aria-hidden></i> Mute\r\n\t\t\t\t\t</button>\r\n\t\t\t\t))} {}\r\n\t\t\t\t{isVisible('ban') && (this.state.showBanInput ? (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label class=\"label\">\r\n\t\t\t\t\t\t\tReason: {}\r\n\t\t\t\t\t\t\t<input name=\"banreason\" class=\"textbox autofocus\" placeholder=\"Ban reason (optional)\" />\r\n\t\t\t\t\t\t</label><br />\r\n\t\t\t\t\t\t<button class=\"button\" onClick={this.banUser} value=\"2d\">For 2 Days</button> {}\r\n\t\t\t\t\t\t<button class=\"button\" onClick={this.banUser} value=\"1wk\">For 1 Week</button> {}\r\n\t\t\t\t\t\t<button class=\"button\" onClick={this.handleCancel}>Cancel</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<button class=\"button\" onClick={this.handleBan}>\r\n\t\t\t\t\t\t<i class=\"fa fa-gavel\" aria-hidden></i> Ban\r\n\t\t\t\t\t</button>\r\n\t\t\t\t))} {}\r\n\t\t\t\t{isVisible('lock') && (this.state.showLockInput ? (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label class=\"label\">\r\n\t\t\t\t\t\t\tReason: {}\r\n\t\t\t\t\t\t\t<input name=\"lockreason\" class=\"textbox autofocus\" placeholder=\"Lock reason (optional)\" />\r\n\t\t\t\t\t\t</label><br />\r\n\t\t\t\t\t\t<button class=\"button\" onClick={this.lockUser} value=\"2d\">For 2 Days</button> {}\r\n\t\t\t\t\t\t<button class=\"button\" onClick={this.lockUser} value=\"1wk\">For 1 Week</button> {}\r\n\t\t\t\t\t\t<button class=\"button\" onClick={this.lockUser} value=\"nmlk\">Namelock</button> {}\r\n\t\t\t\t\t\t<button class=\"button\" onClick={this.handleCancel}>Cancel</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<button class=\"button\" onClick={this.handleLock}>\r\n\t\t\t\t\t\t<i class=\"fa fa-lock\" aria-hidden></i> Lock/Namelock\r\n\t\t\t\t\t</button>\r\n\t\t\t\t))}\r\n\t\t\t</p>\r\n\t\t</div></PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nclass UserListPanel extends PSRoomPanel {\r\n\tstatic readonly id = 'userlist';\r\n\tstatic readonly routes = ['userlist'];\r\n\tstatic readonly location = 'semimodal-popup';\r\n\tstatic readonly noURL = true;\r\n\toverride render() {\r\n\t\tconst room = this.props.room;\r\n\t\tconst parentRoom = room.getParent() as ChatRoom;\r\n\t\tif (parentRoom.type !== 'chat' && parentRoom.type !== 'battle') {\r\n\t\t\tthrow new Error(`UserListPanel: ${room.id} is not a chat room`);\r\n\t\t}\r\n\r\n\t\treturn <PSPanelWrapper room={room} width={280}><div class=\"pad\">\r\n\t\t\t<ChatUserList room={parentRoom} static />\r\n\t\t</div></PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nclass VolumePanel extends PSRoomPanel {\r\n\tstatic readonly id = 'volume';\r\n\tstatic readonly routes = ['volume'];\r\n\tstatic readonly location = 'popup';\r\n\r\n\tsetVolume = (e: Event) => {\r\n\t\tconst slider = e.currentTarget as HTMLInputElement;\r\n\t\tPS.prefs.set(slider.name as 'effectvolume', Number(slider.value));\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\tsetMute = (e: Event) => {\r\n\t\tconst checkbox = e.currentTarget as HTMLInputElement;\r\n\t\tPS.prefs.set('mute', !!checkbox.checked);\r\n\t\tPS.update();\r\n\t};\r\n\toverride componentDidMount() {\r\n\t\tsuper.componentDidMount();\r\n\t\tthis.subscriptions.push(PS.prefs.subscribe(() => {\r\n\t\t\tthis.forceUpdate();\r\n\t\t}));\r\n\t}\r\n\toverride render() {\r\n\t\tconst room = this.props.room;\r\n\t\treturn <PSPanelWrapper room={room}><div class=\"pad\">\r\n\t\t\t<h3>Volume</h3>\r\n\t\t\t<p class=\"volume\">\r\n\t\t\t\t<label class=\"optlabel\">\r\n\t\t\t\t\tEffects: <span class=\"value\">{!PS.prefs.mute && PS.prefs.effectvolume ? `${PS.prefs.effectvolume}%` : `-`}</span>\r\n\t\t\t\t</label>\r\n\t\t\t\t{PS.prefs.mute ?\r\n\t\t\t\t\t<em>(muted)</em> :\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"range\" min=\"0\" max=\"100\" step=\"1\" name=\"effectvolume\" value={PS.prefs.effectvolume}\r\n\t\t\t\t\t\tonChange={this.setVolume} onInput={this.setVolume} onKeyUp={this.setVolume}\r\n\t\t\t\t\t/>}\r\n\t\t\t</p>\r\n\t\t\t<p class=\"volume\">\r\n\t\t\t\t<label class=\"optlabel\">\r\n\t\t\t\t\tMusic: <span class=\"value\">{!PS.prefs.mute && PS.prefs.musicvolume ? `${PS.prefs.musicvolume}%` : `-`}</span>\r\n\t\t\t\t</label>\r\n\t\t\t\t{PS.prefs.mute ?\r\n\t\t\t\t\t<em>(muted)</em> :\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"range\" min=\"0\" max=\"100\" step=\"1\" name=\"musicvolume\" value={PS.prefs.musicvolume}\r\n\t\t\t\t\t\tonChange={this.setVolume} onInput={this.setVolume} onKeyUp={this.setVolume}\r\n\t\t\t\t\t/>}\r\n\t\t\t</p>\r\n\t\t\t<p class=\"volume\">\r\n\t\t\t\t<label class=\"optlabel\">\r\n\t\t\t\t\tNotifications: {}\r\n\t\t\t\t\t<span class=\"value\">{!PS.prefs.mute && PS.prefs.notifvolume ? `${PS.prefs.notifvolume}%` : `-`}</span>\r\n\t\t\t\t</label>\r\n\t\t\t\t{PS.prefs.mute ?\r\n\t\t\t\t\t<em>(muted)</em> :\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"range\" min=\"0\" max=\"100\" step=\"1\" name=\"notifvolume\" value={PS.prefs.notifvolume}\r\n\t\t\t\t\t\tonChange={this.setVolume} onInput={this.setVolume} onKeyUp={this.setVolume}\r\n\t\t\t\t\t/>}\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\">\r\n\t\t\t\t\t<input type=\"checkbox\" name=\"mute\" checked={PS.prefs.mute} onChange={this.setMute} /> Mute all\r\n\t\t\t\t</label>\r\n\t\t\t</p>\r\n\t\t</div></PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nclass OptionsPanel extends PSRoomPanel {\r\n\tstatic readonly id = 'options';\r\n\tstatic readonly routes = ['options'];\r\n\tstatic readonly location = 'semimodal-popup';\r\n\tdeclare state: { showStatusInput?: boolean, showStatusUpdated?: boolean };\r\n\r\n\toverride componentDidMount() {\r\n\t\tsuper.componentDidMount();\r\n\t\tthis.subscribeTo(PS.user);\r\n\t}\r\n\tsetTheme = (e: Event) => {\r\n\t\tconst theme = (e.currentTarget as HTMLSelectElement).value as 'light' | 'dark' | 'system';\r\n\t\tPS.prefs.set('theme', theme);\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\tsetLayout = (e: Event) => {\r\n\t\tconst layout = (e.currentTarget as HTMLSelectElement).value;\r\n\t\tswitch (layout) {\r\n\t\tcase '':\r\n\t\t\tPS.prefs.set('onepanel', null);\r\n\t\t\tPS.rightPanel ||= PS.rooms['rooms'] || null;\r\n\t\t\tbreak;\r\n\t\tcase 'onepanel':\r\n\t\t\tPS.prefs.set('onepanel', true);\r\n\t\t\tbreak;\r\n\t\tcase 'vertical':\r\n\t\t\tPS.prefs.set('onepanel', 'vertical');\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tPS.update();\r\n\t};\r\n\tsetChatroomTimestamp = (ev: Event) => {\r\n\t\tconst timestamp = (ev.currentTarget as HTMLSelectElement).value as TimestampOptions;\r\n\t\tPS.prefs.set('timestamps', { ...PS.prefs.timestamps, chatrooms: timestamp || undefined });\r\n\t};\r\n\tsetPMsTimestamp = (ev: Event) => {\r\n\t\tconst timestamp = (ev.currentTarget as HTMLSelectElement).value as TimestampOptions;\r\n\t\tPS.prefs.set('timestamps', { ...PS.prefs.timestamps, pms: timestamp || undefined });\r\n\t};\r\n\r\n\thandleShowStatusInput = (ev: Event) => {\r\n\t\tev.preventDefault();\r\n\t\tev.stopImmediatePropagation();\r\n\t\tthis.setState({ showStatusInput: !this.state.showStatusInput });\r\n\t};\r\n\r\n\thandleOnChange = (ev: Event) => {\r\n\t\tlet elem = ev.currentTarget as HTMLInputElement;\r\n\t\tlet setting = elem.name;\r\n\t\tlet value = elem.checked;\r\n\t\tswitch (setting) {\r\n\t\tcase 'blockPMs': {\r\n\t\t\tPS.prefs.set(\"blockPMs\", value);\r\n\t\t\tPS.send(value ? '/blockpms' : '/unblockpms');\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 'blockChallenges': {\r\n\t\t\tPS.prefs.set(\"blockChallenges\", value);\r\n\t\t\tPS.send(value ? '/blockchallenges' : '/unblockchallenges');\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 'bwgfx': {\r\n\t\t\tPS.prefs.set('bwgfx', value);\r\n\t\t\tDex.loadSpriteData(value || PS.prefs.noanim ? 'bw' : 'xy');\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 'language': {\r\n\t\t\tPS.prefs.set(setting, elem.value);\r\n\t\t\tPS.send(`/language ${elem.value}`);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 'tournaments': {\r\n\t\t\tPS.prefs.set(setting, !elem.value ? null : elem.value as 'hide' | 'notify');\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 'refreshprompt':\r\n\t\tcase 'noanim':\r\n\t\tcase 'nopastgens':\r\n\t\tcase 'noselfhighlight':\r\n\t\tcase 'leavePopupRoom':\r\n\t\tcase 'inchatpm':\r\n\t\t\tPS.prefs.set(setting, value);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\teditStatus = (ev: Event) => {\r\n\t\tconst statusInput = this.base!.querySelector<HTMLInputElement>('input[name=statustext]');\r\n\t\tPS.send(statusInput?.value?.length ? `/status ${statusInput.value}` : `/clearstatus`);\r\n\t\tthis.setState({ showStatusUpdated: true, showStatusInput: false });\r\n\t\tev.preventDefault();\r\n\t\tev.stopImmediatePropagation();\r\n\t};\r\n\r\n\toverride render() {\r\n\t\tconst room = this.props.room;\r\n\t\treturn <PSPanelWrapper room={room}><div class=\"pad\">\r\n\t\t\t<p>\r\n\t\t\t\t<img\r\n\t\t\t\t\tclass=\"trainersprite yours\" width=\"40\" height=\"40\" style={{ verticalAlign: 'middle' }}\r\n\t\t\t\t\tsrc={Dex.resolveAvatar(`${PS.user.avatar}`)} data-href=\"avatars\"\r\n\t\t\t\t/> {}\r\n\t\t\t\t<strong>{PS.user.name}</strong>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<button class=\"button\" data-href=\"avatars\"> Avatar...</button>\r\n\t\t\t</p>\r\n\r\n\t\t\t{this.state.showStatusInput ? (\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<input name=\"statustext\" />\r\n\t\t\t\t\t<button class=\"button\" onClick={this.editStatus}><i class=\"fa fa-pencil\" aria-hidden></i></button>\r\n\t\t\t\t</p>\r\n\t\t\t) : (\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<button class=\"button\" onClick={this.handleShowStatusInput} disabled={this.state.showStatusUpdated}>\r\n\t\t\t\t\t\t{this.state.showStatusUpdated ? 'Status Updated' : 'Status...'}</button>\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\r\n\t\t\t{PS.user.named && (PS.user.registered?.userid === PS.user.userid ?\r\n\t\t\t\t<button className=\"button\" data-href=\"changepassword\">Password...</button> :\r\n\t\t\t\t<button className=\"button\" data-href=\"register\">Register</button>)}\r\n\r\n\t\t\t<hr />\r\n\t\t\t<h3>Graphics</h3>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"optlabel\">Theme: <select name=\"theme\" class=\"button\" onChange={this.setTheme}>\r\n\t\t\t\t\t<option value=\"light\" selected={PS.prefs.theme === 'light'}>Light</option>\r\n\t\t\t\t\t<option value=\"dark\" selected={PS.prefs.theme === 'dark'}>Dark</option>\r\n\t\t\t\t\t<option value=\"system\" selected={PS.prefs.theme === 'system'}>Match system theme</option>\r\n\t\t\t\t</select></label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"optlabel\">Layout: <select name=\"layout\" class=\"button\" onChange={this.setLayout}>\r\n\t\t\t\t\t<option value=\"\" selected={!PS.prefs.onepanel}>Two panels (if wide enough)</option>\r\n\t\t\t\t\t<option value=\"onepanel\" selected={PS.prefs.onepanel === true}>Single panel</option>\r\n\t\t\t\t\t<option value=\"vertical\" selected={PS.prefs.onepanel === 'vertical'}>Vertical tabs</option>\r\n\t\t\t\t</select></label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"optlabel\">\r\n\t\t\t\t\tBackground: <button class=\"button\" data-href=\"changebackground\">\r\n\t\t\t\t\t\tChange Background\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\"> <input\r\n\t\t\t\t\tname=\"noanim\" checked={PS.prefs.noanim || false} type=\"checkbox\" onChange={this.handleOnChange}\r\n\t\t\t\t/> Disable animations</label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\"><input\r\n\t\t\t\t\tname=\"bwgfx\" checked={PS.prefs.bwgfx || false} type=\"checkbox\" onChange={this.handleOnChange}\r\n\t\t\t\t/>  Use 2D sprites instead of 3D models</label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\"><input\r\n\t\t\t\t\tname=\"nopastgens\" checked={PS.prefs.nopastgens || false} type=\"checkbox\" onChange={this.handleOnChange}\r\n\t\t\t\t/> Use modern sprites for past generations</label>\r\n\t\t\t</p>\r\n\t\t\t<hr />\r\n\t\t\t<h3>Chat</h3>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\"><input\r\n\t\t\t\t\tname=\"blockPMs\" checked={PS.prefs.blockPMs || false} type=\"checkbox\" onChange={this.handleOnChange}\r\n\t\t\t\t/> Block PMs</label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\"><input\r\n\t\t\t\t\tname=\"blockChallenges\" checked={PS.prefs.blockChallenges || false} type=\"checkbox\" onChange={this.handleOnChange}\r\n\t\t\t\t/> Block challenges</label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\"><input\r\n\t\t\t\t\tname=\"inchatpm\" checked={PS.prefs.inchatpm || false} type=\"checkbox\" onChange={this.handleOnChange}\r\n\t\t\t\t/> Show PMs in chatrooms</label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\"><input\r\n\t\t\t\t\tname=\"noselfhighlight\" checked={PS.prefs.noselfhighlight || false} type=\"checkbox\" onChange={this.handleOnChange}\r\n\t\t\t\t/> Do not highlight when your name is said in chat</label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\"><input\r\n\t\t\t\t\tname=\"leavePopupRoom\" checked={PS.prefs.leavePopupRoom || false} type=\"checkbox\" onChange={this.handleOnChange}\r\n\t\t\t\t/> Confirm before leaving a room</label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\"><input\r\n\t\t\t\t\tname=\"refreshprompt\" checked={PS.prefs.refreshprompt || false} type=\"checkbox\" onChange={this.handleOnChange}\r\n\t\t\t\t/> Confirm before refreshing</label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"optlabel\">\r\n\t\t\t\t\tLanguage: {}\r\n\t\t\t\t\t<select name=\"language\" onChange={this.handleOnChange} class=\"button\">\r\n\t\t\t\t\t\t<option value=\"german\" selected={PS.prefs.language === \"german\"}>Deutsch</option>\r\n\t\t\t\t\t\t<option value=\"english\" selected={PS.prefs.language === \"english\"}>English</option>\r\n\t\t\t\t\t\t<option value=\"spanish\" selected={PS.prefs.language === \"spanish\"}>Español</option>\r\n\t\t\t\t\t\t<option value=\"french\" selected={PS.prefs.language === \"french\"}>Français</option>\r\n\t\t\t\t\t\t<option value=\"italian\" selected={PS.prefs.language === \"italian\"}>Italiano</option>\r\n\t\t\t\t\t\t<option value=\"dutch\" selected={PS.prefs.language === \"dutch\"}>Nederlands</option>\r\n\t\t\t\t\t\t<option value=\"portuguese\" selected={PS.prefs.language === \"portuguese\"}>Português</option>\r\n\t\t\t\t\t\t<option value=\"turkish\" selected={PS.prefs.language === \"turkish\"}>Türkçe</option>\r\n\t\t\t\t\t\t<option value=\"hindi\" selected={PS.prefs.language === \"hindi\"}>हिंदी</option>\r\n\t\t\t\t\t\t<option value=\"japanese\" selected={PS.prefs.language === \"japanese\"}>日本語</option>\r\n\t\t\t\t\t\t<option value=\"simplifiedchinese\" selected={PS.prefs.language === \"simplifiedchinese\"}>简体中文</option>\r\n\t\t\t\t\t\t<option value=\"traditionalchinese\" selected={PS.prefs.language === \"traditionalchinese\"}>中文</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"optlabel\">\r\n\t\t\t\t\tTournaments: <select name=\"tournaments\" class=\"button\" onChange={this.handleOnChange}>\r\n\t\t\t\t\t\t<option value=\"\" selected={!PS.prefs.tournaments}>Notify when joined</option>\r\n\t\t\t\t\t\t<option value=\"notify\" selected={PS.prefs.tournaments === \"notify\"}>Always notify</option>\r\n\t\t\t\t\t\t<option value=\"hide\" selected={PS.prefs.tournaments === \"hide\"}>Hide</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"optlabel\">Timestamps: <select name=\"layout\" class=\"button\" onChange={this.setChatroomTimestamp}>\r\n\t\t\t\t\t<option value=\"\" selected={!PS.prefs.timestamps.chatrooms}>Off</option>\r\n\t\t\t\t\t<option value=\"minutes\" selected={PS.prefs.timestamps.chatrooms === \"minutes\"}>[HH:MM]</option>\r\n\t\t\t\t\t<option value=\"seconds\" selected={PS.prefs.timestamps.chatrooms === \"seconds\"}>[HH:MM:SS]</option>\r\n\t\t\t\t</select></label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"optlabel\">Timestamps in DMs: <select name=\"layout\" class=\"button\" onChange={this.setPMsTimestamp}>\r\n\t\t\t\t\t<option value=\"\" selected={!PS.prefs.timestamps.pms}>Off</option>\r\n\t\t\t\t\t<option value=\"minutes\" selected={PS.prefs.timestamps.pms === \"minutes\"}>[HH:MM]</option>\r\n\t\t\t\t\t<option value=\"seconds\" selected={PS.prefs.timestamps.pms === \"seconds\"}>[HH:MM:SS]</option>\r\n\t\t\t\t</select></label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"optlabel\">\r\n\t\t\t\t\tChat preferences: {}\r\n\t\t\t\t\t<button class=\"button\" data-href=\"chatformatting\">Text formatting...</button>\r\n\t\t\t\t</label>\r\n\t\t\t</p>\r\n\t\t\t<hr />\r\n\t\t\t{PS.user.named ? <p class=\"buttonbar\" style=\"text-align: right\">\r\n\t\t\t\t<button class=\"button\" data-href=\"login\"><i class=\"fa fa-pencil\" aria-hidden></i> Change name</button> {}\r\n\t\t\t\t<button class=\"button\" data-cmd=\"/logout\"><i class=\"fa fa-power-off\" aria-hidden></i> Log out</button>\r\n\t\t\t</p> : <p class=\"buttonbar\" style=\"text-align: right\">\r\n\t\t\t\t<button class=\"button\" data-href=\"login\"><i class=\"fa fa-pencil\" aria-hidden></i> Choose name</button>\r\n\t\t\t</p> }\r\n\t\t</div></PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nclass GooglePasswordBox extends preact.Component<{ name: string }> {\r\n\toverride componentDidMount() {\r\n\t\twindow.gapiCallback = (response: any) => {\r\n\t\t\tPS.user.changeNameWithPassword(this.props.name, response.credential, { needsGoogle: true });\r\n\t\t};\r\n\r\n\t\tPS.user.gapiLoaded = true;\r\n\t\tconst script = document.createElement('script');\r\n\t\tscript.async = true;\r\n\t\tscript.src = 'https://accounts.google.com/gsi/client';\r\n\t\tdocument.getElementsByTagName('head')[0].appendChild(script);\r\n\t}\r\n\toverride render() {\r\n\t\treturn <div class=\"google-password-box\">\r\n\t\t\t<div\r\n\t\t\t\tid=\"g_id_onload\" data-client_id=\"912270888098-jjnre816lsuhc5clj3vbcn4o2q7p4qvk.apps.googleusercontent.com\"\r\n\t\t\t\tdata-context=\"signin\" data-ux_mode=\"popup\" data-callback=\"gapiCallback\" data-auto_prompt=\"false\"\r\n\t\t\t></div>\r\n\t\t\t<div\r\n\t\t\t\tclass=\"g_id_signin\" data-type=\"standard\" data-shape=\"pill\" data-theme=\"filled_blue\" data-text=\"continue_with\"\r\n\t\t\t\tdata-size=\"large\" data-logo_alignment=\"left\" data-auto_select=\"true\" data-itp_support=\"true\"\r\n\t\t\t\tstyle=\"width:fit-content;margin:0 auto\"\r\n\t\t\t>[loading Google log-in button]</div>\r\n\t\t</div>;\r\n\t}\r\n}\r\n\r\nclass LoginPanel extends PSRoomPanel {\r\n\tstatic readonly id = 'login';\r\n\tstatic readonly routes = ['login'];\r\n\tstatic readonly location = 'semimodal-popup';\r\n\tdeclare state: { passwordShown?: boolean };\r\n\r\n\toverride componentDidMount() {\r\n\t\tsuper.componentDidMount();\r\n\t\tthis.subscriptions.push(PS.user.subscribe(args => {\r\n\t\t\tif (args) {\r\n\t\t\t\tif (args.success) {\r\n\t\t\t\t\tthis.close();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.props.room.args = args;\r\n\t\t\t\tsetTimeout(() => this.focus(), 1);\r\n\t\t\t}\r\n\t\t\tthis.forceUpdate();\r\n\t\t}));\r\n\t}\r\n\tgetUsername() {\r\n\t\tconst loginName = PS.user.loggingIn || this.props.room.args?.name as string;\r\n\t\tif (loginName) return loginName;\r\n\r\n\t\tconst input = this.base?.querySelector<HTMLInputElement>('input[name=username]');\r\n\t\tif (input && !input.disabled) {\r\n\t\t\treturn input.value;\r\n\t\t}\r\n\t\treturn PS.user.named ? PS.user.name : '';\r\n\t}\r\n\thandleSubmit = (ev: Event) => {\r\n\t\tev.preventDefault();\r\n\t\tconst passwordBox = this.base!.querySelector<HTMLInputElement>('input[name=password]');\r\n\t\tif (passwordBox) {\r\n\t\t\tPS.user.changeNameWithPassword(this.getUsername(), passwordBox.value);\r\n\t\t} else {\r\n\t\t\tPS.user.changeName(this.getUsername());\r\n\t\t}\r\n\t};\r\n\tupdate = () => {\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\toverride focus() {\r\n\t\tconst passwordBox = this.base!.querySelector<HTMLInputElement>('input[name=password]');\r\n\t\tconst usernameBox = this.base!.querySelector<HTMLInputElement>('input[name=username]');\r\n\t\t(passwordBox || usernameBox)?.select();\r\n\t}\r\n\treset = (ev: Event) => {\r\n\t\tev.preventDefault();\r\n\t\tev.stopImmediatePropagation();\r\n\t\tthis.props.room.args = null;\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\thandleShowPassword = (ev: Event) => {\r\n\t\tev.preventDefault();\r\n\t\tev.stopImmediatePropagation();\r\n\t\tthis.setState({ passwordShown: !this.state.passwordShown });\r\n\t};\r\n\toverride render() {\r\n\t\tconst room = this.props.room;\r\n\t\tconst loginState = room.args as PSLoginState;\r\n\t\treturn <PSPanelWrapper room={room} width={280}><div class=\"pad\">\r\n\t\t\t<h3>Log in</h3>\r\n\t\t\t<form onSubmit={this.handleSubmit}>\r\n\t\t\t\t{loginState?.error && <p class=\"error\">{loginState.error}</p>}\r\n\t\t\t\t<p><label class=\"label\">\r\n\t\t\t\t\tUsername: <small class=\"preview\" style={`color:${BattleLog.usernameColor(toID(this.getUsername()))}`}>(color)</small>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclass=\"textbox\" type=\"text\" name=\"username\"\r\n\t\t\t\t\t\tonInput={this.update} onChange={this.update} autocomplete=\"username\"\r\n\t\t\t\t\t\tvalue={this.getUsername()} disabled={!!PS.user.loggingIn || !!loginState?.name}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</label></p>\r\n\t\t\t\t{PS.user.named && !loginState && <p>\r\n\t\t\t\t\t<small>(Others will be able to see your name change. To change name privately, use \"Log out\")</small>\r\n\t\t\t\t</p>}\r\n\t\t\t\t{loginState?.needsPassword && <p>\r\n\t\t\t\t\t<i class=\"fa fa-level-up fa-rotate-90\" aria-hidden></i> <strong>if you registered this name:</strong>\r\n\t\t\t\t\t<label class=\"label\">\r\n\t\t\t\t\t\tPassword: {}\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclass=\"textbox\" type={this.state.passwordShown ? 'text' : 'password'} name=\"password\"\r\n\t\t\t\t\t\t\tautocomplete=\"current-password\" style=\"width:173px\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"button\" onClick={this.handleShowPassword} aria-label=\"Show password\"\r\n\t\t\t\t\t\t\tclass=\"button\" style=\"float:right;margin:-21px 0 10px;padding: 2px 6px\"\r\n\t\t\t\t\t\t><i class=\"fa fa-eye\" aria-hidden></i></button>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</p>}\r\n\t\t\t\t{loginState?.needsGoogle && <>\r\n\t\t\t\t\t<p><i class=\"fa fa-level-up fa-rotate-90\" aria-hidden></i> <strong>if you registered this name:</strong></p>\r\n\t\t\t\t\t<p><GooglePasswordBox name={this.getUsername()} /></p>\r\n\t\t\t\t</>}\r\n\t\t\t\t<p class=\"buttonbar\">\r\n\t\t\t\t\t{PS.user.loggingIn ? (\r\n\t\t\t\t\t\t<button disabled class=\"cur\">Logging in...</button>\r\n\t\t\t\t\t) : loginState?.needsPassword ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<button type=\"submit\" class=\"button\"><strong>Log in</strong></button> {}\r\n\t\t\t\t\t\t\t<button type=\"button\" onClick={this.reset} class=\"button\">Cancel</button>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) : loginState?.needsGoogle ? (\r\n\t\t\t\t\t\t<button type=\"button\" onClick={this.reset} class=\"button\">Cancel</button>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<button type=\"submit\" class=\"button\"><strong>Choose name</strong></button> {}\r\n\t\t\t\t\t\t\t<button type=\"button\" name=\"closeRoom\" class=\"button\">Cancel</button>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)} {}\r\n\t\t\t\t</p>\r\n\t\t\t\t{loginState?.name && <div>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<i class=\"fa fa-level-up fa-rotate-90\" aria-hidden></i> <strong>if not:</strong>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p style={{ maxWidth: '210px', margin: '0 auto' }}>\r\n\t\t\t\t\t\tThis is someone else's account. Sorry.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p class=\"buttonbar\">\r\n\t\t\t\t\t\t<button class=\"button\" onClick={this.reset}>Try another name</button>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>}\r\n\t\t\t</form>\r\n\t\t</div></PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nclass AvatarsPanel extends PSRoomPanel {\r\n\tstatic readonly id = 'avatars';\r\n\tstatic readonly routes = ['avatars'];\r\n\tstatic readonly location = 'semimodal-popup';\r\n\r\n\toverride render() {\r\n\t\tconst room = this.props.room;\r\n\r\n\t\tconst avatars: [number, string][] = [];\r\n\t\tfor (let i = 1; i <= 293; i++) {\r\n\t\t\tif (i === 162 || i === 168) continue;\r\n\t\t\tavatars.push([i, window.BattleAvatarNumbers?.[i] || `${i}`]);\r\n\t\t}\r\n\r\n\t\treturn <PSPanelWrapper room={room} width={1210}><div class=\"pad\">\r\n\t\t\t<label class=\"optlabel\"><strong>Choose an avatar or </strong>\r\n\t\t\t\t<button class=\"button\" data-cmd=\"/close\"> Cancel</button>\r\n\t\t\t</label>\r\n\t\t\t<div class=\"avatarlist\">\r\n\t\t\t\t{avatars.map(([i, avatar]) => (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tdata-cmd={`/closeand /avatar ${avatar}`} title={`/avatar ${avatar}`}\r\n\t\t\t\t\t\tclass={`option pixelated${avatar === PS.user.avatar ? ' cur' : ''}`}\r\n\t\t\t\t\t\tstyle={`background-position: -${((i - 1) % 16) * 80 + 1}px -${Math.floor((i - 1) / 16) * 80 + 1}px`}\r\n\t\t\t\t\t></button>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div style=\"clear:left\"></div>\r\n\t\t\t<p><button class=\"button\" data-cmd=\"/close\">Cancel</button></p>\r\n\t\t</div></PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nclass BattleForfeitPanel extends PSRoomPanel {\r\n\tstatic readonly id = 'forfeit';\r\n\tstatic readonly routes = ['forfeitbattle'];\r\n\tstatic readonly location = 'semimodal-popup';\r\n\tstatic readonly noURL = true;\r\n\r\n\toverride render() {\r\n\t\tconst room = this.props.room;\r\n\t\tconst battleRoom = room.getParent() as BattleRoom;\r\n\r\n\t\treturn <PSPanelWrapper room={room} width={480}><div class=\"pad\">\r\n\t\t\t<p>Forfeiting makes you lose the battle. Are you sure?</p>\r\n\t\t\t<p>\r\n\t\t\t\t<button data-cmd=\"/closeand /inopener /closeand /forfeit\" class=\"button\"><strong>Forfeit and close</strong></button> {}\r\n\t\t\t\t<button data-cmd=\"/closeand /inopener /forfeit\" class=\"button\">Just forfeit</button> {}\r\n\t\t\t\t{!battleRoom.battle.rated && <button type=\"button\" data-href=\"replaceplayer\" class=\"button\">\r\n\t\t\t\t\tReplace player\r\n\t\t\t\t</button>} {}\r\n\t\t\t\t<button type=\"button\" data-cmd=\"/close\" class=\"button\">\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</button>\r\n\t\t\t</p>\r\n\t\t</div></PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nclass ReplacePlayerPanel extends PSRoomPanel {\r\n\tstatic readonly id = 'replaceplayer';\r\n\tstatic readonly routes = ['replaceplayer'];\r\n\tstatic readonly location = 'semimodal-popup';\r\n\tstatic readonly noURL = true;\r\n\r\n\thandleReplacePlayer = (ev: Event) => {\r\n\t\tconst room = this.props.room;\r\n\t\tconst battleRoom = room.getParent()?.getParent() as BattleRoom;\r\n\t\tconst newPlayer = this.base?.querySelector<HTMLInputElement>(\"input[name=newplayer]\")?.value;\r\n\t\tif (!newPlayer?.length) return battleRoom.add(\"|error|Enter player's name\");\r\n\t\tif (battleRoom.battle.ended) return battleRoom.add(\"|error|Cannot replace player, battle has already ended.\");\r\n\t\tlet playerSlot = battleRoom.battle.p1.id === PS.user.userid ? \"p1\" : \"p2\";\r\n\t\tbattleRoom.send('/leavebattle');\r\n\t\tbattleRoom.send(`/addplayer ${newPlayer}, ${playerSlot}`);\r\n\t\tthis.close();\r\n\t\tev.preventDefault();\r\n\t};\r\n\r\n\toverride render() {\r\n\t\tconst room = this.props.room;\r\n\r\n\t\treturn <PSPanelWrapper room={room} width={480}><div class=\"pad\">\r\n\t\t\t<form onSubmit={this.handleReplacePlayer}>\r\n\t\t\t\t<p>Replacement player's name:</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<input name=\"newplayer\" class=\"textbox autofocus\" />\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<button type=\"submit\" class=\"button\">\r\n\t\t\t\t\t\t<strong>Replace</strong>\r\n\t\t\t\t\t</button> {}\r\n\t\t\t\t\t<button type=\"button\" data-cmd=\"/close\" class=\"button\">\r\n\t\t\t\t\t\tCancel\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</p>\r\n\t\t\t</form>\r\n\t\t</div></PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nclass ChangePasswordPanel extends PSRoomPanel {\r\n\tstatic readonly id = \"changepassword\";\r\n\tstatic readonly routes = [\"changepassword\"];\r\n\tstatic readonly location = \"semimodal-popup\";\r\n\tstatic readonly noURL = true;\r\n\r\n\tdeclare state: { errorMsg: string };\r\n\r\n\thandleChangePassword = (ev: Event) => {\r\n\t\tev.preventDefault();\r\n\t\tlet oldpassword = this.base?.querySelector<HTMLInputElement>('input[name=oldpassword]')?.value;\r\n\t\tlet password = this.base?.querySelector<HTMLInputElement>('input[name=password]')?.value;\r\n\t\tlet cpassword = this.base?.querySelector<HTMLInputElement>('input[name=cpassword]')?.value;\r\n\t\tif (!oldpassword?.length ||\r\n\t\t\t!password?.length ||\r\n\t\t\t!cpassword?.length) return this.setState({ errorMsg: \"All fields are required\" });\r\n\t\tif (password !== cpassword) return this.setState({ errorMsg: 'Passwords do not match' });\r\n\t\tPSLoginServer.query(\"changepassword\", {\r\n\t\t\toldpassword,\r\n\t\t\tpassword,\r\n\t\t\tcpassword,\r\n\t\t}).then(data => {\r\n\t\t\tif (data?.actionerror) return this.setState({ errorMsg: data?.actionerror });\r\n\t\t\tPS.alert(\"Your password was successfully changed!\");\r\n\r\n\t\t}).catch(err => {\r\n\t\t\tconsole.error(err);\r\n\t\t\tthis.setState({ errorMsg: err.message });\r\n\t\t});\r\n\r\n\t\tthis.setState({ errorMsg: '' });\r\n\t};\r\n\r\n\toverride render() {\r\n\t\tconst room = this.props.room;\r\n\r\n\t\treturn <PSPanelWrapper room={room} width={280}><div class=\"pad\">\r\n\t\t\t<form onSubmit={this.handleChangePassword}>\r\n\t\t\t\t{ !!this.state.errorMsg?.length && <p>\r\n\t\t\t\t\t<b class=\"message-error\"> {this.state.errorMsg}</b>\r\n\t\t\t\t</p> }\r\n\t\t\t\t<p>Change your password:</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<label class=\"label\">\r\n\t\t\t\t\t\tUsername: {}\r\n\t\t\t\t\t\t<input name=\"username\" value={PS.user.name} readOnly={true} autocomplete=\"username\" class=\"textbox disabled\" />\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<label class=\"label\">\r\n\t\t\t\t\t\tOld password: {}\r\n\t\t\t\t\t\t<input name=\"oldpassword\" type=\"password\" autocomplete=\"current-password\" class=\"textbox autofocus\" />\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<label class=\"label\">\r\n\t\t\t\t\t\tNew password: {}\r\n\t\t\t\t\t\t<input name=\"password\" type=\"password\" autocomplete=\"new-password\" class=\"textbox\" />\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<label class=\"label\">\r\n\t\t\t\t\t\tNew password (confirm): {}\r\n\t\t\t\t\t\t<input name=\"cpassword\" type=\"password\" autocomplete=\"new-password\" class=\"textbox\" />\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p class=\"buttonbar\">\r\n\t\t\t\t\t<button type=\"submit\" class=\"button\">\r\n\t\t\t\t\t\t<strong>Change password</strong>\r\n\t\t\t\t\t</button> {}\r\n\t\t\t\t\t<button type=\"button\" data-cmd=\"/close\" class=\"button\">Cancel</button>\r\n\t\t\t\t</p>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t\t</PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nclass RegisterPanel extends PSRoomPanel {\r\n\tstatic readonly id = \"register\";\r\n\tstatic readonly routes = [\"register\"];\r\n\tstatic readonly location = \"semimodal-popup\";\r\n\tstatic readonly noURL = true;\r\n\tstatic readonly rightPopup = true;\r\n\r\n\tdeclare state: { errorMsg: string };\r\n\r\n\thandleRegisterUser = (ev: Event) => {\r\n\t\tev.preventDefault();\r\n\t\tlet captcha = this.base?.querySelector<HTMLInputElement>('input[name=captcha]')?.value;\r\n\t\tlet password = this.base?.querySelector<HTMLInputElement>('input[name=password]')?.value;\r\n\t\tlet cpassword = this.base?.querySelector<HTMLInputElement>('input[name=cpassword]')?.value;\r\n\t\tif (!captcha?.length ||\r\n\t\t\t!password?.length ||\r\n\t\t\t!cpassword?.length) return this.setState({ errorMsg: \"All fields are required\" });\r\n\t\tif (password !== cpassword) return this.setState({ errorMsg: 'Passwords do not match' });\r\n\t\tPSLoginServer.query(\"register\", {\r\n\t\t\tcaptcha,\r\n\t\t\tpassword,\r\n\t\t\tcpassword,\r\n\t\t\tusername: PS.user.name,\r\n\t\t\tchallstr: PS.user.challstr,\r\n\t\t}).then(data => {\r\n\t\t\tif (data?.actionerror) this.setState({ errorMsg: data?.actionerror });\r\n\t\t\tif (data?.curuser?.loggedin) {\r\n\t\t\t\tlet name = data.curuser.username;\r\n\t\t\t\tPS.user.registered = { name, userid: toID(name) };\r\n\t\t\t\tif (data?.assertion) PS.user.handleAssertion(name, data?.assertion);\r\n\t\t\t\tthis.close();\r\n\t\t\t\tPS.alert(\"You have been successfully registered.\");\r\n\t\t\t}\r\n\t\t}).catch(err => {\r\n\t\t\tconsole.error(err);\r\n\t\t\tthis.setState({ errorMsg: err.message });\r\n\t\t});\r\n\r\n\t\tthis.setState({ errorMsg: '' });\r\n\t};\r\n\r\n\toverride render() {\r\n\t\tconst room = this.props.room;\r\n\r\n\t\treturn <PSPanelWrapper room={room} width={280}><div class=\"pad\">\r\n\t\t\t<form onSubmit={this.handleRegisterUser}>\r\n\t\t\t\t{ !!this.state.errorMsg?.length && <p>\r\n\t\t\t\t\t<b class=\"message-error\"> {this.state.errorMsg}</b>\r\n\t\t\t\t</p> }\r\n\t\t\t\t<p>Register your account:</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<label class=\"label\">\r\n\t\t\t\t\t\tUsername: {}\r\n\t\t\t\t\t\t<input name=\"name\" value={PS.user.name} readOnly={true} autocomplete=\"username\" class=\"textbox disabled\" />\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<label class=\"label\">\r\n\t\t\t\t\t\tPassword: {}\r\n\t\t\t\t\t\t<input name=\"password\" type=\"password\" autocomplete=\"new-password\" class=\"textbox autofocus\" />\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<label class=\"label\">\r\n\t\t\t\t\t\tPassword (confirm): {}\r\n\t\t\t\t\t\t<input name=\"cpassword\" type=\"password\" autocomplete=\"new-password\" class=\"textbox\" />\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<label class=\"label\"><img\r\n\t\t\t\t\t\tsrc=\"https://play.pokemonshowdown.com/sprites/gen5ani/pikachu.gif\"\r\n\t\t\t\t\t\talt=\"An Electric-type mouse that is the mascot of the Pok&eacute;mon franchise.\"\r\n\t\t\t\t\t/></label>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<label class=\"label\">\r\n\t\t\t\t\t\tWhat is this pokemon? {}\r\n\t\t\t\t\t\t<input name=\"captcha\" class=\"textbox\" />\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p class=\"buttonbar\">\r\n\t\t\t\t\t<button type=\"submit\" class=\"button\"><strong>Register</strong></button> {}\r\n\t\t\t\t\t<button type=\"button\" data-cmd=\"/close\" class=\"button\">Cancel</button>\r\n\t\t\t\t</p>\r\n\t\t\t</form>\r\n\r\n\t\t</div>\r\n\t\t</PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nclass BackgroundListPanel extends PSRoomPanel {\r\n\tstatic readonly id = 'changebackground';\r\n\tstatic readonly routes = ['changebackground'];\r\n\tstatic readonly location = 'semimodal-popup';\r\n\tstatic readonly noURL = true;\r\n\r\n\tdeclare state: { status?: string };\r\n\r\n\tsetBg = (ev: Event) => {\r\n\t\tlet curtarget = ev.currentTarget as HTMLButtonElement;\r\n\t\tlet bg = curtarget.value;\r\n\t\tPSBackground.set('', bg);\r\n\t\tev.preventDefault();\r\n\t\tev.stopImmediatePropagation();\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\r\n\tuploadBg = (ev: Event) => {\r\n\t\tthis.setState({ status: undefined });\r\n\t\tconst input = this.base?.querySelector<HTMLInputElement>('input[name=bgfile]');\r\n\t\tif (!input?.files?.[0]) return;\r\n\r\n\t\tconst file = input.files[0];\r\n\t\tconst reader = new FileReader();\r\n\r\n\t\treader.onload = () => {\r\n\t\t\tconst base64Image = reader.result as string;\r\n\t\t\tPSBackground.set(base64Image, 'custom');\r\n\t\t\tthis.forceUpdate();\r\n\t\t};\r\n\r\n\t\treader.onerror = () => {\r\n\t\t\tthis.setState({ status: \"Failed to load background image.\" });\r\n\t\t};\r\n\t\treader.readAsDataURL(file);\r\n\t\tev.preventDefault();\r\n\t\tev.stopImmediatePropagation();\r\n\t};\r\n\r\n\toverride render() {\r\n\t\tconst room = this.props.room;\r\n\t\tconst option = (val: string) => val === PSBackground.id ? 'option cur' : 'option';\r\n\t\treturn <PSPanelWrapper room={room} width={480}><div class=\"pad\">\r\n\t\t\t<p><strong>Default</strong></p>\r\n\t\t\t<div class=\"bglist\">\r\n\t\t\t\t<button onClick={this.setBg} value=\"\" class={option('')}>\r\n\t\t\t\t\t<strong\r\n\t\t\t\t\t\tstyle=\"\r\n\t\t\t\t\t\tbackground: #888888;\r\n\t\t\t\t\t\tcolor: white;\r\n\t\t\t\t\t\tpadding: 16px 18px;\r\n\t\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\t\tfont-size: 12pt;\r\n\t\t\t\t\t\"\r\n\t\t\t\t\t>Random</strong>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div style=\"clear: left\"></div>\r\n\t\t\t<p><strong>Official</strong></p>\r\n\t\t\t<div class=\"bglist\">\r\n\t\t\t\t<button onClick={this.setBg} value=\"charizards\" class={option('charizards')}>\r\n\t\t\t\t\t<span class=\"bg\" style=\"background-position: 0 -0px\"></span>{}\r\n\t\t\t\t\tCharizards\r\n\t\t\t\t</button>\r\n\t\t\t\t<button onClick={this.setBg} value=\"horizon\" class={option('horizon')}>\r\n\t\t\t\t\t<span class=\"bg\" style=\"background-position: 0 -90px\"></span>{}\r\n\t\t\t\t\tHorizon\r\n\t\t\t\t</button>\r\n\t\t\t\t<button onClick={this.setBg} value=\"waterfall\" class={option('waterfall')}>\r\n\t\t\t\t\t<span class=\"bg\" style=\"background-position: 0 -180px\"></span>{}\r\n\t\t\t\t\tWaterfall\r\n\t\t\t\t</button>\r\n\t\t\t\t<button onClick={this.setBg} value=\"ocean\" class={option('ocean')}>\r\n\t\t\t\t\t<span class=\"bg\" style=\"background-position: 0 -270px\"></span>{}\r\n\t\t\t\t\tOcean\r\n\t\t\t\t</button>\r\n\t\t\t\t<button onClick={this.setBg} value=\"shaymin\" class={option('shaymin')}>\r\n\t\t\t\t\t<span class=\"bg\" style=\"background-position: 0 -360px\"></span>{}\r\n\t\t\t\t\tShaymin\r\n\t\t\t\t</button>\r\n\t\t\t\t<button onClick={this.setBg} value=\"solidblue\" class={option('solidblue')}>\r\n\t\t\t\t\t<span class=\"bg\" style=\"background: #344b6c\"></span>{}\r\n\t\t\t\t\tSolid blue\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div style=\"clear: left\"></div>\r\n\t\t\t<p><strong>Custom</strong></p>\r\n\t\t\t<p>\r\n\t\t\t\tUpload:\r\n\t\t\t</p>\r\n\t\t\t<p><input type=\"file\" accept=\"image/*\" name=\"bgfile\" onChange={this.uploadBg} /></p>\r\n\t\t\t{!!this.state.status && <p class=\"error\">{this.state.status}</p>}\r\n\t\t\t<p>\r\n\t\t\t\t<button data-cmd=\"/close\" class=\"button\"><strong>Done</strong></button>\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t\t</PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nclass ChatFormattingPanel extends PSRoomPanel {\r\n\tstatic readonly id = 'chatformatting';\r\n\tstatic readonly routes = ['chatformatting'];\r\n\tstatic readonly location = 'semimodal-popup';\r\n\tstatic readonly noURL = true;\r\n\r\n\thandleOnChange = (ev: Event) => {\r\n\t\tconst setting = \"hide\" + (ev.currentTarget as HTMLInputElement).name;\r\n\t\tconst value = (ev.currentTarget as HTMLInputElement).checked;\r\n\t\tlet curPref = PS.prefs.chatformatting;\r\n\t\tcurPref[setting] = value;\r\n\t\tPS.prefs.set(\"chatformatting\", curPref);\r\n\t\tev.preventDefault();\r\n\t\tev.stopImmediatePropagation();\r\n\t};\r\n\r\n\toverride render() {\r\n\t\tconst room = this.props.room;\r\n\t\tconst ctrl = PSView.isMac ? 'Cmd' : 'Ctrl';\r\n\t\treturn <PSPanelWrapper room={room} width={480}><div class=\"pad\">\r\n\t\t\t<p>Usable formatting:</p>\r\n\t\t\t<p>**<strong>bold</strong>** (<kbd>{ctrl}</kbd>+<kbd>B</kbd>)</p>\r\n\t\t\t<p>__<em>italics</em>__ (<kbd>{ctrl}</kbd>+<kbd>I</kbd>)</p>\r\n\t\t\t<p>``<code>code formatting</code>`` (<kbd>Ctrl</kbd>+<kbd>`</kbd>)</p>\r\n\t\t\t<p>~~<s>strikethrough</s>~~</p>\r\n\t\t\t<p>^^<sup>superscript</sup>^^</p>\r\n\t\t\t<p>\\\\<sub>subscript</sub>\\\\</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tonChange={this.handleOnChange}\r\n\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\tname=\"greentext\"\r\n\t\t\t\t\t\tchecked={PS.prefs.chatformatting.hidegreentext}\r\n\t\t\t\t\t/> Suppress <span class=\"greentext\">&gt;greentext</span>\r\n\t\t\t\t</label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tonChange={this.handleOnChange}\r\n\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\tname=\"me\"\r\n\t\t\t\t\t\tchecked={PS.prefs.chatformatting.hideme}\r\n\r\n\t\t\t\t\t/> Suppress <code>/me</code> <em>action formatting</em>\r\n\t\t\t\t</label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tonChange={this.handleOnChange}\r\n\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\tname=\"spoiler\"\r\n\t\t\t\t\t\tchecked={PS.prefs.chatformatting.hidespoiler}\r\n\t\t\t\t\t/> Auto-show spoilers: <span class=\"spoiler\">these things</span>\r\n\t\t\t\t</label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tonChange={this.handleOnChange}\r\n\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\tname=\"links\"\r\n\t\t\t\t\t\tchecked={PS.prefs.chatformatting.hidelinks}\r\n\t\t\t\t\t/> Make [[clickable links]] unclickable\r\n\t\t\t\t</label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tonChange={this.handleOnChange}\r\n\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\tname=\"interstice\"\r\n\t\t\t\t\t\tchecked={PS.prefs.chatformatting.hideinterstice}\r\n\t\t\t\t\t/> Don't warn for untrusted links\r\n\t\t\t\t</label>\r\n\t\t\t</p>\r\n\t\t\t<p><button data-cmd=\"/close\" class=\"button\">Done</button></p>\r\n\t\t</div>\r\n\t\t</PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nclass LeaveRoomPanel extends PSRoomPanel {\r\n\tstatic readonly id = 'confirmleaveroom';\r\n\tstatic readonly routes = ['confirmleaveroom'];\r\n\tstatic readonly location = 'semimodal-popup';\r\n\tstatic readonly noURL = true;\r\n\r\n\toverride render() {\r\n\t\tconst room = this.props.room;\r\n\t\tconst parentRoomid = room.parentRoomid!;\r\n\r\n\t\treturn <PSPanelWrapper room={room} width={480}><div class=\"pad\">\r\n\t\t\t<p>Close <code>{parentRoomid || \"ERROR\"}</code>?</p>\r\n\t\t\t<p class=\"buttonbar\">\r\n\t\t\t\t<button data-cmd={`/closeand /close ${parentRoomid}`} class=\"button autofocus\">\r\n\t\t\t\t\t<strong>Close Room</strong>\r\n\t\t\t\t</button> {}\r\n\t\t\t\t<button data-cmd=\"/close\" class=\"button\">\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</button>\r\n\t\t\t</p>\r\n\t\t</div></PSPanelWrapper>;\r\n\t}\r\n}\r\nclass BattleOptionsPanel extends PSRoomPanel {\r\n\tstatic readonly id = 'battleoptions';\r\n\tstatic readonly routes = ['battleoptions'];\r\n\tstatic readonly location = 'semimodal-popup';\r\n\tstatic readonly noURL = true;\r\n\r\n\thandleHardcoreMode = (ev: Event) => {\r\n\t\tconst mode = (ev.currentTarget as HTMLInputElement).checked;\r\n\t\tconst room = this.getBattleRoom();\r\n\t\tif (!room) return this.close();\r\n\r\n\t\troom.battle.setHardcoreMode(mode);\r\n\t\tif (mode) {\r\n\t\t\troom.add(`||Hardcore mode ON: Information not available in-game is now hidden.`);\r\n\t\t} else {\r\n\t\t\troom.add(`||Hardcore mode OFF: Information not available in-game is now shown.`);\r\n\t\t}\r\n\t\troom.update(null);\r\n\t};\r\n\thandleIgnoreSpectators = (ev: Event | boolean) => {\r\n\t\tconst value = typeof ev === \"object\" ?\r\n\t\t\t(ev.currentTarget as HTMLInputElement).checked :\r\n\t\t\tev;\r\n\t\tconst room = this.getBattleRoom();\r\n\t\tif (!room) return this.close();\r\n\r\n\t\troom.battle.ignoreSpects = value;\r\n\t\troom.add(`||Spectators ${room.battle.ignoreSpects ? '' : 'no longer '}ignored.`);\r\n\t\tconst chats = document.querySelectorAll<HTMLElement>('.battle-log .chat');\r\n\t\tconst displaySetting = room.battle.ignoreSpects ? 'none' : '';\r\n\t\tfor (const chat of chats) {\r\n\t\t\tconst small = chat.querySelector('small');\r\n\t\t\tif (!small) continue;\r\n\t\t\tconst text = small.innerText;\r\n\t\t\tconst isPlayerChat = text.includes('\\u2606') || text.includes('\\u2605');\r\n\t\t\tif (!isPlayerChat) {\r\n\t\t\t\tchat.style.display = displaySetting;\r\n\t\t\t}\r\n\t\t}\r\n\t\troom.battle.scene.log.updateScroll();\r\n\t};\r\n\thandleIgnoreOpponent = (ev: Event | boolean) => {\r\n\t\tconst value = typeof ev === \"object\" ?\r\n\t\t\t(ev.currentTarget as HTMLInputElement).checked :\r\n\t\t\tev;\r\n\t\tconst room = this.getBattleRoom();\r\n\t\tif (!room) return this.close();\r\n\r\n\t\troom.battle.ignoreOpponent = value;\r\n\t\troom.battle.resetToCurrentTurn();\r\n\t};\r\n\thandleIgnoreNicks = (ev: Event | boolean) => {\r\n\t\tconst value = typeof ev === \"object\" ?\r\n\t\t\t(ev.currentTarget as HTMLInputElement).checked :\r\n\t\t\tev;\r\n\t\tconst room = this.getBattleRoom();\r\n\t\tif (!room) return this.close();\r\n\r\n\t\troom.battle.ignoreNicks = value;\r\n\t\troom.battle.resetToCurrentTurn();\r\n\t};\r\n\thandleAllSettings = (ev: Event) => {\r\n\t\tconst setting = (ev.currentTarget as HTMLInputElement).name;\r\n\t\tconst value = (ev.currentTarget as HTMLInputElement).checked;\r\n\t\tconst room = this.getBattleRoom();\r\n\r\n\t\tswitch (setting) {\r\n\t\tcase 'autotimer': {\r\n\t\t\tPS.prefs.set('autotimer', value);\r\n\t\t\tif (value) {\r\n\t\t\t\troom?.send('/timer on');\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 'ignoreopp': {\r\n\t\t\tPS.prefs.set('ignoreopp', value);\r\n\t\t\tthis.handleIgnoreOpponent(value);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 'ignorespects': {\r\n\t\t\tPS.prefs.set('ignorespects', value);\r\n\t\t\tthis.handleIgnoreSpectators(value);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 'ignorenicks': {\r\n\t\t\tPS.prefs.set('ignorenicks', value);\r\n\t\t\tthis.handleIgnoreNicks(value);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 'rightpanel': {\r\n\t\t\tPS.prefs.set('rightpanelbattles', value);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 'disallowspectators': {\r\n\t\t\tPS.prefs.set('disallowspectators', value);\r\n\t\t\tPS.mainmenu.disallowSpectators = value;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\t}\r\n\t};\r\n\tgetBattleRoom() {\r\n\t\tconst battleRoom = this.props.room.getParent() as BattleRoom | null;\r\n\t\treturn battleRoom?.battle ? battleRoom : null;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tconst room = this.props.room;\r\n\t\tconst battleRoom = this.getBattleRoom();\r\n\t\tconst isPlayer = !!battleRoom?.battle.myPokemon;\r\n\t\tconst canOfferTie = battleRoom && ((battleRoom.battle.turn >= 100 && isPlayer) || PS.user.group === '~');\r\n\t\treturn <PSPanelWrapper room={room} width={380}><div class=\"pad\">\r\n\t\t\t{battleRoom && <>\r\n\t\t\t\t<p><strong>In this battle</strong></p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<label class=\"checkbox\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tchecked={battleRoom.battle.hardcoreMode}\r\n\t\t\t\t\t\t\ttype=\"checkbox\" onChange={this.handleHardcoreMode}\r\n\t\t\t\t\t\t/> Hardcore mode (hide info not shown in-game)\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<label class=\"checkbox\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tchecked={battleRoom.battle.ignoreSpects}\r\n\t\t\t\t\t\t\ttype=\"checkbox\" onChange={this.handleIgnoreSpectators}\r\n\t\t\t\t\t\t/> Ignore spectators\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<label class=\"checkbox\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tchecked={battleRoom.battle.ignoreOpponent}\r\n\t\t\t\t\t\t\ttype=\"checkbox\" onChange={this.handleIgnoreOpponent}\r\n\t\t\t\t\t\t/> Ignore opponent\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<label class=\"checkbox\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tchecked={battleRoom.battle?.ignoreNicks}\r\n\t\t\t\t\t\t\ttype=\"checkbox\" onChange={this.handleIgnoreNicks}\r\n\t\t\t\t\t\t/> Ignore nicknames\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</p>\r\n\t\t\t</>}\r\n\t\t\t<p><strong>All battles</strong></p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"disallowspectators\" checked={PS.prefs.disallowspectators || false}\r\n\t\t\t\t\t\ttype=\"checkbox\" onChange={this.handleAllSettings}\r\n\t\t\t\t\t/> <abbr title=\"You can still invite spectators by giving them the URL or using the /invite command\">Invite only (hide from Battles list)</abbr>\r\n\t\t\t\t</label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"ignorenicks\" checked={PS.prefs.ignorenicks || false}\r\n\t\t\t\t\t\ttype=\"checkbox\" onChange={this.handleAllSettings}\r\n\t\t\t\t\t/> Ignore Pok&eacute;mon nicknames\r\n\t\t\t\t</label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"ignorespects\" checked={PS.prefs.ignorespects || false}\r\n\t\t\t\t\t\ttype=\"checkbox\" onChange={this.handleAllSettings}\r\n\t\t\t\t\t/> Ignore spectators\r\n\t\t\t\t</label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"ignoreopp\" checked={PS.prefs.ignoreopp || false}\r\n\t\t\t\t\t\ttype=\"checkbox\" onChange={this.handleAllSettings}\r\n\t\t\t\t\t/> Ignore opponent\r\n\t\t\t\t</label>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<label class=\"checkbox\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"autotimer\" checked={PS.prefs.autotimer || false}\r\n\t\t\t\t\t\ttype=\"checkbox\" onChange={this.handleAllSettings}\r\n\t\t\t\t\t/> Automatically start timer\r\n\t\t\t\t</label>\r\n\t\t\t</p>\r\n\t\t\t{!PS.prefs.onepanel && document.body.offsetWidth >= 800 && <p>\r\n\t\t\t\t<label class=\"checkbox\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"rightpanel\" checked={PS.prefs.rightpanelbattles || false}\r\n\t\t\t\t\t\ttype=\"checkbox\" onChange={this.handleAllSettings}\r\n\t\t\t\t\t/> Open new battles in the right-side panel\r\n\t\t\t\t</label>\r\n\t\t\t</p>}\r\n\t\t\t<p class=\"buttonbar\">\r\n\t\t\t\t<button data-cmd=\"/close\" class=\"button\">Done</button> {}\r\n\t\t\t\t{battleRoom && <button data-cmd=\"/closeand /inopener /offertie\" class=\"button\" disabled={!canOfferTie}>\r\n\t\t\t\t\tOffer Tie\r\n\t\t\t\t</button>}\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t\t</PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nclass PopupRoom extends PSRoom {\r\n\treturnValue: unknown = this.args?.cancelValue;\r\n\toverride destroy() {\r\n\t\t(this.args?.callback as any)?.(this.returnValue);\r\n\t\tsuper.destroy();\r\n\t}\r\n}\r\n\r\nclass PopupPanel extends PSRoomPanel<PopupRoom> {\r\n\tstatic readonly id = 'popup';\r\n\tstatic readonly routes = ['popup-*'];\r\n\tstatic readonly location = 'semimodal-popup';\r\n\tstatic readonly noURL = true;\r\n\tstatic readonly Model = PopupRoom;\r\n\r\n\thandleSubmit = (ev: Event) => {\r\n\t\tev.preventDefault();\r\n\t\tev.stopImmediatePropagation();\r\n\t\tconst room = this.props.room;\r\n\t\troom.returnValue = room.args?.okValue;\r\n\t\tconst textbox = this.base!.querySelector<HTMLInputElement>('input[name=value]');\r\n\t\tif (textbox) {\r\n\t\t\troom.returnValue = textbox.value;\r\n\t\t}\r\n\t\tthis.close();\r\n\t};\r\n\toverride componentDidMount() {\r\n\t\tsuper.componentDidMount();\r\n\t\tconst textbox = this.base!.querySelector<HTMLInputElement>('input[name=value]');\r\n\t\tif (!textbox) return;\r\n\t\ttextbox.value = this.props.room.args?.value as string || '';\r\n\t}\r\n\tparseMessage(message: string) {\r\n\t\tif (message.startsWith('|html|')) {\r\n\t\t\treturn BattleLog.sanitizeHTML(message.slice(6));\r\n\t\t}\r\n\t\treturn BattleLog.parseMessage(message);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tconst room = this.props.room;\r\n\t\tconst okButton = room.args?.okButton as string || 'OK';\r\n\t\tconst cancelButton = room.args?.cancelButton as string | undefined;\r\n\t\tconst otherButtons = room.args?.otherButtons as preact.ComponentChildren;\r\n\t\tconst value = room.args?.value as string | undefined;\r\n\t\tconst type = (room.args?.type || (typeof value === 'string' ? 'text' : null)) as string | null;\r\n\t\tconst message = room.args?.message;\r\n\t\treturn <PSPanelWrapper room={room} width={room.args?.width as number || 480}>\r\n\t\t\t<form class=\"pad\" onSubmit={this.handleSubmit}>\r\n\t\t\t\t{message && <p\r\n\t\t\t\t\tstyle=\"white-space:pre-wrap;word-wrap:break-word\"\r\n\t\t\t\t\tdangerouslySetInnerHTML={{ __html: this.parseMessage(message as string || '') }}\r\n\t\t\t\t></p>}\r\n\t\t\t\t{!!type && <p><input name=\"value\" type={type} class=\"textbox autofocus\" style=\"width:100%;box-sizing:border-box\" /></p>}\r\n\t\t\t\t<p class=\"buttonbar\">\r\n\t\t\t\t\t<button class={`button${!type ? ' autofocus' : ''}`} type=\"submit\" style=\"min-width:50px\">\r\n\t\t\t\t\t\t<strong>{okButton}</strong>\r\n\t\t\t\t\t</button> {}\r\n\t\t\t\t\t{otherButtons} {}\r\n\t\t\t\t\t{!!cancelButton && <button class=\"button\" data-cmd=\"/close\" type=\"button\">\r\n\t\t\t\t\t\t{cancelButton}\r\n\t\t\t\t\t</button>}\r\n\t\t\t\t</p>\r\n\t\t\t</form>\r\n\t\t</PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nclass RoomTabListPanel extends PSRoomPanel {\r\n\tstatic readonly id = 'roomtablist';\r\n\tstatic readonly routes = ['roomtablist'];\r\n\tstatic readonly location = 'semimodal-popup';\r\n\tstatic readonly noURL = true;\r\n\r\n\tstartingLayout = PS.prefs.onepanel;\r\n\thandleLayoutChange = (ev: Event) => {\r\n\t\tconst checkbox = ev.currentTarget as HTMLInputElement;\r\n\t\tPS.prefs.onepanel = checkbox.checked ? 'vertical' : this.startingLayout;\r\n\t\tPS.update();\r\n\t};\r\n\toverride render() {\r\n\t\tconst verticalTabs = PS.prefs.onepanel === 'vertical';\r\n\t\treturn <PSPanelWrapper room={this.props.room}><div class=\"tablist\">\r\n\t\t\t<ul>\r\n\t\t\t\t{PS.leftRoomList.map(roomid => PSHeader.renderRoomTab(roomid, true))}\r\n\t\t\t</ul>\r\n\t\t\t<ul>\r\n\t\t\t\t{PS.rightRoomList.map(roomid => PSHeader.renderRoomTab(roomid, true))}\r\n\t\t\t</ul>\r\n\t\t\t<div class=\"pad\"><label class=\"checkbox\"><input\r\n\t\t\t\ttype=\"checkbox\" checked={verticalTabs} onChange={this.handleLayoutChange}\r\n\t\t\t/> Try vertical tabs</label></div>\r\n\t\t</div></PSPanelWrapper>;\r\n\t}\r\n}\r\nclass BattleTimerPanel extends PSRoomPanel {\r\n\tstatic readonly id = 'battletimer';\r\n\tstatic readonly routes = ['battletimer'];\r\n\tstatic readonly location = 'semimodal-popup';\r\n\tstatic readonly noURL = true;\r\n\r\n\toverride render() {\r\n\t\tconst room = this.props.room.getParent() as BattleRoom;\r\n\t\treturn <PSPanelWrapper room={this.props.room}><div class=\"pad\">\r\n\t\t\t{room.battle.kickingInactive ? (\r\n\t\t\t\t<button class=\"button\" data-cmd=\"/closeand /inopener /timer stop\">Stop Timer</button>\r\n\t\t\t) : (\r\n\t\t\t\t<button class=\"button\" data-cmd=\"/closeand /inopener /timer start\">Start Timer</button>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t\t</PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nPS.addRoomType(\r\n\tUserPanel,\r\n\tUserOptionsPanel,\r\n\tUserListPanel,\r\n\tVolumePanel,\r\n\tOptionsPanel,\r\n\tLoginPanel,\r\n\tAvatarsPanel,\r\n\tChangePasswordPanel,\r\n\tRegisterPanel,\r\n\tBattleForfeitPanel,\r\n\tReplacePlayerPanel,\r\n\tBackgroundListPanel,\r\n\tLeaveRoomPanel,\r\n\tChatFormattingPanel,\r\n\tPopupPanel,\r\n\tRoomTabListPanel,\r\n\tBattleOptionsPanel,\r\n\tBattleTimerPanel\r\n);\r\n"],"mappings":"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","ignoreList":[]}